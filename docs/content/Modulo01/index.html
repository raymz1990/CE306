<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>CE306 - Instrumentação Matemática para Estatística - 1&nbsp; Cálculo Diferencial e Integral</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../content/Modulo02/index.html" rel="next">
<link href="../../content/index.html" rel="prev">
<link href="../../default_overview_image.jpg" rel="icon" type="image/jpeg">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../custom.css">
<meta property="og:title" content="CE306 - Instrumentação Matemática para Estatística - 1&nbsp; Cálculo Diferencial e Integral">
<meta property="og:description" content="Material da disciplina CE306 - Instrumentação Matemática para Estatística do curso de Estatística da Universidade Federal do Paraná (UFPR).">
<meta property="og:image" content="default_overview_image.jpg">
<meta property="og:site_name" content="CE306 - Instrumentação Matemática para Estatística">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/Modulo01/index.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Cálculo Diferencial e Integral</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">CE306 - Instrumentação Matemática para Estatística</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://raymz1990.github.io/CE313/tree/main/book/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-git"></i></a>
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="../../CE306---Instrumentação-Matemática-para-Estatística.pdf">
              <i class="bi bi-bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="../../CE306---Instrumentação-Matemática-para-Estatística.docx">
              <i class="bi bi-bi-file-word pe-1"></i>
            Download Docx
            </a>
          </li>
      </ul>
    </div>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-1" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-1">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Apresentação</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefácio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/Modulo01/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Cálculo Diferencial e Integral</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/Modulo02/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Estatísticas de Ordem</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/Modulo03/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Estatística Não Paramétrica 2</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/Modulo04/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Função de Distribuição Empírica</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#funções-limites-e-continuidade" id="toc-funções-limites-e-continuidade" class="nav-link active" data-scroll-target="#funções-limites-e-continuidade"><span class="header-section-number">1.1</span> Funções, limites e continuidade</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://raymz1990.github.io/CE313/edit/main/book/content/Modulo01/index.qmd" class="toc-action"><i class="bi bi-git"></i>Edit this page</a></li><li><a href="https://raymz1990.github.io/CE313/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Cálculo Diferencial e Integral</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>No contexto de ciência de dados grande parte dos problemas de previsão, classificação, agrupamento, prescrição, entre outros são resolvidos por meio de uma “modelagem.” O termo <strong>modelo</strong> é usado de várias formas em estatística e aprendizado de máquina, mas de forma ampla podemos entender os <strong>modelos</strong> como sendo representações simplificadas da realidade. Neste sentido, modelos são fundamentais para a extração de conhecimento dos dados. Em termos matemáticos um modelo nada mais é que uma <strong>função</strong> que objetiva representar como o cientista imagina ou supõe que a realidade está sendo gerada e refletida por meio dos dados.</p>
<p>O objetivo deste capítulo é introduzir a ideia de <strong>funções</strong> e como avaliar o seu comportamento em termos de suavidade e pontos de interesse, por exemplo, quando uma função atinge o seu maior ou menor valor. Para ilustrar o uso de funções e de suas propriedades, nós vamos construir um dos modelos mais simples em ciência de dados: o modelo de regressão linear simples. No nosso caminho até o modelo de regressão linear simples vamos esclarecer qual a origem e porque a média aritmética, que é também um modelo, é tão popular em ciência de dados.</p>
<section id="funções-limites-e-continuidade" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="funções-limites-e-continuidade"><span class="header-section-number">1.1</span> Funções, limites e continuidade</h2>
<p>Para motivar a ideia de funções imagine que você vai até um agente de seguros para fazer o seguro do seu carro. O agente de seguros com certeza irá fazer uma série de perguntas sobre o veículo, você e seus hábitos. Exemplos usuais de perguntas incluem a sua idade, sexo, estado civil, qual o uso do veículo, onde você costuma estacionar além do modelo e ano do veículo. A partir destas questões a seguradora faz algum processamento, ou seja, usa um <strong>modelo</strong> para avaliar o risco que você traz para a companhia e consequentemente calcula o valor que você deve pagar pelo seu seguro.</p>
<p>O importante é você notar o fluxo das informações. Existe um conjunto de entradas: as respostas que você forneceu. Estas respostas são submetidas a algum processamento e ao final existe uma saída, neste caso o preço do seguro. A Figura 1.1 fornece uma ilustração simples da ideia de função.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Funcao.png" class="img-fluid figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1.1: Ilustração de função.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Na ilustração da Figura 1.1 as variáveis de entrada foram genericamente denotadas por <span class="math inline">\(x_1\)</span>, <span class="math inline">\(x_2\)</span>, <span class="math inline">\(x_3\)</span>, <span class="math inline">\(\ldots\)</span>, <span class="math inline">\(x_p\)</span> o que significa que temos <span class="math inline">\(p\)</span> entradas. No exemplo do seguro as entradas são as respostas para as <span class="math inline">\(p\)</span> perguntas. As respostas são processadas dentro da <strong>função</strong> e então uma saída <span class="math inline">\(y\)</span> é gerada. Esta ideia simples pode ser adaptada para uma infinidade de situações práticas no contexto de análise preditiva, classificação, agrupamento entre outras. Alguns exemplos são a concessão de crédito, detecção de potenciais clientes, detecção de softwares ou operações maliciosas entre diversas outras.</p>
<p>Para qualificar um pouco nosso entendimento de funções é importante entender que tipo de números podem ser inseridos na função e que tipo de número ou números a função deve resultar. Os números racionais são os números da forma <span class="math inline">\(\frac{a}{b}\)</span>, sendo <span class="math inline">\(a\)</span> e <span class="math inline">\(b\)</span> inteiros e <span class="math inline">\(b \neq 0\)</span>. Denotamos o conjunto dos números racionais por <span class="math inline">\(\mathbb{Q}\)</span>, ou seja,</p>
<p><span class="math display">\[
\mathbb{Q} = \left \{ \frac{a}{b} | a, b \in \mathbb{Z}, b \neq 0 \right \}
\]</span></p>
<p>onde <span class="math inline">\(\mathbb{Z} = \{\ldots, -3, -2, -1, 0, 1,2,3, \ldots \}\)</span> é o conjunto dos números inteiros. A notação acima é lida da seguinte forma: <span class="math inline">\(\mathbb{Q}\)</span> é o conjunto dos números <span class="math inline">\(a\)</span> dividido por <span class="math inline">\(b\)</span>, tais que <span class="math inline">\(a\)</span> e <span class="math inline">\(b\)</span> são inteiros e <span class="math inline">\(b\)</span> é diferente de zero. Note que a divisão por zero não é definida. De forma similar, indicamos por <span class="math inline">\(\mathbb{N}\)</span> o conjunto dos números naturais:</p>
<p><span class="math display">\[
\mathbb{N} = \{0,1,2,3,\ldots \}.
\]</span></p>
<p>Não é possível escrever todos os números como a razão entre dois números inteiros, então ao conjunto de números que não são racionais chamamos de irracionais. Por fim, a união de todos os tipos de números mencionados anteriormente, chamamos de números reais e denotamos por <span class="math inline">\(\Re\)</span>. De forma geral, em ciência de dados, vamos fazer distinção apenas entre os números inteiros, os quais algumas vezes estaremos interessados apenas nos não-negativos, ou seja os naturais, e os números reais. Esta distinção também é usada na maioria das linguagens de programação e o <code>R</code> não é uma exceção. Com este conjunto de conceitos estamos aptos a definir o que é uma função.</p>
<div class="callout callout-style-simple callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<strong>Definição 1.1</strong>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Uma <strong>função</strong> escrita como <span class="math inline">\(y = f(x)\)</span> associa um número <span class="math inline">\(y\)</span> a cada valor de <span class="math inline">\(x\)</span>.</p>
</div>
</div>
<p>Na Definição 1.1 temos a variável de entrada <span class="math inline">\(x\)</span>, também chamada de <strong>variável independente</strong> ou argumento da função <span class="math inline">\(f(\cdot)\)</span>. O conjunto de valores que <span class="math inline">\(x\)</span> pode assumir é chamado de <strong>domínio</strong> de <span class="math inline">\(f(x)\)</span> e denotamos por <span class="math inline">\(D\)</span>. Como resultado da aplicação da função no ponto <span class="math inline">\(x\)</span> temos <span class="math inline">\(y\)</span>, que é chamada de <strong>variável dependente</strong>. A <strong>imagem</strong> de f(x) denotada por <span class="math inline">\(I\)</span> é a faixa de valores que <span class="math inline">\(y\)</span> pode assumir. Note que em geral o domínio e a imagem são intervalos definidos em termos dos tipos de números que já discutimos: naturais, inteiros, racionais, irracionais, reais ou possíveis intervalos dentro destes. Por exemplo, o intervalo <span class="math inline">\((0,1)\)</span> representa o conjunto dos números reais entre <span class="math inline">\(0\)</span> e <span class="math inline">\(1\)</span>, sendo que ambos <span class="math inline">\(0\)</span> e <span class="math inline">\(1\)</span> não pertencem ao intervalo. Em termos de notação temos o seguinte:</p>
<p><span class="math display">\[
\begin{equation*}
\xrightarrow[\text{Independente}]{x \quad \in \quad D} f(x) \xrightarrow[\text{Dependente}]{y \quad \in \quad I}.
\end{equation*}
\]</span></p>
<p>Como já mencionado, a imagem e o domínio de uma função são intervalos. Neste texto vamos fazer distinção entre intervalos aberto e fechado usando a seguinte notação:</p>
<ol type="1">
<li>Intervalo aberto <strong>não contém</strong> as extremidades: notação <span class="math inline">\((a,b)\)</span>.</li>
<li>Intervalo fechado <strong>contém</strong> as extremidades: notação <span class="math inline">\([a,b]\)</span>.</li>
</ol>
<p>Em linguagem <code>R</code> podemos definir ou criar uma função de forma muito similar ao que fizemos em termos de notação matemática. A partir deste momento, recomendamos que você escolha o seu editor favorito de <code>R</code> como por exemplo o <a href="https://rstudio.com/">RStudio</a> ou qualquer outro e comece a executar os códigos que serão apresentados no decorrer do texto. Veja a estrutura de uma função em <code>R</code> no Código 1.1.</p>
<p><strong>Código 1.1 </strong>Estrutura de função em <code>R</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>minha_funcao <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="st">'algum processamento com x'</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(y)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>No Código 1.1 definimos uma função chamada de <code>minha_funcao</code>. Esta função recebe uma entrada <code>x</code>, faz algum processamento com <code>x</code>, armazena o resultado deste processamento em um objeto chamado <code>y</code> e retorna o valor de <code>y</code>. Interessante notar que grande parte das linguagens interpretadas como <code>R</code> e <code>python</code> são automaticamente tipificadas. Isso significa que não precisamos definir o tipo de valores que serão as entradas e saídas das nossas funções. Isto está em contraste com outras linguagens como <code>C</code> e <code>C++</code> em que o programador precisa definir o tipo das entradas e das saídas no corpo da função.</p>
<p>Para materializar esta ideia definimos a função <span class="math inline">\(y = x^2\)</span>, ou seja, para cada entrada de <span class="math inline">\(x\)</span> retornamos <span class="math inline">\(y\)</span> que é o quadrado da entrada. Em <code>R</code> temos a seguinte função:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>minha_funcao <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(y)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Criada a função podemos avaliá-la em alguns pontos para ver o seu comportamento. Por exemplo, <span class="math inline">\(f(x = 2)\)</span> significa avaliar a função no ponto <span class="math inline">\(x = 2\)</span>, ou seja, <span class="math inline">\(y = 2^2\)</span> e portanto, <span class="math inline">\(y = 4\)</span>. Usando nossa função <code>R</code> temos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">minha_funcao</span>(<span class="at">x =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<p>Muitas das operações em <code>R</code> são automaticamente vetorizadas, isso significa que podemos aplicar a função em um vetor de números e obter um vetor de resposta. O conceito de vetor será propriamente definido no <a href="../../content/Modulo02/index.html">Capítulo 2</a>. Por enquanto, interprete um vetor como vários números enfileirados de modo que queremos fazer uma operação com cada um de seus elementos. Para definir um vetor de números em <code>R</code> usamos o operador de concatenação <code>c()</code>. Veja o seguinte exemplo,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>x_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">minha_funcao</span>(<span class="at">x =</span> x_vec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9 4 1 0 1 4 9</code></pre>
</div>
</div>
<p>O objeto <code>x_vec</code> é um vetor com os números inteiros entre <span class="math inline">\(-3\)</span> até <span class="math inline">\(3\)</span> e aplicamos nossa função a cada um destes números. Note que a saída é um outro vetor de mesmo tamanho do vetor de entrada com a função aplicada a cada um de seus elementos. Neste ponto é interessante falar sobre alguns tipos de objetos em <code>R</code>. Em termos de números temos basicamente os inteiros <code>integer</code> e os reais <code>double</code>. Em geral, se não especificada outra opção, qualquer número vai ser tipificado como <code>double</code>. Para verificar o tipo de um objeto em <code>R</code> usamos a função <code>typeof()</code>. Por exemplo,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Define um double (real)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1811</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Define um inteiro explicitamente, note o "L" após o número</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1811</span>L</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
</div>
<p>Outra questão importante é o tipo do objeto de saída.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Entrada inteiro</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">minha_funcao</span>( <span class="at">x =</span> <span class="dv">2</span>L)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Entrada double</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">minha_funcao</span>( <span class="at">x =</span> <span class="dv">2</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
</div>
<p>Quando colocados juntos em um vetor valores <code>integer</code> e <code>double</code> o <code>integer</code> será convertido para <code>double</code> e o objeto gerado terá classe <code>numeric</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>x_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>L,  <span class="dv">2</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x_vec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x_vec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
<p>Uma função <span class="math inline">\(y = f(x)\)</span> é dita ser de apenas uma variável e pode ser facilmente desenhada em um espaço bidimensional, o chamado <span class="math inline">\(\Re^2\)</span>. O espaço <span class="math inline">\(\Re^2\)</span> é formado por todas as duplas ordenadas de valores reais. A variável dependente <span class="math inline">\(y\)</span> é representada no eixo vertical e a variável dependente <span class="math inline">\(x\)</span> é representada no eixo horizontal. Em <code>R</code> a função <code>plot()</code> é a forma mais simples de desenhar o gráfico de uma função. O código abaixo ilustra como desenhar o gráfico da função <span class="math inline">\(y = x^2\)</span> avaliada nos inteiros entre <span class="math inline">\(-5\)</span> e <span class="math inline">\(5\)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Criando a função</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>minha_funcao <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(y)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Valores que a função será avaliada</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>x_vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="sc">-</span><span class="dv">4</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Avaliando a função em cada ponto</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">minha_funcao</span>(<span class="at">x =</span> x_vec)</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="do">## Gráfico da função</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(y <span class="sc">~</span> x_vec, <span class="at">xlab =</span> <span class="st">"x"</span>, <span class="at">ylab =</span> <span class="fu">expression</span>(<span class="at">y =</span> <span class="fu">f</span>(x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-2-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1.2: Exemplo de gráfico de função avaliada em alguns pontos.
</figcaption>
</figure>
</div>
</div>
</div>
<p>É comum desenhar o gráfico da função unindo os pontos para dar a noção de continuidade (conceito a ser explicado adiante).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(y <span class="sc">~</span> x_vec, <span class="at">xlab =</span> <span class="st">"x"</span>, <span class="at">ylab =</span> <span class="fu">expression</span>(<span class="at">y =</span> <span class="fu">f</span>(x)), <span class="at">type =</span> <span class="st">"l"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="index_files/figure-html/fig-3-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1.3: Exemplo de gráfico de função unindo os pontos de avaliação.
</figcaption>
</figure>
</div>
</div>
</div>
<p>No contexto de ciência de dados precisamos de funções um pouco mais elaboradas, o que nos leva as <strong>funções parametrizadas</strong> e a definição de <strong>parâmetro</strong>.</p>
<div class="callout callout-style-simple callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<strong>Definição 1.2</strong>
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Parâmetro</strong> é uma quantidade conhecida que indexa ou parametriza uma determinada função.</p>
</div>
</div>
<p>Em geral, os parâmetros mudam o comportamento da função e descrevem quantidades de interesse. Nós vamos usar a notação: <span class="math inline">\(y = f(x; \theta)\)</span>, onde <span class="math inline">\(\theta\)</span> denota o parâmetro. O conjunto de valores que <span class="math inline">\(\theta\)</span> pode assumir é chamado de espaço paramétrico e denotado por <span class="math inline">\(\Theta\)</span>. Considere a seguinte função parametrizada <span class="math inline">\(y = (x - \theta)^2\)</span> cuja versão em <code>R</code> é dada abaixo.</p>
<div class="sourceCode" id="cb21">
<pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="CDI.html#cb21-1" aria-hidden="true" tabindex="-1">fx <span class="ot">= <span class="cf">function(x, theta) {
<span id="cb21-2"></span></span></span></a><a href="CDI.html#cb21-2" aria-hidden="true" tabindex="-1">  out <span class="ot">&lt;- (x <span class="sc">- theta)<span class="sc">^<span class="dv">2
<span id="cb21-3"></span></span></span></span></span></a><a href="CDI.html#cb21-3" aria-hidden="true" tabindex="-1">  <span class="fu">return(out)
<span id="cb21-4"></span></span></a><a href="CDI.html#cb21-4" aria-hidden="true" tabindex="-1">}`</a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb21-4" aria-hidden="true" tabindex="-1">
::: Para avaliar esta função precisamos de <span class="math inline">\(x\)</span> e também do valor do parâmetro <span class="math inline">\(\theta\)</span>. A Figura </a><a href="CDI.html#fig:fcparametro">1.4 mostra o gráfico da função <span class="math inline">\(y = (x - \theta)^2\)</span> avaliada nos pontos <span class="math inline">\(x = (-5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5)\)</span> e <span class="math inline">\(\theta = (-2, 0, 2)\)</span>. É importante notar que, em geral, o parâmetro de uma função será uma quantidade conhecida e fixa, ou seja, não será modificado quando a entrada <span class="math inline">\(x\)</span> for alterada.
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:fcparametro">
<span style="display:block;" id="fig:fcparametro"> <img src="MDSRbook_files/figure-html/fcparametro-1.png" alt="Exemplo de função parametrizada." width="576">
<p class="caption">
</p><p>Figura 1.4: Exemplo de função parametrizada.</p>
::: Na Figura </span></a><a href="CDI.html#fig:fcparametro">1.4 fica claro que o valor do parâmetro <span class="math inline">\(\theta\)</span> controla o ponto onde a função <span class="math inline">\(f(x; \theta)\)</span> toca o eixo horizontal, ou seja, este parâmetro controla um aspecto importante da função. De forma mais geral uma função pode ter vários parâmetros. O ideal é que cada parâmetro controle um aspecto da função. No entanto, na prática isso nem sempre é possível. Em termos de notação usamos <span class="math inline">\(f(x; \boldsymbol{\theta})\)</span> onde <span class="math inline">\(\boldsymbol{\theta} = (\theta_1, \theta_2, \ldots, \theta_p)^{\top}\)</span> em que <span class="math inline">\(p\)</span> denota o número de elementos no vetor de parâmetros <span class="math inline">\(\boldsymbol{\theta}\)</span>. A notação utilizada corresponde ao transposto do vetor de parâmetros e ficará clara no Capítulo (AM). Considere a seguinte função de dois parâmetros <span class="math display">\[y = \frac{(x - \theta_1)^2 }{\theta_2},\]</span> cujo gráfico é apresentado na Figura </a><a href="CDI.html#fig:fcvetor">1.5 para algumas combinações dos parâmetros <span class="math inline">\(\theta_1\)</span> e <span class="math inline">\(\theta_2\)</span>. Para desenhar o gráfico da Figura </a><a href="CDI.html#fig:fcvetor">1.5 precisamos primeiro criar a função em <code>R</code>. Note que agora temos dois parâmetros, assim
</a><div class="sourceCode" id="cb22"><a href="CDI.html#fig:fcvetor">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#fig:fcvetor"><code class="sourceCode r"><span id="cb22-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb22-1" aria-hidden="true" tabindex="-1">fx <span class="ot">= <span class="cf">function(x, theta) {
<span id="cb22-2"></span></span></span></a><a href="CDI.html#cb22-2" aria-hidden="true" tabindex="-1">  out <span class="ot">&lt;- ((x <span class="sc">- theta[<span class="dv">1])<span class="sc">^<span class="dv">2)<span class="sc">/theta[<span class="dv">2]
<span id="cb22-3"></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb22-3" aria-hidden="true" tabindex="-1">  <span class="fu">return(out)
<span id="cb22-4"></span></span></a><a href="CDI.html#cb22-4" aria-hidden="true" tabindex="-1">}`</a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb22-4" aria-hidden="true" tabindex="-1">
::: define a função onde o objeto <code>theta</code> é um vetor de tamanho <span class="math inline">\(2\)</span>. É importante notar que para acessar os elementos de um vetor em <code>R</code> usamos o nome do vetor acompanhado de <code>[posicao]</code> onde <code>posicao</code> é um número inteiro indicando a posição do elemento de interesse no vetor. O código abaixo avalia a função em alguns pontos para diferentes combinações dos parâmetros e desenha os gráficos.
</a><div class="sourceCode" id="cb23"><a href="CDI.html#cb22-4" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb22-4" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb23-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb23-1" aria-hidden="true" tabindex="-1"><span class="fu">par(<span class="at">mar=<span class="fu">c(<span class="fl">2.6, <span class="fl">2.8, <span class="fl">1.2, <span class="fl">0.5), <span class="at">mgp = <span class="fu">c(<span class="fl">1.6, <span class="fl">0.6, <span class="dv">0))
<span id="cb23-2"></span></span></span></span></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb23-2" aria-hidden="true" tabindex="-1">x <span class="ot">&lt;- <span class="fu">c(<span class="sc">-<span class="dv">5,<span class="sc">-<span class="dv">4,<span class="sc">-<span class="dv">3,<span class="sc">-<span class="dv">2,<span class="sc">-<span class="dv">1,<span class="dv">0,<span class="dv">1,<span class="dv">2,<span class="dv">3,<span class="dv">4,<span class="dv">5)
<span id="cb23-3"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb23-3" aria-hidden="true" tabindex="-1"><span class="fu">par(<span class="at">mfrow = <span class="fu">c(<span class="dv">1,<span class="dv">3))
<span id="cb23-4"></span></span></span></span></span></span></a><a href="CDI.html#cb23-4" aria-hidden="true" tabindex="-1">tt <span class="ot">&lt;- <span class="fu">c(<span class="fu">expression(theta[<span class="dv">1] <span class="sc">== <span class="sc">-<span class="dv">2), <span class="fu">expression(theta[<span class="dv">1] <span class="sc">== <span class="dv">0), 
<span id="cb23-5"></span></span></span></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb23-5" aria-hidden="true" tabindex="-1">        <span class="fu">expression(theta[<span class="dv">1] <span class="sc">== <span class="dv">2))
<span id="cb23-6"></span></span></span></span></span></a><a href="CDI.html#cb23-6" aria-hidden="true" tabindex="-1">theta1 <span class="ot">&lt;- <span class="fu">c(<span class="sc">-<span class="dv">2,<span class="dv">0,<span class="dv">2)
<span id="cb23-7"></span></span></span></span></span></span></span></a><a href="CDI.html#cb23-7" aria-hidden="true" tabindex="-1"><span class="cf">for(i <span class="cf">in <span class="dv">1<span class="sc">:<span class="dv">3) {
<span id="cb23-8"></span></span></span></span></span></span></a><a href="CDI.html#cb23-8" aria-hidden="true" tabindex="-1"><span class="fu">plot(<span class="fu">fx(x, <span class="at">theta = <span class="fu">c(theta1[i], <span class="dv">1)) <span class="sc">~ x, <span class="at">xlab = <span class="st">"x", 
<span id="cb23-9"></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb23-9" aria-hidden="true" tabindex="-1">     <span class="at">ylab = <span class="fu">expression(<span class="at">y = <span class="fu">f(x,theta)), 
<span id="cb23-10"></span></span></span></span></span></a><a href="CDI.html#cb23-10" aria-hidden="true" tabindex="-1">     <span class="at">type = <span class="st">"o", <span class="at">ylim = <span class="fu">c(<span class="dv">0,<span class="dv">50), <span class="at">main = tt[i])
<span id="cb23-11"></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb23-11" aria-hidden="true" tabindex="-1"><span class="fu">points(x, <span class="fu">fx(x, <span class="at">theta = <span class="fu">c(theta1[i], <span class="fl">0.75)), <span class="at">col = <span class="st">"red")
<span id="cb23-12"></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb23-12" aria-hidden="true" tabindex="-1"><span class="fu">lines(x, <span class="fu">fx(x, <span class="at">theta = <span class="fu">c(theta1[i], <span class="fl">0.75)), <span class="at">col = <span class="st">"red")
<span id="cb23-13"></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb23-13" aria-hidden="true" tabindex="-1"><span class="fu">points(x, <span class="fu">fx(x, <span class="at">theta = <span class="fu">c(theta1[i], <span class="fl">0.5)), <span class="at">col = <span class="st">"blue")
<span id="cb23-14"></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb23-14" aria-hidden="true" tabindex="-1"><span class="fu">lines(x, <span class="fu">fx(x, <span class="at">theta = <span class="fu">c(theta1[i], <span class="fl">0.5)), <span class="at">col = <span class="st">"blue")
<span id="cb23-15"></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb23-15" aria-hidden="true" tabindex="-1"><span class="fu">legend(<span class="st">"top", <span class="at">legend = <span class="fu">c(<span class="fu">expression(theta[<span class="dv">2] <span class="sc">== <span class="dv">1), 
<span id="cb23-16"></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb23-16" aria-hidden="true" tabindex="-1">                  <span class="fu">expression(theta[<span class="dv">2] <span class="sc">== <span class="fl">0.75), 
<span id="cb23-17"></span></span></span></span></span></a><a href="CDI.html#cb23-17" aria-hidden="true" tabindex="-1">                  <span class="fu">expression(theta[<span class="dv">2] <span class="sc">== <span class="fl">0.5)),
<span id="cb23-18"></span></span></span></span></span></a><a href="CDI.html#cb23-18" aria-hidden="true" tabindex="-1">       <span class="at">col = <span class="fu">c(<span class="st">"black",<span class="st">"red",<span class="st">"blue"), <span class="at">pch = <span class="dv">1 , <span class="at">lty = <span class="dv">1)
<span id="cb23-19"></span></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb23-19" aria-hidden="true" tabindex="-1">}`</a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb23-19" aria-hidden="true" tabindex="-1">
:::
</a><div class="figure" style="text-align: center"><a href="CDI.html#cb23-19" aria-hidden="true" tabindex="-1">
<span style="display:block;" id="fig:fcvetor"> <img src="MDSRbook_files/figure-html/fcvetor-1.png" alt="Exemplos de gráficos de funções com dois parâmetros." width="864">
<p class="caption">
</p><p>Figura 1.5: Exemplos de gráficos de funções com dois parâmetros.</p>
::: Note que enquanto o parâmetro <span class="math inline">\(\theta_1\)</span> continua controlando onde a função toca o eixo horizontal, o parâmetro <span class="math inline">\(\theta_2\)</span> controla a abertura da curva definida por <span class="math inline">\(f(x; \boldsymbol{\theta})\)</span>. Assim, valores maiores de <span class="math inline">\(\theta_2\)</span> representam curvas mais abertas. Outros aspectos importantes do gráfico de funções são a declividade e o intercepto. A <strong>declividade</strong> mede a variação <span class="math inline">\(\Delta\)</span> no valor de <span class="math inline">\(y\)</span> dividido pela variação no valor de <span class="math inline">\(x\)</span>, ou seja, declividade é <span class="math inline">\(\frac{\Delta y}{\Delta x}\)</span>. A declividade do desenho de uma função pode ser constante, positiva ou negativa. Lembre-se que gráficos são lidos da esquerda para a direita. O <strong>intercepto vertical</strong> é o ponto no qual o gráfico cruza o eixo vertical e é obtido quando <span class="math inline">\(x = 0\)</span>. A Figura </span></a><a href="CDI.html#fig:exemplo1">1.6 mostra exemplos de retas com declividade constante (A), positiva (B) e negativa (C). Procure identificar onde estão os interceptos.
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:exemplo1">
<span style="display:block;" id="fig:exemplo1"> <img src="MDSRbook_files/figure-html/exemplo1-1.png" alt="Exemplos de declividade." width="864">
<p class="caption">
</p><p>Figura 1.6: Exemplos de declividade.</p>
:::
</span></a><div id="funções-com-duas-ou-mais-variáveis-independentes" class="section level3" number="1.1.1"><a href="CDI.html#fig:exemplo1">
<h3 class="anchored">
<span class="header-section-number">1.1.1 Funções com duas ou mais variáveis independentes
</span></h3>
</a><p><a href="CDI.html#fig:exemplo1">Até aqui discutimos funções com apenas uma variável de entrada. No entanto, em termos práticos precisamos de funções com um número arbitrário de variáveis independentes. Lembre do exemplo da companhia seguradora, onde um conjunto de <span class="math inline">\(p\)</span> perguntas ou variáveis independentes serão combinadas por um <strong>modelo</strong> para fornecer o preço que deve ser pago pelo seguro. Em termos de notação vamos utilizar <span class="math inline">\(\boldsymbol{x} = (x_1, \ldots, x_p)^{\top}\)</span> para representar um vetor linha transposto (vetor coluna). Novamente os conceitos de vetor e de transposto serão formalmente definidos no Capítulo </a><a href="AM.html#AM">2, onde vamos falar de Álgebra Matricial.</a></p><a href="AM.html#AM">
<div class="callout callout-style-simple callout-important">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><span id="def:funcaomulti" class="definition"><strong>Definição 1.3 </strong>Uma <strong>função</strong> escrita como <span class="math inline">\(y = f(\boldsymbol{x})\)</span> associa um número <span class="math inline">\(y\)</span> a cada vetor de entrada <span class="math inline">\(\boldsymbol{x}\)</span>.</span></p>
</div>
</div>
</div>
</a><p><a href="AM.html#AM">Note que a Definição </a><a href="CDI.html#def:funcaomulti">1.3 é ligeiramente diferente da Definição </a><a href="CDI.html#def:funcao">1.1, onde agora um vetor de entradas resultará em apenas um número de saída. Cuidado também para não confundir a forma como o <code>R</code> vetoriza as funções de uma única variável independente, com funções de múltiplas variáveis independente. Vamos ver um exemplo para esclarecer e ilustrar as diferenças.</a></p><a href="CDI.html#def:funcao">
</a><div class="example"><a href="CDI.html#def:funcao">
<p><span id="exm:exfcbiv" class="example"><strong>Example 1.1 </strong>Considere a função de duas variáveis <span class="math inline">\(x_1\)</span> e <span class="math inline">\(x_2\)</span> definida por <span class="math display">\[f(x_1, x_2) = \sqrt{25 - x_1^2 - x_2^2},\]</span> avalie a função nos pontos <span class="math inline">\(\boldsymbol{x} = (0, 0)\)</span>, <span class="math inline">\(\boldsymbol{x} = (3, 0)\)</span> e desenhe seu gráfico. ::: Primeiro, é importante verificar que o domínio de <span class="math inline">\(f(\boldsymbol{x})\)</span> é o conjunto de todas as duplas ordenadas <span class="math inline">\((x_1, x_2)\)</span> tal que <span class="math inline">\(25 - x_1^2 - x_2^2 \geq 0\)</span>. Uma vez que a raiz quadrada de números negativos não existe. Vamos implementar esta função em <code>R</code> para avaliar seu valor nos pontos pedidos.</span></p>
<span id="lem:fvetor" class="lemma"><strong>Código 1.2 </strong>Exemplo de função bidimensional (entrada vetor). :::
</span></a><div class="sourceCode" id="cb24"><a href="CDI.html#def:funcao">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#def:funcao"><code class="sourceCode r"><span id="cb24-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb24-1" aria-hidden="true" tabindex="-1">fx1x2 <span class="ot">&lt;- <span class="cf">function(x) {
<span id="cb24-2"></span></span></span></a><a href="CDI.html#cb24-2" aria-hidden="true" tabindex="-1">  y <span class="ot">= <span class="fu">sqrt(<span class="dv">25 <span class="sc">- x[<span class="dv">1]<span class="sc">^<span class="dv">2 <span class="sc">- x[<span class="dv">2]<span class="sc">^<span class="dv">2)
<span id="cb24-3"></span></span></span></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb24-3" aria-hidden="true" tabindex="-1">  <span class="fu">return(y)
<span id="cb24-4"></span></span></a><a href="CDI.html#cb24-4" aria-hidden="true" tabindex="-1">}`</a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb24-4" aria-hidden="true" tabindex="-1">
::: O primeiro ponto a notar é que agora precisamos entrar com um vetor de tamanho 2. Vamos avaliar a função nos pontos pedidos, ou seja, <span class="math display">\[y = \sqrt{25 - 0^2 - 0^2} = 5 \quad \text{e} \quad y = \sqrt{25 - 3^2 - 0^2} = 4.\]</span> Novamente, em <code>R</code> temos
</a><div class="sourceCode" id="cb25"><a href="CDI.html#cb24-4" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb24-4" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb25-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb25-1" aria-hidden="true" tabindex="-1">entrada1 <span class="ot">&lt;- <span class="fu">c(<span class="dv">0, <span class="dv">0)
<span id="cb25-2"></span></span></span></span></span></a><a href="CDI.html#cb25-2" aria-hidden="true" tabindex="-1">entrada2 <span class="ot">&lt;- <span class="fu">c(<span class="dv">3, <span class="dv">0)
<span id="cb25-3"></span></span></span></span></span></a><a href="CDI.html#cb25-3" aria-hidden="true" tabindex="-1"><span class="fu">fx1x2(<span class="at">x = entrada1)`</span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb25-3" aria-hidden="true" tabindex="-1">
:::
<pre>`## [1] 5`</pre>
</a><div class="sourceCode" id="cb27"><a href="CDI.html#cb25-3" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb25-3" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb27-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb27-1" aria-hidden="true" tabindex="-1"><span class="fu">fx1x2(<span class="at">x = entrada2)`</span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb27-1" aria-hidden="true" tabindex="-1">
:::
<pre>`## [1] 4`</pre>
Lembre-se que no caso de funções de uma única variável de entrada o <code>R</code> automaticamente vetorizava a operação, ou seja, aplicava a função a cada ponto do vetor de entrada. Vejamos o que acontece caso a mesma estratégia seja usada em nossa função com duas variáveis de entrada.
</a><div class="sourceCode" id="cb29"><a href="CDI.html#cb27-1" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb27-1" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb29-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb29-1" aria-hidden="true" tabindex="-1">x <span class="ot">&lt;- <span class="fu">c(entrada1, entrada2)
<span id="cb29-2"></span></span></span></a><a href="CDI.html#cb29-2" aria-hidden="true" tabindex="-1"><span class="fu">fx1x2(<span class="at">x = x)`</span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb29-2" aria-hidden="true" tabindex="-1">
:::
<pre>`## [1] 5`</pre>
Pela forma como a função <code>fx1x2()</code> captura o vetor de entrada pelas suas posições, todos os valores além da posição <span class="math inline">\(2\)</span> foram ignorados pela <code>fx1x2()</code>. Neste caso, uma das formas de avaliar a função em mais de um ponto é usar uma instrução <code>for</code> percorrendo uma matriz de entradas por linha.
</a><div class="sourceCode" id="cb31"><a href="CDI.html#cb29-2" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb29-2" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb31-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb31-1" aria-hidden="true" tabindex="-1">entrada <span class="ot">&lt;- <span class="fu">matrix(<span class="fu">c(entrada1, entrada2), <span class="at">ncol = <span class="dv">2, <span class="at">nrow = <span class="dv">2, <span class="at">byrow = <span class="cn">TRUE)
<span id="cb31-2"></span></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb31-2" aria-hidden="true" tabindex="-1">entrada`</a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb31-2" aria-hidden="true" tabindex="-1">
:::
<pre>`##      [,1] [,2]
## [1,]    0    0
## [2,]    3    0`</pre>
</a><div class="sourceCode" id="cb33"><a href="CDI.html#cb31-2" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb31-2" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb33-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb33-1" aria-hidden="true" tabindex="-1">saida <span class="ot">&lt;- <span class="fu">c()
<span id="cb33-2"></span></span></span></a><a href="CDI.html#cb33-2" aria-hidden="true" tabindex="-1"><span class="cf">for(i <span class="cf">in <span class="dv">1<span class="sc">:<span class="dv">2) {
<span id="cb33-3"></span></span></span></span></span></span></a><a href="CDI.html#cb33-3" aria-hidden="true" tabindex="-1">  saida[i] <span class="ot">&lt;- <span class="fu">fx1x2(entrada[i,])
<span id="cb33-4"></span></span></span></a><a href="CDI.html#cb33-4" aria-hidden="true" tabindex="-1">}
<span id="cb33-5"></span></a><a href="CDI.html#cb33-5" aria-hidden="true" tabindex="-1">saida`</a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb33-5" aria-hidden="true" tabindex="-1">
:::
<pre>`## [1] 5 4`</pre>
Não se preocupe com a sintaxe <code>R</code> neste momento. Apenas note que para obter um valor de saída foi necessário combinar dois valores de entrada. Desenhar o gráfico de uma função com mais de uma entrada é uma tarefa mais complicada do que no caso de uma única variável de entrada. Note que agora o gráfico da função é o conjunto das triplas ordenadas <span class="math inline">\((y, x_1, x_2)\)</span> que satisfazem a função. Neste caso estamos no espaço <span class="math inline">\(\Re^3\)</span>. Para desenhar o gráfico da função do exemplo </a><a href="CDI.html#exm:exfcbiv">1.1 precisamos primeiro montar uma grade de valores combinando um conjunto de valores para <span class="math inline">\(x_1\)</span> com um conjunto de valores para <span class="math inline">\(x_2\)</span>. Este processo é ilustrado da Figura </a><a href="CDI.html#fig:fcbid">1.7 (A). O segundo passo é avaliar a função em cada um dos pontos criados, processo ilustrado na Figura </a><a href="CDI.html#fig:fcbid">1.7 (B). Note que em alguns casos a função retornou <code>NaN</code> isso significa que a função não tem um valor associado naquele ponto. Neste caso estamos avaliando a função fora do seu domínio. O último passo é encontrar uma forma de representar o valor da função no gráfico. A forma mais popular é representar o valor usando uma paleta de cores, conforme ilustrado na Figura </a><a href="CDI.html#fig:fcbid">1.7 (C).
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:fcbid">
<span style="display:block;" id="fig:fcbid"> <img src="MDSRbook_files/figure-html/fcbid-1.png" alt="Passo-a-passo para desenhar uma função de duas variáveis independentes." width="864">
<p class="caption">
</p><p>Figura 1.7: Passo-a-passo para desenhar uma função de duas variáveis independentes.</p>
::: Nos gráficos apresentados na Figura </span></a><a href="CDI.html#fig:fcbid">1.7 utilizamos uma grade com apenas <span class="math inline">\(25\)</span> valores, o que resultou em um representação grosseira da função. Porém, podemos aumentar essa grade melhorando assim a representação da função, conforme apresentado na Figura </a><a href="CDI.html#fig:fcbid2">1.8, onde usamos uma grade com <span class="math inline">\(2500\)</span> valores. É usual também incluir as chamadas “curvas de nível,” que são linhas que mostram onde a função assume os mesmos valores.
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:fcbid2">
<span style="display:block;" id="fig:fcbid2"> <img src="MDSRbook_files/figure-html/fcbid2-1.png" alt="Ilustração do gráfico de uma função de duas variáveis de entrada." width="480">
<p class="caption">
</p><p>Figura 1.8: Ilustração do gráfico de uma função de duas variáveis de entrada.</p>
</span></a><p><a href="CDI.html#fig:fcbid2">::: Para funções com mais de duas variáveis de entrada não temos uma forma simples de representação gráfica. O usual é fixar um conjunto de entradas e desenhar o gráfico da função na direção das variáveis não fixadas, usando os gráficos vistos para funções de uma ou duas entradas. Por fim, funções com duas ou mais variáveis independentes também podem ser parametrizadas de forma análoga à forma descrita para funções de uma variável independente, conforme a Definição </a><a href="CDI.html#def:funcaomultiparam">1.4.</a></p><a href="CDI.html#def:funcaomultiparam">
<div class="callout callout-style-simple callout-important">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><span id="def:funcaomultiparam" class="definition"><strong>Definição 1.4 </strong>Uma <strong>função</strong> escrita como <span class="math inline">\(y = f(\boldsymbol{x};\boldsymbol{\theta})\)</span> associa um número <span class="math inline">\(y\)</span> a cada vetor de entrada <span class="math inline">\(\boldsymbol{x}\)</span> e <span class="math inline">\(\boldsymbol{\theta}\)</span> denota um vetor de parâmetros conhecidos.</span></p>
</div>
</div>
</div>
:::
</a><div id="FE" class="section level3" number="1.1.2"><a href="CDI.html#def:funcaomultiparam">
<h3 class="anchored">
<span class="header-section-number">1.1.2 Funções especiais
</span></h3>
<p>Dada a complexidade das aplicações em ciência de dados é comum se deparar com funções mais elaboradas. Nesta subseção vamos apresentar algumas das funções mais comuns em ciência de dados.</p>
<div class="callout callout-style-simple callout-important">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><span id="def:polinomio" class="definition"><strong>Definição 1.5 </strong>Funções polinomiais são funções do tipo <span class="math display">\[y = \beta_0 + \beta_1 x + \beta_2 x^2 + \ldots \beta_p x^p.\]</span></span></p>
</div>
</div>
</div>
Por exemplo, as <strong>funções polinomiais</strong> de grau até três são apresentadas abaixo:
<ul>
1.Função linear: <span class="math inline">\(y = \beta_0 + \beta_1 x\)</span>. 1.Função quadrática: <span class="math inline">\(y = \beta_0 + \beta_1 x + \beta_2 x^2\)</span>. 1.Função cúbica: <span class="math inline">\(y = \beta_0 + \beta_1 x + \beta_2 x^2 + \beta_3 x^3\)</span>.
</ul>
Seus respectivos gráficos são apresentados na Figura </a><a href="CDI.html#fig:fcpoli">1.9.
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:fcpoli">
<span style="display:block;" id="fig:fcpoli"> <img src="MDSRbook_files/figure-html/fcpoli-1.png" alt="Exemplos de gráficos de funções polinomiais." width="1152">
<p class="caption">
</p><p>Figura 1.9: Exemplos de gráficos de funções polinomiais.</p>
::: Alguns pontos importantes a notar:
<ul>
1.Em todas as funções os parâmetros são representados pela letra <span class="math inline">\(\beta\)</span> associada a um índice para distinguir entre os coeficientes. 1.O gráfico da função linear é sempre uma reta. 1.O gráfico de uma função quadrática é uma parábola aberta para cima se <span class="math inline">\(\beta_2 &amp;gt; 0\)</span> e para baixo se <span class="math inline">\(\beta_2 &amp;lt; 0\)</span>. 1.O intercepto é dado por <span class="math inline">\(\beta_0\)</span> em todas as funções. 1.Nas funções lineares o parâmetro <span class="math inline">\(\beta_1\)</span> representa a declividade da linha. 1.A função cúbica pode ser simplificada para quadrática fazendo <span class="math inline">\(\beta_3 = 0\)</span> e para linear fazendo ambos <span class="math inline">\(\beta_3 = \beta_2 = 0\)</span>.
</ul>
<p>Em <code>R</code> podemos facilmente escrever as funções polinomiais explicitamente ou usar a função <code>poly()</code>. Veja <code>?poly</code> para exemplos de como declarar polinômios em <code>R</code> usando bases ortogonais para evitar problemas numéricos.</p>
<div class="callout callout-style-simple callout-important">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><span id="def:potencia" class="definition"><strong>Definição 1.6 </strong>Funções do <strong>tipo potência</strong> são funções da forma <span class="math display">\[y = x^a,\]</span> onde <span class="math inline">\(y\)</span> é a variável dependente, <span class="math inline">\(x\)</span> a variável independente e <span class="math inline">\(a\)</span> um expoente constante (parâmetro).</span></p>
</div>
</div>
</div>
Por definição, <span class="math inline">\(x^0 = 1\)</span>, ou seja, qualquer número elevado a <span class="math inline">\(0\)</span> é igual a <span class="math inline">\(1\)</span>. Note que um número sem expoente está elevado a <span class="math inline">\(1\)</span>. As propriedades mais importantes das funções potência são:
</span></a><ol style="list-style-type: decimal"><a href="CDI.html#fig:fcpoli">
<p>1.<span class="math inline">\(x^a (x^c) = x^{a+c}\)</span>;<br></p>
<p>1.<span class="math inline">\((x^a)^c = x^{ac}\)</span>; 1.<span class="math inline">\((xz)^a = x^a (z^a)\)</span>; 1.<span class="math inline">\(\left ( \frac{x}{z} \right )^c = \frac{x^c}{z^c}\)</span>; 1.<span class="math inline">\(\frac{1}{x^a} = x^{-a}\)</span>; 1.<span class="math inline">\(\frac{x^a}{x^c} = x^{a-c}\)</span>; 1.<span class="math inline">\(\sqrt{x} = x^{1/2}\)</span>; 1.<span class="math inline">\(\sqrt[a]{x} = x^{1/a}\)</span>; 1.<span class="math inline">\(\sqrt[c]{x^a} = x^{a/c}.\)</span></p>
<div class="callout callout-style-simple callout-important">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><span id="def:expo" class="definition"><strong>Definição 1.7 Funções exponenciais</strong> são funções compostas de uma base <span class="math inline">\(a\)</span> constante e de um expoente variável, ou seja, <span class="math display">\[y = a^x,\]</span> onde <span class="math inline">\(a\)</span> é maior que zero e diferente de <span class="math inline">\(1\)</span>. Note que novamente, temos um exemplo de função parametrizada.</span></p>
</div>
</div>
</div>
<p>Funções exponenciais são usadas para representar taxas constantes de crescimento discreto. Exemplos comuns são os problemas relacionados a juros compostos, descontos e depreciação. Em muitos problemas práticos é comum inserir alguns parâmetros extras para controlar o comportamento de funções exponenciais, por exemplo <span class="math display">\[y = b a^{cx}.\]</span> Uma aplicação simples é calcular o valor futuro de um investimento a taxa de juros constante em um período fixo de tempo. Suponha que você investiu <span class="math inline">\(R\$ 1000,00\)</span> a uma taxa de juros anual de <span class="math inline">\(8\%\)</span> por 10 anos. O valor que você terá ao final do período é de <span class="math inline">\(1000(1 + 0,08)^{10} = 2158,92\)</span>.</p>
<div class="callout callout-style-simple callout-important">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><span id="def:exponatu" class="definition"><strong>Definição 1.8 Funções exponenciais naturais</strong> são funções exponenciais que tem como sua base <span class="math inline">\(e = \lim_{n \to \infty} \left [ 1 + (1/n) \right ]^n = 2,718281828.\)</span></span></p>
</div>
</div>
</div>
As funções exponenciais naturais descrevem taxas constantes de crescimento contínuo ao invés de intervalos discretos. São muito utilizadas para compor distribuições de probabilidade, para descrever taxas de crescimento populacional, entre outros. Note que na Definição </a><a href="CDI.html#def:exponatu">1.8 temos uma notação diferente, <span class="math inline">\(\lim_{n \to \infty}\)</span>, que ainda não foi definida. Esta notação é lida como no limite quando <span class="math inline">\(n\)</span> tende a infinito. A ideia deste novo operador é justamente o que ele sugere, ou seja, o que acontece com a função quando um de seus parâmetros neste caso o <span class="math inline">\(n\)</span> recebe valores muito elevados. Nós vamos ver mais detalhes sobre limites na próxima seção. A seguir são apresentadas algumas propriedades importantes de expoentes naturais:
</a><ol style="list-style-type: decimal"><a href="CDI.html#def:exponatu">
<p>1.<span class="math inline">\(e^0 = 1.\)</span> 1.<span class="math inline">\(e^{1} = e = 2,71828.\)</span> 1.<span class="math inline">\(e^a (e^b) = e^{a+b}.\)</span> 1.<span class="math inline">\((e^a)^b = e^{ab}.\)</span> 1.<span class="math inline">\(\frac{e^{a}}{e^{b}} = e^{a-b}.\)</span></p>
Em <code>R</code> a função exponencial está disponível por meio da função <code>exp()</code>. Veja alguns exemplos
</a><div class="sourceCode" id="cb35"><a href="CDI.html#def:exponatu">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#def:exponatu"><code class="sourceCode r"><span id="cb35-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb35-1" aria-hidden="true" tabindex="-1"><span class="fu">exp(<span class="dv">0)`</span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb35-1" aria-hidden="true" tabindex="-1">
:::
<pre>`## [1] 1`</pre>
</a><div class="sourceCode" id="cb37"><a href="CDI.html#cb35-1" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb35-1" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb37-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb37-1" aria-hidden="true" tabindex="-1"><span class="fu">exp(<span class="dv">1)`</span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb37-1" aria-hidden="true" tabindex="-1">
:::
<pre>`## [1] 2.72`</pre>
</a><div class="sourceCode" id="cb39"><a href="CDI.html#cb37-1" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb37-1" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb39-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb39-1" aria-hidden="true" tabindex="-1"><span class="fu">all.equal(<span class="fu">exp(<span class="dv">5)<span class="sc">*<span class="fu">exp(<span class="dv">10), <span class="fu">exp(<span class="dv">5<span class="sc">+<span class="dv">10))`</span></span></span></span></span></span></span></span></span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb39-1" aria-hidden="true" tabindex="-1">
:::
<pre>`## [1] TRUE`</pre>
<div class="callout callout-style-simple callout-important">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><span id="def:log" class="definition"><strong>Definição 1.9 Funções logarítmicas</strong> ou logaritmo é a potência à qual uma dada base deve ser elevada para se obter um particular número.</span></p>
</div>
</div>
</div>
Logaritmos comuns utilizam a base <span class="math inline">\(10\)</span> e são escritos <span class="math inline">\(\log_{10}\)</span>. Por exemplo, desde que <span class="math inline">\(10^2 = 100\)</span>, <span class="math inline">\(2\)</span> é o <span class="math inline">\(\log\)</span> de <span class="math inline">\(100\)</span>. De maneira similar, para qualquer função exponencial <span class="math inline">\(y = a^x\)</span>, onde <span class="math inline">\(a\)</span> é a base e <span class="math inline">\(x\)</span> o expoente, <span class="math display">\[\log_a y = x\]</span> <span class="math inline">\(x\)</span> é a potência à qual <span class="math inline">\(a\)</span> deve ser elevado, para obter-se <span class="math inline">\(y\)</span>. Para números que não são potências exatas a obtenção dos logaritmos é feita via interpolação. Os logaritmos na base natural <span class="math inline">\(e\)</span> são chamados de <strong>logaritmos naturais</strong> ou <strong>neperianos</strong> e denotados por <span class="math inline">\(\log_e\)</span> ou simplesmente <span class="math inline">\(\ln\)</span>. A formação destes logaritmos é mais complexa e fora do escopo deste material. Porém, para fins de aplicações o <code>R</code> fornece a função <code>log()</code> para obter logaritmos em qualquer base. Algumas relações entre funções logarítmicas e exponenciais.
<ul>
1.Se <span class="math inline">\(\log_{10} y = 2x\)</span>, então <span class="math inline">\(y = 10^{2x}.\)</span> 1.Se <span class="math inline">\(\log_{a} y = xz\)</span>, então <span class="math inline">\(y = a^{xz}.\)</span> 1.Se <span class="math inline">\(\ln y = 5t\)</span>, então <span class="math inline">\(y = e^{5t}.\)</span> 1.Se <span class="math inline">\(y = a^{3x}\)</span>, então <span class="math inline">\(\log_{a} y = 3x.\)</span> 1.Se <span class="math inline">\(y = 10^{6x}\)</span>, então <span class="math inline">\(\log_{10} y = 6x.\)</span> 1.Se <span class="math inline">\(y = e^{t+1}\)</span>, então <span class="math inline">\(\ln y = t + 1.\)</span>
</ul>
Outras funções importantes no contexto de redes neurais artificiais são as seguintes:
<ul>
1.Função sigmóide ou logística: <span class="math inline">\(y = \frac{1}{1+ e^{-x} }\)</span>, onde <span class="math inline">\(I = (0,1)\)</span> e <span class="math inline">\(D = \Re\)</span>; 1.Função tangente hiperbólica: <span class="math inline">\(y = \frac{e^x- e^{-x}}{e^{x} + e^{-x}}\)</span>, onde <span class="math inline">\(I = (-1,1)\)</span> e <span class="math inline">\(D = \Re\)</span>. 1.Função linear retificada (ReLU): <span class="math inline">\(y = \max\{0,x\}\)</span>, onde <span class="math inline">\(I = \Re_{+}\)</span> e <span class="math inline">\(D = \Re\)</span>. 1.Função <em>leaky ReLU</em>: <span class="math inline">\(y = \max\{\alpha x, x\}\)</span>, onde <span class="math inline">\(\alpha\)</span> é uma parâmetro conhecido, <span class="math inline">\(I = \Re\)</span> e <span class="math inline">\(D = \Re\)</span>.
</ul>
Por fim, a Figura </a><a href="CDI.html#fig:todas">1.10 apresenta os gráficos de algumas das funções apresentadas.
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:todas">
<span style="display:block;" id="fig:todas"> <img src="MDSRbook_files/figure-html/todas-1.png" alt="Exemplos de gráficos de funções: (A) potência (a = 2); (B) exponencial natural; (C) Log natural; (D) Log 10; (E) Sigmóide; (F) Tangente hiperbólica; (G) ReLU; (H) Leaky ReLU." width="1152">
<p class="caption">
</p><p>Figura 1.10: Exemplos de gráficos de funções: (A) potência (a = 2); (B) exponencial natural; (C) Log natural; (D) Log 10; (E) Sigmóide; (F) Tangente hiperbólica; (G) ReLU; (H) Leaky ReLU.</p>
::: :::
</span></a><div id="limites-e-continuidade" class="section level3" number="1.1.3"><a href="CDI.html#fig:todas">
<h3 class="anchored">
<span class="header-section-number">1.1.3 Limites e continuidade
</span></h3>
<p>No decorrer da nossa discussão sobre funções nos deparamos com o conceito de limite, por exemplo na definição da função exponencial natural. Nesta subseção vamos definir o conceito de limite e algumas de suas implicações para o estudo de funções.</p>
<div class="callout callout-style-simple callout-important">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><span id="def:limite" class="definition"><strong>Definição 1.10 </strong>Se uma função <span class="math inline">\(f(x)\)</span> se aproxima de um número <span class="math inline">\(L\)</span> conforme <span class="math inline">\(x\)</span> tende a um número <span class="math inline">\(a\)</span> vindo da direita ou da esquerda, dizemos que o limite de <span class="math inline">\(f(x)\)</span> tende a <span class="math inline">\(L\)</span> quando <span class="math inline">\(x\)</span> tende a <span class="math inline">\(a\)</span>.</span></p>
</div>
</div>
</div>
Usaremos a notação <span class="math display">\[\lim_{x \to a } f(x) = f(a) = L.\]</span> O limite pode não existir, mas se existir será único. Vamos ver um exemplo trivial, considere o limite <span class="math display">\[\lim_{x \to 1} (x + 1) = 2.\]</span> Graficamente temos
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:todas">
<span style="display:block;" id="fig:lim1"> <img src="MDSRbook_files/figure-html/lim1-1.png" alt="Ilustração de limite - Trivial." width="576">
<p class="caption">
</p><p>Figura 1.11: Ilustração de limite - Trivial.</p>
::: Considere o limite <span class="math display">\[\lim_{x \to 1} \frac{x^2 - 1}{x-1} = ?\]</span> Note que neste caso tomando <span class="math inline">\(x = 1\)</span> nos leva a uma divisão por zero. Graficamente, temos
</span></a><div class="figure" style="text-align: center"><a href="CDI.html#fig:todas">
<span style="display:block;" id="fig:lim2"> <img src="MDSRbook_files/figure-html/lim2-1.png" alt="Ilustração de limite - Não trivial" width="576">
<p class="caption">
</p><p>Figura 1.12: Ilustração de limite - Não trivial</p>
<p>::: No entanto, podemos manipular a equação de modo que <span class="math display">\[\lim_{x \to 1} \frac{x^2 - 1}{x-1} =  \lim_{x \to 1} \frac{(x+1)(x-1)}{x-1} = \lim_{x \to 1} (x+1) = 2. \]</span> O que nos leva a <strong>definição intuitiva de limite.</strong></p>
<div class="callout callout-style-simple callout-important">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><span id="def:limiteIntuitiva" class="definition"><strong>Definição 1.11 Definição intuitiva</strong> O limite de uma função é o valor que achamos natural para ela em um determinado ponto.</span></p>
</div>
</div>
</div>
<p>Munidos da definição de limite podemos definir o conceito de <strong>funções contínuas</strong>.</p>
::: {.callout-important appearance=“simple”} <span id="def:continuidade" class="definition"><strong>Definição 1.12 </strong>Dizemos que uma função é <strong>contínua</strong> em <span class="math inline">\(x = a\)</span> se três condições forem satisfeitas:
<ul>
1.<span class="math inline">\(f(a)\)</span> existe, 1.<span class="math inline">\(\lim_{x \to a} f(x)\)</span> existe e 1.<span class="math inline">\(\lim_{x \to a} f(x) = f(a).\)</span> :::
</ul>
Continuidade em termos práticos significa que pequenas variações na variável independente levam a pequenas variações na variável dependente. O <strong>Teorema do valor intermediário</strong> no diz que se a função <span class="math inline">\(f(x)\)</span> é contínua no intervalo fechado <span class="math inline">\([a,b]\)</span>, então existe pelo menos um número <span class="math inline">\(c\)</span> em <span class="math inline">\([a,b]\)</span> tal que <span class="math inline">\(f(c) = M\)</span>. A implicação direta desse teorema é que se <span class="math inline">\(f(x)\)</span> é contínua seu gráfico não contém salto vertical. Em geral podemos pensar em funções contínuas como sendo <strong>funções suaves.</strong> Considere a seguinte função não contínua em <span class="math inline">\(0\)</span>, cujo gráfico é apresentado na Figura </span></span></a><a href="CDI.html#fig:naocont">1.13. <span class="math display">\[\lim_{x \to 0} \frac{|x|}{x} = \left\{\begin{matrix}
-1 \quad x &amp;lt; 0 \\
1 \quad x &amp;gt; 0.
\end{matrix}\right. \]</span>
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:naocont">
<span style="display:block;" id="fig:naocont"> <img src="MDSRbook_files/figure-html/naocont-1.png" alt="Ilustração de função não contínua." width="576">
<p class="caption">
</p><p>Figura 1.13: Ilustração de função não contínua.</p>
::: Para finalizar esta subseção, vejamos algumas propriedades importantes de limites que mostram que podemos operar com limites de forma muito similar ao que fazemos com escalares (números). Se <span class="math inline">\(\lim_{x \to p} f(x) = L_1\)</span> e <span class="math inline">\(\lim_{x \to p} g(x) = L_2\)</span>, então
<ul>
1.O limite de uma soma é igual à soma dos limites das parcelas; <span class="math display">\[\lim_{x \to p}[f(x) + g(x)] = \lim_{x \to p}f(x) + \lim_{x \to p} g(x) = L_1 + L_2.\]</span> 1.Uma constante <span class="math inline">\(k\)</span> pode sair do limite sem alterar a solução; <span class="math display">\[\lim_{x \to p} k f(x) = k \lim_{x \to p} f(x) = k L_1.\]</span> 1.O limite de um produto é igual ao produto dos limites; <span class="math display">\[\lim_{x \to p} f(x)g(x) =  \lim_{x \to p} f(x) \lim_{x \to p} g(x) = L_1 L_2.\]</span> 1.O limite da razão é a razão dos limites, desde que o denominador não seja zero; <span class="math display">\[\lim_{x \to p} \frac{f(x)}{g(x)} = \frac{L_1}{L_2},\]</span> desde que <span class="math inline">\(L_2 \neq 0\)</span>.
</ul>
Nesta subseção dois importantes conceitos foram apresentados, o de limite e de continuidade de uma função. Ambos serão úteis para definirmos a derivada de uma função, assunto da próxima seção. ::: :::
</span></a><div id="derivadas" class="section level2" number="1.2"><a href="CDI.html#fig:naocont">
##1.2 Derivadas Como discutido na seção 1.1 o conceito de função é central em diversas técnicas de ciência de dados. Consequentemente, nós precisamos de ferramentas para entender e descrever o comportamento de uma função, bem como, encontrar seus valores de máximo ou mínimo. Tais conceitos serão apresentados nesta seção. A principal ferramenta matemática que nos permitirá analisar o comportamento de uma função é a sua derivada. É interessante notar que apenas com o que foi apresentado sobre funções e o conceito de derivada apresentado nesta seção, seremos capazes de obter um dos modelos mais populares em estatística e aprendizado de máquina: o modelo de regressão linear simples.
</a><div id="definição" class="section level3" number="1.2.1"><a href="CDI.html#fig:naocont">
<h3 class="anchored">
<span class="header-section-number">1.2.1 Definição
</span></h3>
<div class="callout callout-style-simple callout-important">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><span id="def:derivada" class="definition"><strong>Definição 1.13 </strong>Derivada ordinária, derivada primeira, ou simplesmente, derivada de uma função <span class="math inline">\(y = f(x)\)</span> em um ponto <span class="math inline">\(x = a\)</span> no domínio de <span class="math inline">\(f\)</span> é representada por <span class="math inline">\(\frac{dy}{dx}\)</span>, <span class="math inline">\(y^{\prime}\)</span>, <span class="math inline">\(\frac{d f}{fx}\)</span> ou <span class="math inline">\(f^{\prime}(a)\)</span> é o valor <span class="math display">\[
\frac{dy}{dx} |_{x=a} = f^{\prime}(a) = \lim_{h \to 0} \frac{f(a + h) - f(a)}{h}.
\]</span></span></p>
</div>
</div>
</div>
<p>A derivada de uma função nada mais é que a taxa de mudança instantânea em <span class="math inline">\(y\)</span> devido a uma mudança em <span class="math inline">\(x\)</span>. Chamamos de <strong>derivação</strong> o processo de obter a derivada de uma função. Uma importante característica da derivada é que no limite quando <span class="math inline">\(x \to a\)</span> a derivada é a reta tangente ao ponto <span class="math inline">\((a, f(a))\)</span>, cuja equação é dada por <span class="math inline">\(y - f(a) = f^{\prime}(a)(x - a)\)</span>. Vamos fazer um exemplo trivial para ilustrar o conceito de derivada e o processo de <strong>derivação</strong>.</p>
</a><div class="example"><a href="CDI.html#fig:naocont">
<span id="exm:exemplo1derivada" class="example"><strong>Example 1.2 </strong>Obtenha a derivada de <span class="math inline">\(f(x) = - x^2\)</span> usando a definição </span></a><a href="CDI.html#def:derivada">1.13. <span class="math display">\[\begin{align}
f^{\prime}(x) &amp;amp;=&amp;amp; \lim_{h \to 0} \frac{f(x + h) - f(x)}{h} \nonumber \\
&amp;amp;=&amp;amp; \lim_{h \to 0} \frac{- (x + h)^2 - (- x^2)}{h} \nonumber \\
&amp;amp;=&amp;amp; \lim_{h \to 0} \frac{-(x^2 + 2xh + h^2) + x^2}{h} \nonumber \\
&amp;amp;=&amp;amp; \lim_{h \to 0} \frac{-x^2 - 2xh - h^2 + x^2}{h} = \frac{-2xh - h^2}{h} \nonumber \\
&amp;amp;=&amp;amp; \lim_{h \to 0} -2x - h = -2x \nonumber \\
f^{\prime}(x) &amp;amp;=&amp;amp; -2x.
\end{align}\]</span> ::: Apesar da Definição </a><a href="CDI.html#def:derivada">1.13 ser precisa, ela é de pouco uso prático para obter a derivada de uma função qualquer e geralmente leva a um trabalho tedioso. No entanto, o processo de derivação foi sendo aperfeiçoado ao longo do desenvolvimento da disciplina de Cálculo Diferencial e Integral, e atualmente conta-se com uma infinidade de <strong>regras de derivação</strong>. Uma busca rápida na internet com o termo “tabela de derivadas” vai resultar em inúmeras tabelas resumindo as mais úteis regras de derivação. Importante deixar claro que todas essas regras de derivação são obtidas usando a Definição </a><a href="CDI.html#def:derivada">1.13. Além disso, dispomos de diversos softwares de matemática simbólica que nos auxiliam no processo de derivação de uma função qualquer de interesse. Neste livro, serão apresentadas algumas poucas regras básicas de derivação e ilustrações como obter derivadas simbolicamente utilizando o software <code>R</code>. :::
</a><div id="regras-de-derivação" class="section level3" number="1.2.2"><a href="CDI.html#def:derivada">
<h3 class="anchored">
<span class="header-section-number">1.2.2 Regras de derivação
</span></h3>
Para explicar as regras de derivação vamos usar funções auxiliares ou não especificadas <span class="math inline">\(f(x)\)</span> e <span class="math inline">\(g(x)\)</span> e <span class="math inline">\(n \neq 0\)</span> um natural qualquer. São válidas as seguintes regras de derivação:
</a><ol style="list-style-type: decimal"><a href="CDI.html#def:derivada">
<p>1.Se <span class="math inline">\(f(x) = c\)</span> então <span class="math inline">\(f^{\prime}(x) = 0\)</span>. 1.Se <span class="math inline">\(f(x) = x^n\)</span> então <span class="math inline">\(f^{\prime}(x) = n x^{n-1}\)</span>. 1.Se <span class="math inline">\(f(x) = x^{-n}\)</span> então <span class="math inline">\(f^{\prime}(x) = -n x^{-n-1}\)</span>. 1.Se <span class="math inline">\(f(x) = x^{1/n}\)</span> então <span class="math inline">\(f^{\prime}(x) = \frac{1}{n} x^{\frac{1}{n} - 1}\)</span>.</p>
Também podemos obter a derivada de algumas funções especiais.
</a><ol start="5" style="list-style-type: decimal"><a href="CDI.html#def:derivada">
<p>1.Se <span class="math inline">\(f(x) = \exp(x)\)</span> então <span class="math inline">\(f^{\prime}(x) = \exp(x)\)</span>. 1.Se <span class="math inline">\(f(x) = \ln(x)\)</span> então <span class="math inline">\(f^{\prime}(x) = \frac{1}{x}, x &amp;gt; 0\)</span>.</p>
Sendo, <span class="math inline">\(f(x)\)</span> e <span class="math inline">\(g(x)\)</span> deriváveis em <span class="math inline">\(x\)</span> e <span class="math inline">\(c\)</span> uma constante. Então, as funções <span class="math inline">\(f(x) + g(x)\)</span>, <span class="math inline">\(c f(x)\)</span>, <span class="math inline">\(f(x) \cdot g(x)\)</span> e <span class="math inline">\(\frac{f(x)}{g(x)}\)</span> são deriváveis em <span class="math inline">\(x\)</span> e têm-se
</a><ol start="7" style="list-style-type: decimal"><a href="CDI.html#def:derivada">
<p>1.<span class="math inline">\((f + g)^{\prime} = f^{\prime}(x) + g^{\prime}(x)\)</span>. 1.<span class="math inline">\((c f)^{\prime}(x) = c f^{\prime}(x)\)</span>. 1.<span class="math inline">\((f \cdot g)^{\prime}(x) = f^{\prime}(x) g(x) + f(x) g^{\prime}(x)\)</span>. 1.<span class="math inline">\((\frac{f}{g})^{\prime}(x) = \frac{f^{\prime}(x) g(x) - f(x) g^{\prime}(x)}{[g(x)]^2}.\)</span></p>
<p>Vamos fazer alguns exemplos ilustrativos.</p>
</a><div class="example"><a href="CDI.html#def:derivada">
<span id="exm:trivial1derivada" class="example"><strong>Example 1.3 </strong>Obtenha a derivada de <span class="math inline">\(f(x) = 2 + 3x\)</span>. ::: Para obter essa derivada precisamos da derivada de uma constante, neste caso o <span class="math inline">\(2\)</span> que usando a regra 1 é <span class="math inline">\(0\)</span>, e da derivada de <span class="math inline">\(3x\)</span>. Note que o número <span class="math inline">\(3\)</span> está multiplicando a variável <span class="math inline">\(x\)</span>. Assim, pela regra 8 devemos apenas manter a constante e multiplicarmos pela derivada de <span class="math inline">\(x\)</span> que pela regra 2 é <span class="math inline">\(x^0\)</span>. Como todo número elevado a zero é <span class="math inline">\(1\)</span>, temos que <span class="math inline">\(f^{\prime}(x) = 3.\)</span> Podemos facilmente obter o mesmo resultado usando a função <code>D()</code> do software <code>R</code>.
</span></a><div class="sourceCode" id="cb41"><a href="CDI.html#def:derivada">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#def:derivada"><code class="sourceCode r"><span id="cb41-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb41-1" aria-hidden="true" tabindex="-1"><span class="fu">D(<span class="fu">expression(<span class="dv">2 <span class="sc">+ <span class="dv">3<span class="sc">*x), <span class="at">name = <span class="st">"x")`</span></span></span></span></span></span></span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb41-1" aria-hidden="true" tabindex="-1">
:::
<pre>`## [1] 3`</pre>
<p>Para usar a função <code>D()</code> devemos passar explicitamente uma expressão usando a função <code>expression()</code> e indicar em qual variável queremos derivar, no caso <code>x</code>. Vamos fazer mais um exemplo, um pouco mais elaborado.</p>
</a><div class="example"><a href="CDI.html#cb41-1" aria-hidden="true" tabindex="-1">
<span id="exm:trivial2derivada" class="example"><strong>Example 1.4 </strong>Obtenha a derivada de <span class="math inline">\(f(x) = \frac{5x^3}{4x+3}.\)</span> ::: Vamos começar obtendo a derivada usando o <code>R</code>.
</span></a><div class="sourceCode" id="cb43"><a href="CDI.html#cb41-1" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb41-1" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb43-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb43-1" aria-hidden="true" tabindex="-1"><span class="fu">D(<span class="fu">expression( (<span class="dv">5<span class="sc">*x<span class="sc">^<span class="dv">3)<span class="sc">/(<span class="dv">4<span class="sc">*x <span class="sc">+ <span class="dv">3) ), <span class="at">name = <span class="st">"x")`</span></span></span></span></span></span></span></span></span></span></span></span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb43-1" aria-hidden="true" tabindex="-1">
:::
<pre>`## 5 * (3 * x^2)/(4 * x + 3) - (5 * x^3) * 4/(4 * x + 3)^2`</pre>
<p>Primeiro vamos chamar de <span class="math inline">\(f(x) = 5 x^3\)</span> e <span class="math inline">\(g(x) = 4x + 3\)</span>. Agora podemos derivar cada uma destas funções em relação a <span class="math inline">\(x\)</span>, ou seja, <span class="math inline">\(f^{\prime}(x) = 3 \cdot 5 \cdot x^{3-1} = 15 x^2.\)</span> De forma, similar temos <span class="math inline">\(g^{\prime}(x) = 4.\)</span> Agora usando a regra 10, temos <span class="math inline">\((\frac{f}{g})^{\prime}(x) = \frac{(15x^2)(4x+3) - (5x^3) (4) }{(4x + 3)^2} = \frac{15x^2}{(4x+3)} - \frac{20x^3}{(4x + 3)}.\)</span> Interessante notar que os números da expressão resultante da chamada da função <code>D()</code> são também tratados como símbolos, e portanto o <code>R</code> não faz as multiplicações usuais, por exemplo, no numerador o valor <span class="math inline">\(5\)</span> não foi multiplicado pelo <span class="math inline">\(3\)</span> para resultar em <span class="math inline">\(15x^2\)</span>, como fizemos manualmente. Em diversas situações podemos ter o desafio de calcular a derivada de uma função composta por outra função. Para ilustrar essa ideia, suponha que em um algoritmo computacional, <span class="math inline">\(C\)</span> seja o custo total de realizar <span class="math inline">\(s\)</span> tarefas, então <span class="math inline">\(C = f(s).\)</span> Além disso, suponha que <span class="math inline">\(s\)</span> tarefas sejam realizadas durante os <span class="math inline">\(t\)</span> segundos desde o início da execução do algoritmo, então <span class="math inline">\(s = g(t)\)</span>. Se conhecermos a derivada de <span class="math inline">\(s\)</span> em relação a <span class="math inline">\(t\)</span>, ou seja, a taxa de variação do número de tarefas realizadas em <span class="math inline">\(t\)</span> segundos, também podemos determinar a derivada de <span class="math inline">\(C\)</span> em relação a <span class="math inline">\(t\)</span>, que representa a taxa de variação do custo total do algoritmo em um determinado intervalo de tempo. Note que <span class="math inline">\(C\)</span> é implicitamente determinado por <span class="math inline">\(t\)</span> através de <span class="math inline">\(g(t)\)</span>. Para calcular a derivada de <span class="math inline">\(C\)</span> em relação a <span class="math inline">\(t\)</span>, usamos uma regra importante chamada de <strong>regra da cadeia</strong>. Sejam <span class="math inline">\(y = f(x)\)</span> e <span class="math inline">\(x = g(t)\)</span> duas funções deriváveis, com <span class="math inline">\(I \in D\)</span>. A função composta <span class="math inline">\(h(t) = f(g(t))\)</span> é derivável, sendo <span class="math display">\[h^{\prime}(t) = f^{\prime}(g(t))g^{\prime}(t), t \in D_g.\]</span></p>
</a><div class="example"><a href="CDI.html#cb43-1" aria-hidden="true" tabindex="-1">
<span id="exm:trivial3derivada" class="example"><strong>Example 1.5 </strong>Suponha que para um certo algoritmo computacional <span class="math inline">\(C\)</span> seja o custo (em unidades de processamento) total de realizar <span class="math inline">\(s\)</span> tarefas e que <span class="math inline">\(C\)</span> é determinado por <span class="math inline">\(s\)</span> pela seguinte equação <span class="math display">\[C = \frac{1}{4} s^2 + 2s + 1000.\]</span> Além disso, se <span class="math inline">\(s\)</span> tarefas são realizadas durante <span class="math inline">\(t\)</span> segundos desde o início da execução, então <span class="math display">\[s = 3 t^2 + 50 t.\]</span> Determine a taxa de variação do custo total de execução do algoritmo em relação ao tempo, <span class="math inline">\(2\)</span> segundos após o início da execução. ::: Para este exemplo é interessante usarmos uma outra notação de derivada, que deixa explicito quem está sendo derivado em relação a quem. Desejamos, encontrar a derivada de <span class="math inline">\(C\)</span> em relação a <span class="math inline">\(t\)</span>, que vamos denotar por <span class="math inline">\(\frac{d C}{d t}\)</span> quando <span class="math inline">\(t = 2\)</span>. Usando a regra da cadeia, tem-se <span class="math display" id="eq:dCdt">[<span class="math display">\[\begin{equation}
  \frac{d C}{ dt} = \frac{d C}{d s} \cdot \frac{d s}{dt}.
  \tag{1.1}
\end{equation}\]</span><span class="math display">\[
Usando as regras de derivação já apresentadas, tem-se
&lt;span class="math display" id="eq:dCds"&gt;\[\begin{equation}
  \frac{d C}{d s} = \frac{1}{2}s + 2.
  \tag{1.2}
\end{equation}\]</span> De forma similar, <span class="math display" id="eq:dsdt">[<span class="math display">\[\begin{equation}
  \frac{d s}{d t} = 6t + 50.
  \tag{1.3}
\end{equation}\]</span><span class="math display">\[
Combinando as equações &lt;a href="CDI.html#eq:dCds"&gt;(1.2) e &lt;a href="CDI.html#eq:dsdt"&gt;(1.3) com &lt;a href="CDI.html#eq:dCdt"&gt;(1.1), temos
&lt;span class="math display" id="eq:dCdt2"&gt;\[\begin{equation}
  \frac{d C}{ dt} = \left( \frac{1}{2}s + 2 \right)(6t + 50).
  \tag{1.4}
\end{equation}\]</span> Para avaliar no ponto <span class="math inline">\(t = 2\)</span>, lembre-se que <span class="math display">\[s = 3 t^2 + 50t \to s = 3\cdot(2^2) + 50 \cdot 2 = 112.\]</span> Substituindo, na expressão </span></span></span></a><a href="CDI.html#eq:dCdt2">(1.4), tem-se <span class="math display">\[ \frac{d C}{ dt}|_{t=2} = \left( \frac{1}{2}s + 2 \right)(6t + 50) =  \left(\frac{1}{2}(112) + 2\right)(6\cdot 2 + 50) = (58)\cdot( 62) = 3596.\]</span> Assim podemos dizer que <span class="math inline">\(2\)</span> segundos após o início da execução do algoritmo o custo computacional está aumentando a uma taxa de <span class="math inline">\(3596\)</span> unidades de processamento. :::
</a><div id="derivadas-de-ordem-superior" class="section level3" number="1.2.3"><a href="CDI.html#eq:dCdt2">
<h3 class="anchored">
<span class="header-section-number">1.2.3 Derivadas de ordem superior
</span></h3>
<p>Dada uma função <span class="math inline">\(f(x)\)</span> a derivada <span class="math inline">\(f^{\prime}(x)\)</span> é também chamada de derivada de primeira ordem e mede a variação da função original ou <strong>primitiva</strong>. A derivada de segunda ordem denotada por <span class="math inline">\(f^{\prime \prime}(x)\)</span> mede a taxa de variação da primeira derivada. De forma análoga, a derivada de terceira ordem <span class="math inline">\(f^{\prime \prime \prime}(x)\)</span> mede a taxa de variação da segunda derivada e assim por diante até a <span class="math inline">\(n-\)</span>ésima derivada. As derivadas de ordem superior são obtidas pela aplicação das regras de diferenciação na derivada de ordem imediatamente inferior. Em termos de notação é comum encontrar <span class="math inline">\(\frac{d^n y}{d x^n}\)</span> que é interpretada como a <span class="math inline">\(n-\)</span>ésima derivada de <span class="math inline">\(y\)</span> em relação a <span class="math inline">\(x\)</span>.</p>
</a><div class="example"><a href="CDI.html#eq:dCdt2">
<span id="exm:ordemsup" class="example"><strong>Example 1.6 </strong>Obtenha a derivada de ordem até <span class="math inline">\(5\)</span> da função <span class="math inline">\(y = 2x^4 + 5 x^3 + 2 x^2\)</span>. ::: Usando as regras de derivação 2 e 7, temos <span class="math inline">\(\frac{d y}{d x} = 8 x^3 + 15 x^2 + 4 x\)</span>, <span class="math inline">\(\frac{d^2 y}{d x^2} = 24x^2 + 30x + 4\)</span>, <span class="math inline">\(\frac{d^3 y}{d x^3} = 48 x + 30\)</span>, <span class="math inline">\(\frac{d^4 y}{d x^4} = 48\)</span> e <span class="math inline">\(\frac{d^5 y}{d x^5} = 0\)</span>. Neste caso, todas as derivadas de ordem superior a <span class="math inline">\(4\)</span> são zero. :::
</span></a><div id="importância-da-derivada" class="section level3" number="1.2.4"><a href="CDI.html#eq:dCdt2">
<h3 class="anchored">
<span class="header-section-number">1.2.4 Importância da derivada
</span></h3>
<p>Uma das principais aplicações de derivadas é encontrar pontos de máximo/mínimo de uma função. Para entender o que isso significa e porquê é importante encontrar tais pontos precisamos de mais algumas definições.</p>
<div class="callout callout-style-simple callout-important">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><span id="def:maximo" class="definition"><strong>Definição 1.14 </strong>Dizemos que um ponto <span class="math inline">\(c\)</span> é um <strong>valor máximo relativo</strong> de <span class="math inline">\(f(x)\)</span> se existir um intervalo aberto contendo <span class="math inline">\(c\)</span>, no qual <span class="math inline">\(f(x)\)</span> esteja definida, tal que <span class="math inline">\(f(c) \geq f(x)\)</span> para todo <span class="math inline">\(x\)</span> neste intervalo.</span></p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-important">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><span id="def:minimo" class="definition"><strong>Definição 1.15 </strong>Dizemos que um ponto <span class="math inline">\(c\)</span> é um <strong>valor mínimo relativo</strong> de <span class="math inline">\(f(x)\)</span> se existir um intervalo aberto contendo <span class="math inline">\(c\)</span>, no qual <span class="math inline">\(f(x)\)</span> esteja definida, tal que <span class="math inline">\(f(c) \leq f(x)\)</span> para todo <span class="math inline">\(x\)</span> neste intervalo.</span></p>
</div>
</div>
</div>
Figura </a><a href="CDI.html#fig:maxmin">1.14 ilustra um esboço de uma parte do gráfico de duas funções tendo um máximo/mínimo relativo em <span class="math inline">\(c = 0\)</span> dentro do intervalo <span class="math inline">\((a = -3, b = 3)\)</span>.
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:maxmin">
<span style="display:block;" id="fig:maxmin"> <img src="MDSRbook_files/figure-html/maxmin-1.png" alt="Ilustração de máximo/mínimo relativos." width="576">
<p class="caption">
</p><p>Figura 1.14: Ilustração de máximo/mínimo relativos.</p>
</span></a><p><a href="CDI.html#fig:maxmin">::: As Figuras </a><a href="CDI.html#fig:maxmin">1.14 (A) e </a><a href="CDI.html#fig:maxmin">1.14 (C) ilustram funções com o mínimo relativo em <span class="math inline">\(c = 0\)</span>, enquanto que as Figuras </a><a href="CDI.html#fig:maxmin">1.14 (B) e </a><a href="CDI.html#fig:maxmin">1.14 (D) ilustram funções com o máximo relativo em <span class="math inline">\(c = 0\)</span>. Importante notar que multiplicando a função por <span class="math inline">\(-1\)</span> invertemos a sua concavidade, tornando um ponto de mínimo em máximo e vice-versa. De forma geral, quando treinamos ou estimamos algum tipo de modelo, o que realmente estamos fazendo é procurando valores de máximo/mínimo de uma determinada função. Esta ideia ficará mais clara no decorrer desta seção. Neste momento, atenha-se ao fato de que encontrar pontos de máximo ou mínimo de uma função é uma tarefa importante para construir grande parte das técnicas de ciência de dados, e portanto precisamos de uma forma sistemática para realizar esta tarefa. Conforme mencionado anteriormente, no limite quando <span class="math inline">\(x \to a\)</span> a derivada é a reta tangente ao ponto <span class="math inline">\((a, f(a))\)</span>, cuja equação é dada por <span class="math inline">\(y - f(a) = f^{\prime}(a)(x - a)\)</span>. Este resultado nos permite usar a derivada para encontrar o ponto de máximo ou mínimo relativo de uma função. Para entender o que é a reta tangente a <span class="math inline">\(f(x)\)</span> e como ela nos ajuda a encontrar o ponto de máximo ou mínimo vamos ver um exemplo trivial.</a></p><a href="CDI.html#fig:maxmin">
</a><div class="example"><a href="CDI.html#fig:maxmin">
<span id="exm:exemplo2derivada" class="example"><strong>Example 1.7 </strong>Obtenha a derivada de <span class="math inline">\(f(x) = - x^2\)</span> e trace a reta tangente aos pontos <span class="math inline">\(a = -2\)</span> e <span class="math inline">\(a = 2\)</span>. <span class="math display">\[\begin{align}
f^{\prime}(x) &amp;amp;=&amp;amp; \lim_{h \to 0} \frac{f(x + h) - f(x)}{h} \nonumber \\
&amp;amp;=&amp;amp; \lim_{h \to 0} \frac{- (x + h)^2 - (- x^2)}{h} \nonumber \\
&amp;amp;=&amp;amp; \lim_{h \to 0} \frac{-(x^2 + 2xh + h^2)}{h} \nonumber \\
&amp;amp;=&amp;amp; \lim_{h \to 0} \frac{-x^2 - 2xh - h^2  + x^2}{h} = \frac{-2xh - h^2}{h} \nonumber \\
&amp;amp;=&amp;amp; \lim_{h \to 0} -2x - h = -2x \nonumber
f^{\prime}(x) &amp;amp;=&amp;amp; -2x.
\end{align}\]</span> ::: Note que no Exemplo </span></a><a href="CDI.html#exm:exemplo1derivada">1.2 foram utilizadas diretamente as definições de derivada e limite. Com este resultado e sabendo que a reta tangente a <span class="math inline">\(f(x)\)</span> tem equação dado por <span class="math inline">\(y - f(a) = f^{\prime}(a)(x - a)\)</span>. Nós podemos traçar o gráfico de <span class="math inline">\(f(x)\)</span> e da reta tangente nos pontos <span class="math inline">\(a=-2\)</span> e <span class="math inline">\(a=2\)</span>, conforme apresentado na Figura </a><a href="CDI.html#fig:retatangente">1.15.
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:retatangente">
<span style="display:block;" id="fig:retatangente"> <img src="MDSRbook_files/figure-html/retatangente-1.png" alt="Ilustração de uma função com a reta tangente a pontos distintos." width="576">
<p class="caption">
</p><p>Figura 1.15: Ilustração de uma função com a reta tangente a pontos distintos.</p>
::: Vamos ver passo-a-passo como chegamos às equações e códigos necessários para desenhar a Figura </span></a><a href="CDI.html#fig:retatangente">1.15.
</a><ol style="list-style-type: decimal"><a href="CDI.html#fig:retatangente">
<p>1.Implementar a função <span class="math inline">\(f(x) = -x^2\)</span>.</p>
</a><div class="sourceCode" id="cb45"><a href="CDI.html#fig:retatangente">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#fig:retatangente"><code class="sourceCode r"><span id="cb45-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb45-1" aria-hidden="true" tabindex="-1">fx <span class="ot">&lt;- <span class="cf">function(x) {
<span id="cb45-2"></span></span></span></a><a href="CDI.html#cb45-2" aria-hidden="true" tabindex="-1">  y <span class="ot">&lt;- <span class="sc">-x<span class="sc">^<span class="dv">2
<span id="cb45-3"></span></span></span></span></span></a><a href="CDI.html#cb45-3" aria-hidden="true" tabindex="-1">  <span class="fu">return(y)
<span id="cb45-4"></span></span></a><a href="CDI.html#cb45-4" aria-hidden="true" tabindex="-1">}`</a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb45-4" aria-hidden="true" tabindex="-1">
:::
</a><ol start="2" style="list-style-type: decimal"><a href="CDI.html#cb45-4" aria-hidden="true" tabindex="-1">
<p>1.Implementar a derivada de <span class="math inline">\(f(x)\)</span>, ou seja, <span class="math inline">\(f^{\prime}(x) = -2x\)</span>.</p>
</a><div class="sourceCode" id="cb46"><a href="CDI.html#cb45-4" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb45-4" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb46-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb46-1" aria-hidden="true" tabindex="-1">f_prime <span class="ot">&lt;- <span class="cf">function(x) {
<span id="cb46-2"></span></span></span></a><a href="CDI.html#cb46-2" aria-hidden="true" tabindex="-1">  y_prime <span class="ot">&lt;- <span class="sc">-<span class="dv">2<span class="sc">*x
<span id="cb46-3"></span></span></span></span></span></a><a href="CDI.html#cb46-3" aria-hidden="true" tabindex="-1">  <span class="fu">return(y_prime)
<span id="cb46-4"></span></span></a><a href="CDI.html#cb46-4" aria-hidden="true" tabindex="-1">}`</a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb46-4" aria-hidden="true" tabindex="-1">
:::
</a><ol start="3" style="list-style-type: decimal"><a href="CDI.html#cb46-4" aria-hidden="true" tabindex="-1">
<p>1.Obter a equação da reta tangente.</p>
Note que não foi demonstrado, mas a equação da reta tangente é dada por <span class="math inline">\(y - f(a) = f^{\prime}(a)(x - a)\)</span>. Substituindo os termos, temos <span class="math display">\[\begin{align}
y &amp;amp;=&amp;amp; f(a) + f^{\prime}(a)(x - a) \nonumber \\
y &amp;amp;=&amp;amp; f(a) + f^{\prime}(a)x - f^{\prime}(a)a \nonumber \\
y &amp;amp;=&amp;amp; [f(a) - f^{\prime}(a)a] + f^{\prime}(a)x \nonumber \\
y &amp;amp;=&amp;amp; [-(a^2) - (-2a^2)] + (-2ax ) \nonumber \\
y &amp;amp;=&amp;amp; a^2 - 2ax.
\end{align}\]</span>
</a><ol start="4" style="list-style-type: decimal"><a href="CDI.html#cb46-4" aria-hidden="true" tabindex="-1">
<p>1.Implementar uma função que retorne o intercepto e a inclinação da reta tangente em um determinado ponto.</p>
</a><div class="sourceCode" id="cb47"><a href="CDI.html#cb46-4" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb46-4" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb47-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb47-1" aria-hidden="true" tabindex="-1">reta_tangente <span class="ot">&lt;- <span class="cf">function(a) {
<span id="cb47-2"></span></span></span></a><a href="CDI.html#cb47-2" aria-hidden="true" tabindex="-1">  intercept <span class="ot">= (<span class="fu">fx(<span class="at">x = a) <span class="sc">- <span class="fu">f_prime(<span class="at">x = a)<span class="sc">*a)
<span id="cb47-3"></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb47-3" aria-hidden="true" tabindex="-1">  slope <span class="ot">&lt;- <span class="fu">f_prime(<span class="at">x = a)
<span id="cb47-4"></span></span></span></span></a><a href="CDI.html#cb47-4" aria-hidden="true" tabindex="-1">  <span class="fu">return(<span class="fu">c(intercept,slope))
<span id="cb47-5"></span></span></span></a><a href="CDI.html#cb47-5" aria-hidden="true" tabindex="-1">}`</a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb47-5" aria-hidden="true" tabindex="-1">
::: Por exemplo, no ponto <span class="math inline">\(a = 2\)</span>, temos
</a><div class="sourceCode" id="cb48"><a href="CDI.html#cb47-5" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb47-5" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb48-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb48-1" aria-hidden="true" tabindex="-1"><span class="fu">reta_tangente(<span class="at">a = <span class="dv">2)`</span></span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb48-1" aria-hidden="true" tabindex="-1">
:::
<pre>`## [1]  4 -4`</pre>
Neste caso, temos que o intercepto é <span class="math inline">\(4\)</span> e a inclinação é <span class="math inline">\(-4\)</span>.
</a><ol start="5" style="list-style-type: decimal"><a href="CDI.html#cb48-1" aria-hidden="true" tabindex="-1">
<p>1.Desenhar o gráfico da função com a reta tangente nos pontos <span class="math inline">\(a=-2\)</span> e <span class="math inline">\(a=2\)</span>.</p>
</a><div class="sourceCode" id="cb50"><a href="CDI.html#cb48-1" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb48-1" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb50-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb50-1" aria-hidden="true" tabindex="-1"><span class="fu">par(<span class="at">mar=<span class="fu">c(<span class="fl">2.6, <span class="fl">2.8, <span class="fl">1.2, <span class="fl">0.5), <span class="at">mgp = <span class="fu">c(<span class="fl">1.6, <span class="fl">0.6, <span class="dv">0)) <span class="do">## Define a janela gráfica
<span id="cb50-2"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb50-2" aria-hidden="true" tabindex="-1">x <span class="ot">&lt;- <span class="fu">seq(<span class="sc">-<span class="dv">5, <span class="dv">5, <span class="at">l = <span class="dv">11) <span class="do">## Sequencia definindo o eixo x
<span id="cb50-3"></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb50-3" aria-hidden="true" tabindex="-1"><span class="fu">plot(<span class="fu">fx(x) <span class="sc">~ x, <span class="at">type = <span class="st">"l", <span class="at">ylim = <span class="fu">c(<span class="sc">-<span class="dv">25, <span class="dv">4)) <span class="do">## Desenhando a função
<span id="cb50-4"></span></span></span></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb50-4" aria-hidden="true" tabindex="-1"><span class="do">## Reta tangente ao ponto a = 2
<span id="cb50-5"></span></span></a><a href="CDI.html#cb50-5" aria-hidden="true" tabindex="-1">reta1 <span class="ot">&lt;- <span class="fu">reta_tangente(<span class="dv">2)
<span id="cb50-6"></span></span></span></span></a><a href="CDI.html#cb50-6" aria-hidden="true" tabindex="-1">intercept1 <span class="ot">= reta1[<span class="dv">1]
<span id="cb50-7"></span></span></span></a><a href="CDI.html#cb50-7" aria-hidden="true" tabindex="-1">slope1 <span class="ot">&lt;- reta1[<span class="dv">2]
<span id="cb50-8"></span></span></span></a><a href="CDI.html#cb50-8" aria-hidden="true" tabindex="-1">dev_values <span class="ot">&lt;- <span class="fu">seq(<span class="fl">0.5, <span class="dv">5, <span class="at">l = <span class="dv">100)
<span id="cb50-9"></span></span></span></span></span></span></span></a><a href="CDI.html#cb50-9" aria-hidden="true" tabindex="-1"><span class="fu">lines(dev_values, <span class="fu">c(intercept1 <span class="sc">+ slope1<span class="sc">*dev_values))
<span id="cb50-10"></span></span></span></span></span></a><a href="CDI.html#cb50-10" aria-hidden="true" tabindex="-1">
<span id="cb50-11"></span></a><a href="CDI.html#cb50-11" aria-hidden="true" tabindex="-1"><span class="do">## Reta tangente ao ponto a = -2
<span id="cb50-12"></span></span></a><a href="CDI.html#cb50-12" aria-hidden="true" tabindex="-1">reta2 <span class="ot">&lt;- <span class="fu">reta_tangente(<span class="sc">-<span class="dv">2)
<span id="cb50-13"></span></span></span></span></span></a><a href="CDI.html#cb50-13" aria-hidden="true" tabindex="-1">intercept2 <span class="ot">= reta2[<span class="dv">1]
<span id="cb50-14"></span></span></span></a><a href="CDI.html#cb50-14" aria-hidden="true" tabindex="-1">slope2 <span class="ot">&lt;- reta2[<span class="dv">2]
<span id="cb50-15"></span></span></span></a><a href="CDI.html#cb50-15" aria-hidden="true" tabindex="-1">dev_values <span class="ot">&lt;- <span class="fu">seq(<span class="sc">-<span class="dv">5, <span class="sc">-<span class="fl">0.5, <span class="at">l = <span class="dv">100)
<span id="cb50-16"></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb50-16" aria-hidden="true" tabindex="-1"><span class="fu">lines(dev_values, <span class="fu">c(intercept2 <span class="sc">+ slope2<span class="sc">*dev_values))
<span id="cb50-17"></span></span></span></span></span></a><a href="CDI.html#cb50-17" aria-hidden="true" tabindex="-1">
<span id="cb50-18"></span></a><a href="CDI.html#cb50-18" aria-hidden="true" tabindex="-1"><span class="do">## Pontos
<span id="cb50-19"></span></span></a><a href="CDI.html#cb50-19" aria-hidden="true" tabindex="-1"><span class="fu">points(<span class="sc">-<span class="dv">2, <span class="sc">-<span class="dv">4)
<span id="cb50-20"></span></span></span></span></span></span></a><a href="CDI.html#cb50-20" aria-hidden="true" tabindex="-1"><span class="fu">points(<span class="dv">2, <span class="sc">-<span class="dv">4)`</span></span></span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb50-20" aria-hidden="true" tabindex="-1">
::: Na obtenção de grande parte das técnicas de ciências de dados, tais como, modelos preditivos ou de classificação o objetivo será de alguma forma <strong>otimizar</strong> uma função. Neste momento usamos o termo <strong>otimizar</strong> no sentido de encontrar um ponto onde a função de interesse é um máximo/mínimo relativo, também chamado de local, em um certo intervalo. Pelo gráfico da função apresentado na Figura </a><a href="CDI.html#fig:retatangente">1.15 não é difícil ver que a função atinge o seu ponto máximo quando <span class="math inline">\(x = 0\)</span>. O problema é como podemos obter este ponto de forma mais geral, sem precisar recorrer ao desenho do gráfico e sua inspeção visual. É neste ponto que o fato da derivada representar a inclinação da reta tangente a <span class="math inline">\(f(x)\)</span> mostra seu valor. Note que conforme um ponto <span class="math inline">\(a\)</span> qualquer for se aproximando do máximo da função a inclinação da reta tangente a este ponto vai se aproximando de zero, ou seja, ficará paralela ao eixo <span class="math inline">\(x\)</span>. Conforme ilustrado na Figura </a><a href="CDI.html#fig:retatangente2">1.16.
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:retatangente2">
<span style="display:block;" id="fig:retatangente2"> <img src="MDSRbook_files/figure-html/retatangente2-1.png" alt="Ilustração de uma função com a reta tangente em pontos distintos." width="576">
<p class="caption">
</p><p>Figura 1.16: Ilustração de uma função com a reta tangente em pontos distintos.</p>
<p>::: Note que conforme passamos do ponto <span class="math inline">\(a1 = 2\)</span> para <span class="math inline">\(a2 = 1\)</span> a inclinação da reta tangente a <span class="math inline">\(f(x)\)</span> diminuiu e quando chegamos no ponto <span class="math inline">\(a3 = 0\)</span> a inclinação da reta tangente é exatamente zero, indicando que chegamos a um <strong>ponto extremo</strong>. No entanto, é importante notar que baseado apenas na derivada não sabemos se o ponto encontrado é de máximo ou mínimo relativo. O seguinte Teorema, formaliza a situação até o momento.</p>
</span></a><div class="theorem"><a href="CDI.html#fig:retatangente2">
<span id="thm:extremo" class="theorem"><strong>Teorema 1.1 </strong>Se <span class="math inline">\(f(x)\)</span> existe para todos os valores de <span class="math inline">\(x\)</span> no intervalo aberto <span class="math inline">\((a,b)\)</span>, e se <span class="math inline">\(f(x)\)</span> tem um extremo relativo em <span class="math inline">\(c\)</span>, em que <span class="math inline">\(a &amp;lt; c &amp;lt; b\)</span>, então <span class="math inline">\(f^{\prime}(c)\)</span> existe e <span class="math inline">\(f^{\prime}(c) = 0\)</span>. ::: Um aspecto importante do Teorema </span></a><a href="CDI.html#thm:extremo">1.1 é que sendo <span class="math inline">\(f(x)\)</span> diferenciável, os pontos extremos de <span class="math inline">\(f(x)\)</span> vão ocorrer quando <span class="math inline">\(f^{\prime}(x) = 0\)</span>. Por outro lado, <span class="math inline">\(f^{\prime}(x)\)</span> pode ser igual a zero mesmo não sendo um extremo relativo, conforme ilustrado na Figura </a><a href="CDI.html#fig:noextremo">1.17.
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:noextremo">
<span style="display:block;" id="fig:noextremo"> <img src="MDSRbook_files/figure-html/noextremo-1.png" alt="Ilustração de uma função onde derivada zero não é ponto extremo." width="576">
<p class="caption">
</p><p>Figura 1.17: Ilustração de uma função onde derivada zero não é ponto extremo.</p>
</span></a><p><a href="CDI.html#fig:noextremo">::: Note que a derivada de <span class="math inline">\(f(x)\)</span> no ponto <span class="math inline">\(x = 1\)</span> é zero, no entanto <span class="math inline">\(f(x)\)</span> não tem um extremo relativo em <span class="math inline">\(1\)</span>. Assim, concluímos que apesar da derivada ajudar a encontrar os pontos extremos, apenas <span class="math inline">\(f^{\prime}(x) = 0\)</span> não é suficiente para concluirmos que a função tem um ponto extremo, seja ele de máximo ou de mínimo. Para definir se o ponto extremo encontrado em <span class="math inline">\(f^{\prime}(c) = 0\)</span> é um ponto de máximo ou mínimo, precisamos lembrar que a derivada mede a taxa de variação instantânea da função no ponto avaliado. Neste sentido, a segunda derivada mede a taxa de variação da derivada primeira. Se a derivada primeira é zero, ou seja, a reta tangente a <span class="math inline">\(f(x)\)</span> está paralela ao eixo <span class="math inline">\(x\)</span>, temos um platô na função. O que precisamos saber é se o gráfico de <span class="math inline">\(f(x)\)</span> está abaixo ou acima do ponto extremo, para então concluir se é um ponto de máximo ou mínimo relativo. Note que se a segunda derivada é negativa, significa que a função se move abaixo do platô, e portanto temos um <strong>máximo relativo</strong>, conforme ilustrado na Figura </a><a href="CDI.html#fig:maxmin">1.14 (C). Por outro lado, se a segunda derivada é positiva, significa que a função se move acima do platô, e portanto temos um ponto de <strong>mínimo relativo</strong>, conforme ilustrado na Figura </a><a href="CDI.html#fig:maxmin">1.14 (A). Apenas um adendo na terminologia, um ponto extremo também é chamado de <strong>ponto crítico</strong>, ou <strong>ponto estacionário</strong> dependendo da bibliografia consultada. Por fim, temos um procedimento simples para encontrar um ponto crítico e decidir se é um ponto de máximo ou mínimo relativo, vamos enunciar na forma de um Teorema.</a></p><a href="CDI.html#fig:maxmin">
</a><div class="theorem"><a href="CDI.html#fig:maxmin">
<span id="thm:maxmin2" class="theorem"><strong>Teorema 1.2 </strong>Seja <span class="math inline">\(c\)</span> um ponto extremo de uma função <span class="math inline">\(f(x)\)</span> no qual <span class="math inline">\(f^{\prime}(c) = 0\)</span>, e suponha que <span class="math inline">\(f^{\prime}(x)\)</span> exista para todos os valores de <span class="math inline">\(x\)</span> em um intervalo aberto contendo <span class="math inline">\(c\)</span>. Se <span class="math inline">\(f^{\prime \prime}(c)\)</span> existe, então
<ul>
1.Se <span class="math inline">\(f^{\prime \prime}(c) &amp;lt; 0\)</span>, então <span class="math inline">\(f(x)\)</span> tem um <strong>máximo relativo</strong> em <span class="math inline">\(c\)</span>. 1.Se <span class="math inline">\(f^{\prime \prime}(c) &amp;gt; 0\)</span>, então <span class="math inline">\(f(x)\)</span> tem um <strong>mínimo relativo</strong> em <span class="math inline">\(c\)</span>.
</ul>
::: Interessante notar que o Teorema </span></a><a href="CDI.html#thm:maxmin2">1.2 não diz nada sobre o caso em <span class="math inline">\(f^{\prime \prime}(c) = 0\)</span>. Neste caso temos um <strong>ponto de inflexão</strong>, conforme ilustrado na Figura </a><a href="CDI.html#fig:noextremo">1.17. Importante notar que em toda a nossa discussão sobre máximo e mínimo, estamos sempre limitando a nossa atenção a um certo intervalo que contém o valor crítico <span class="math inline">\(c\)</span>, por isso particularizamos dizendo máximo/mínimo relativo ao intervalo considerado. No entanto é importante deixar claro que uma função qualquer pode ter vários máximos/mínimos relativos. Por fim, um outro aspecto interessante da segunda derivada é que ela nos indica a concavidade do gráfico da função no ponto crítico. Assim, se <span class="math inline">\(f^{\prime \prime}(c) &amp;gt; 0\)</span> o gráfico de <span class="math inline">\(f(x)\)</span> é côncavo para cima em <span class="math inline">\((c, f(c))\)</span>; se <span class="math inline">\(f^{\prime \prime}(c) &amp;lt; 0\)</span> o gráfico de <span class="math inline">\(f(x)\)</span> é côncavo para baixo em <span class="math inline">\((c, f(c))\)</span>. Veja por exemplo os gráficos apresentados na Figura </a><a href="CDI.html#fig:maxmin">1.14 (A) (côncavo para cima) e </a><a href="CDI.html#fig:maxmin">1.14 (B) (côncavo para baixo). :::
</a><div id="RD" class="section level3" number="1.2.5"><a href="CDI.html#fig:maxmin">
<h3 class="anchored">
<span class="header-section-number">1.2.5 Redução de dados
</span></h3>
Com o que aprendemos até este ponto podemos começar a entender a razão pela qual medidas como a média e a mediana são frequentes em praticamente toda e qualquer análise de dados. Se você trabalha com dados, com certeza já se deparou com a tarefa de resumir uma grande quantidade de observações ou registros de uma variável de interesse em apenas uma medida resumo. Muito provavelmente você usou a média, ou a mediana ou ambas. Este processo de resumir os dados observados por meio de alguma medida resumo é o que chamamos de processo de redução de dados. Agora, vamos pensar em <span class="math inline">\(3\)</span> questionamentos:
</a><ol style="list-style-type: decimal"><a href="CDI.html#fig:maxmin">
<p>1.Por qual razão usamos a média ou a mediana como uma medida resumo? 1.Será que existe algum procedimento mais geral que leva à obtenção destas medidas resumo? 1.Se sim, como este procedimento está relacionado com o que vimos em relação a funções e seu comportamento?</p>
No decorrer desta subseção vamos responder a estas perguntas e mostrar como medidas resumo como a média e a mediana surgem naturalmente do processo de minimização de uma função objetivo que busca minizar a informação perdida ao representá-la por meio de apenas um número. Como exemplo motivador para esta subseção, considere que o interesse é entender o número de dias que um certo produto leva para ser entregue ao cliente. Neste caso é usual o cientista de dados ter disponível uma base de dados transacional, ou seja, as transações financeiras da empresa onde constam todos os produtos vendidos com a data da venda e possivelmente a data da entrega. Com base nestas informações podemos facilmente calcular o número de dias até a entrega do produto. Como a empresa realiza diversas vendas deste mesmo produto temos um conjunto de observações da variável de interesse e queremos entender qual é o seu comportamento. Por simplicidade, vamos supor que temos apenas as cinco observações apresentadas abaixo.
<pre>`## [1]  8  9 14 10 10`</pre>
</a><p><a href="CDI.html#fig:maxmin">Neste exemplo, para a primeira venda, o produto demorou 8 dias para ser entregue. Na segunda venda, 9 dias foram necessários e assim por diante. Até que a quinta venda demorou 10 dias. Note que, neste simples exemplo, você não teria nenhum problema em apresentar os cinco valores. Obviamente que no mundo real você terá uma quantidade muito maior de registros e apresentá-los diretamente não é uma opção viável. Para isto precisamos de medidas resumo. O objetivo é de certa forma reduzir a quantidade de valores a serem apresentados. Porém, gostaríamos que os valores apresentados representassem da melhor forma possível todos os registros da variável de interesse. Note que temos um certo dilema: apresentar todos os valores seria o ideal porque é toda a informação que temos sobre o que queremos analisar. Por outro lado, olhar para uma planilha com centenas de milhares de números não traz nenhuma informação relevante para entender a variável de interesse. Assim, precisamos pensar como criar formas de reduzir a quantidade de informação a ser analisada e ao mesmo tempo garantir que a medida utilizada represente a informação disponível da melhor forma possível. Assim, podemos definir como objetivo resumir o conjunto de observações por meio de apenas um número que chamaremos de <span class="math inline">\(\mu\)</span>. Note que estamos simplificando a realidade, ou seja, temos um modelo extremamente simples que diz que a realidade pode ser resumida por apenas um número. Chamaremos o conjunto de observações da variável de interesse de <span class="math inline">\(y_i\)</span> para <span class="math inline">\(i = 1, \ldots, n\)</span>; em nosso exemplo: <span class="math inline">\(n = 5\)</span>. Nosso objetivo é simples, queremos encontrar um valor para <span class="math inline">\(\mu\)</span> tal que seu valor represente da melhor forma possível os cinco valores observados. Note que precisamos definir o que significa “da melhor forma possível.” Um aspecto importante a ser notado é que, independente do valor de <span class="math inline">\(\mu\)</span>, sempre iremos perder informação, uma vez que estamos trocando cinco valores por apenas um. Porém, tal perda deve ser compensada pela facilidade de interpretação. A ideia é usar uma função para medir o quanto estamos perdendo de informação. Isso nos leva ao conceito de <strong>função perda</strong>. Como o próprio nome sugere, uma <strong>função perda</strong> deve medir o quanto vamos perder de informação ao representar <span class="math inline">\(y_i\)</span> apenas por meio de <span class="math inline">\(\mu\)</span>. Existem diversas funções perda propostas na literatura, porém a mais popular é a <strong>função perda quadrática</strong>. Na função de perda quadrática a quantidade de informação perdida ao representar <span class="math inline">\(y_i\)</span> por <span class="math inline">\(\mu\)</span> é dada pela soma das diferenças entre <span class="math inline">\(y_i\)</span> e <span class="math inline">\(\mu\)</span> ao quadrado, ou seja, <span class="math display" id="eq:sq">[<span class="math display">\[\begin{equation}
  SQ(\mu) = \sum_{i=1}^n (y_i - \mu)^2.
  \tag{1.5}
\end{equation}\]</span>$$ Note que os <span class="math inline">\(y_i\)</span> são números observados, portanto a única quantidade desconhecida em </span></a><a href="CDI.html#eq:sq">(1.5) é o valor de <span class="math inline">\(\mu\)</span>. Neste ponto já temos todo o ferramental de cálculo necessário para encontrar o valor de <span class="math inline">\(\mu\)</span> que <strong>minimiza</strong> a função perda quadrática. Mas antes de resolver este problema de minimização, vamos fazer uma representação gráfica do que significa este processo. Vamos começar implementando a função perda quadrática.</a></p><a href="CDI.html#eq:sq">
<span id="lem:SQmu" class="lemma"><strong>Código 1.3 </strong>Função perda quadrática. :::
</span></a><div class="sourceCode" id="cb52"><a href="CDI.html#eq:sq">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#eq:sq"><code class="sourceCode r"><span id="cb52-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb52-1" aria-hidden="true" tabindex="-1">SQ_mu <span class="ot">&lt;- <span class="cf">function(mu, y) {
<span id="cb52-2"></span></span></span></a><a href="CDI.html#cb52-2" aria-hidden="true" tabindex="-1">  out <span class="ot">&lt;- <span class="fu">sum((y <span class="sc">- mu)<span class="sc">^<span class="dv">2)
<span id="cb52-3"></span></span></span></span></span></span></a><a href="CDI.html#cb52-3" aria-hidden="true" tabindex="-1">  <span class="fu">return(out)
<span id="cb52-4"></span></span></a><a href="CDI.html#cb52-4" aria-hidden="true" tabindex="-1">}`</a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb52-4" aria-hidden="true" tabindex="-1">
::: Veja que, na função </a><a href="CDI.html#lem:SQmu">1.3, o argumento <code>mu</code> é apenas um número, ao passo que <code>y</code> é um vetor. Podemos avaliar a função em algum ponto de interesse, por exemplo <span class="math inline">\(\mu = 10\)</span>.
</a><div class="sourceCode" id="cb53"><a href="CDI.html#lem:SQmu">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#lem:SQmu"><code class="sourceCode r"><span id="cb53-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb53-1" aria-hidden="true" tabindex="-1">y <span class="ot">&lt;- <span class="fu">c(<span class="dv">8,<span class="dv">9,<span class="dv">14,<span class="dv">10,<span class="dv">10)
<span id="cb53-2"></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb53-2" aria-hidden="true" tabindex="-1"><span class="fu">SQ_mu(<span class="at">mu = <span class="dv">10, <span class="at">y = y)`</span></span></span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb53-2" aria-hidden="true" tabindex="-1">
:::
<pre>`## [1] 21`</pre>
Se usarmos <span class="math inline">\(\mu = 10\)</span> estamos perdendo <span class="math inline">\(21\)</span> unidades de informação na escala da função de perda quadrática. Este número por si não tem nenhum significado prático, porém ele serve para comparar dois candidados a valor de <span class="math inline">\(\mu\)</span>. Por exemplo, quanto perdemos se usarmos <span class="math inline">\(\mu = 20\)</span>?
</a><div class="sourceCode" id="cb55"><a href="CDI.html#cb53-2" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb53-2" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb55-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb55-1" aria-hidden="true" tabindex="-1"><span class="fu">SQ_mu(<span class="at">mu = <span class="dv">20, <span class="at">y = y)`</span></span></span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb55-1" aria-hidden="true" tabindex="-1">
:::
<pre>`## [1] 501`</pre>
A perda neste caso é muito maior do que no caso em que <span class="math inline">\(\mu = 10\)</span>. Para ilustrar essa situação vamos desenhar o gráfico da função em </a><a href="CDI.html#eq:sq">(1.5). Para isso, primeiro precisamos ser capazes de avaliar a função </a><a href="CDI.html#lem:SQmu">1.3 para diversos valores do argumento <code>mu</code>, para o mesmo vetor de <code>y</code>. Em <code>R</code> a função <code>Vectorize()</code> nos permite fazer tal operação de forma simples.
</a><div class="sourceCode" id="cb57"><a href="CDI.html#lem:SQmu">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#lem:SQmu"><code class="sourceCode r"><span id="cb57-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb57-1" aria-hidden="true" tabindex="-1">SQ_mu <span class="ot">&lt;- <span class="fu">Vectorize(SQ_mu, <span class="st">"mu")
<span id="cb57-2"></span></span></span></span></a><a href="CDI.html#cb57-2" aria-hidden="true" tabindex="-1"><span class="fu">SQ_mu(<span class="at">mu = <span class="fu">c(<span class="dv">10, <span class="dv">20), <span class="at">y = y)`</span></span></span></span></span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb57-2" aria-hidden="true" tabindex="-1">
:::
<pre>`## [1]  21 501`</pre>
A Figura </a><a href="CDI.html#fig:plotSQmu">1.18 (A) apresenta um diagrama de dispersão dos valores de <span class="math inline">\(y_i\)</span>, onde no eixo <span class="math inline">\(x\)</span> é apresentado a ordem ou rótulo das observações e no <span class="math inline">\(y\)</span> o número de dias até a entrega do produto. Além de algumas retas indicando candidatos para valores de <span class="math inline">\(\mu\)</span>. Na Figura </a><a href="CDI.html#fig:plotSQmu">1.18 (B) é apresentado o gráfico da função </a><a href="CDI.html#eq:sq">(1.5) com alguns pontos mostrando o valor da perda para os candidatos a valores de <span class="math inline">\(\mu\)</span> considerados na Figura </a><a href="CDI.html#fig:plotSQmu">1.18 (A).
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:plotSQmu">
<span style="display:block;" id="fig:plotSQmu"> <img src="MDSRbook_files/figure-html/plotSQmu-1.png" alt="Diagrama de dispersão e função perda quadrática para os dados do exemplo sobre o tempo de entrega de produtos." width="960">
<p class="caption">
</p><p>Figura 1.18: Diagrama de dispersão e função perda quadrática para os dados do exemplo sobre o tempo de entrega de produtos.</p>
::: Baseado no gráfico apresentado na Figura </span></a><a href="CDI.html#fig:plotSQmu">1.18 (B) fica claro que o melhor valor de <span class="math inline">\(\mu\)</span>, ou seja, aquele que implica na menor perda quadrática, é o ponto de mínimo da função </a><a href="CDI.html#eq:sq">(1.5). Podemos agora usar o que já discutimos sobre funções para encontrar este valor. O procedimento é simples, basta encontrar a primeira derivada da Equação </a><a href="CDI.html#eq:sq">(1.5) e seu ponto crítico. Pelo gráfico já sabemos que é um ponto de mínimo, mas podemos confirmar avaliando o sinal da segunda derivada. Um resumo deste processo é apresentado na Figura </a><a href="CDI.html#fig:plotSQmu2">1.19.
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:plotSQmu2">
<span style="display:block;" id="fig:plotSQmu2"> <img src="MDSRbook_files/figure-html/plotSQmu2-1.png" alt="Resumo do processo de minimização da função perda quadrática." width="960">
<p class="caption">
</p><p>Figura 1.19: Resumo do processo de minimização da função perda quadrática.</p>
::: A Figura </span></a><a href="CDI.html#fig:plotSQmu2">1.19 (A) reforça que no ponto crítico, denotado aqui por <span class="math inline">\(\hat{\mu}\)</span> a derivada da soma de quadrados deve ser zero, ou seja, <span class="math inline">\(SQ^{\prime}(\hat{\mu}) = 0\)</span>, conforme ilustrado na Figura </a><a href="CDI.html#fig:plotSQmu2">1.19 (B). A obtenção de <span class="math inline">\(SQ^{\prime}(\mu)\)</span> é facilmente realizada usando a regra da cadeia, <span class="math display">\[\begin{eqnarray*}
SQ^{\prime}(\mu) &amp;amp;=&amp;amp; 2 \sum_{i=1}^n (y_i - \mu) \frac{d}{d \mu}(y_i - \mu) \\
                 &amp;amp;=&amp;amp; 2 \sum_{i=1}^n (y_i - \mu)(-1) = -2 \sum_{i=1}^n (y_i - \mu).
\end{eqnarray*}\]</span> O próximo passo é encontrar o ponto <span class="math inline">\(\hat{\mu}\)</span> tal que <span class="math inline">\(SQ^{\prime}(\mu) = 0\)</span>. Assim, <span class="math display">\[\begin{eqnarray*}
SQ^{\prime}(\hat{\mu}) &amp;amp;=&amp;amp; 0 \\
-2 \sum_{i=1}^n (y_i - \hat{\mu}) &amp;amp;=&amp;amp; 0 \\
-\sum_{i=1}^n y_i + n \hat{\mu} &amp;amp;=&amp;amp; 0 \\
n \hat{\mu} &amp;amp;=&amp;amp; \sum_{i=1}^n y_i \\
\hat{\mu} &amp;amp;=&amp;amp; \frac{\sum_{i=1}^n y_i}{n}. \\
\end{eqnarray*}\]</span> Para concluir se realmente encontramos um ponto de mínimo podemos obter a segunda derivada e avaliar o seu sinal. Neste caso, temos <span class="math inline">\(SQ^{\prime \prime}(\mu) = 2n &amp;gt; 0\)</span> e portanto temos um ponto de mínimo relativo. Desta forma, mostramos que o ponto <span class="math inline">\(\hat{\mu}\)</span> que minimiza a função perda quadrática é justamente a média das observações. Esta é apenas uma das justificativas do uso da média como uma medida resumo. Voltemos agora às peguntas do começo desta subseção:
</a><ol style="list-style-type: decimal"><a href="CDI.html#fig:plotSQmu2">
<p>1.Por qual razão usamos a média ou a mediana como uma medida resumo?</p>
Uma possível justificativa é que a média minimiza a função perda quadrática, e portanto, neste sentido, ela é uma medida ótima para resumir a informação contida em um conjunto de observações. Porém, ela não é a única. Como sugestão para o leitor (e também como exercício) sugerimos verificar o que aconteceria caso a <strong>função perda absoluta</strong> fosse utilizada ao invés da perda quadrática. A função perda absoluta é dada por, <span class="math display" id="eq:abs">[<span class="math display">\[\begin{equation}
  SQ(\mu) = \sum_{i=1}^n |y_i - \mu|.
  \tag{1.6}
\end{equation}\]</span>$$ Neste caso a medida resumo é dada pela mediana das observações.
</span></a><ol start="2" style="list-style-type: decimal"><a href="CDI.html#fig:plotSQmu2">
<p>1.Será que existe algum procedimento mais geral que leva à obtenção destas medidas resumo?</p>
Nós descrevemos todo o procedimento em termos da construção e obtenção da medida resumo. Veremos ao longo deste livro que praticamente todos os modelos populares em ciências de dados seguem o mesmo procedimento utilizado para encontrar a média como uma medida resumo ótima. O procedimento consiste em:
</a><ol style="list-style-type: upper-roman"><a href="CDI.html#fig:plotSQmu2">
<p>1.Especificar um modelo, ou seja, uma descrição simplificada da realidade. No exemplo, nós usamos o modelo mais simples possível que admite que as observações podem ser resumidas por meio de apenas um número ou parâmetro. Porém, em termos mais gerais o modelo vai depender de muitos parâmetros. 1.Especificar uma função perda. Em nosso exemplo usamos a função perda quadrática, porém como já mencionado outras opções estão disponíveis na literatura e veremos mais sobre isso no decorrer do livro. A função perda nada mais é que uma forma de medir a distância entre o modelo proposto e os dados observados. 1.Treinar o modelo ou estimar o valor dos parâmetros do modelo. Este passo consiste em minimizar alguma noção de distância entre os dados observados, ou seja, <span class="math inline">\(y_i\)</span> e o modelo proposto. Para isso, alteramos o valor dos parâmetros do modelo para torná-lo o mais próximo possível dos dados. A distância é medida por meio da função perda.</p>
</a><ol start="3" style="list-style-type: decimal"><a href="CDI.html#fig:plotSQmu2">
<p>1.Se sim, como este procedimento está relacionado com o que vimos em relação a funções e seu comportamento?</p>
Basicamente, todo o processo de especificação e treinamento de um modelo consiste no uso de funções matemáticas para representação da realidade de forma simplificada. Por isso é importante entender o conceito de função e seu comportamento. Além disso, para o treinamento, também definimos uma função e estudamos o seu comportamento usando a sua derivada como principal ferramenta para encontrar o seu ponto de mínimo. Neste sentido, a obtenção de uma medida resumo como a média e de vários outros modelos em ciência de dados é uma simples aplicação de funções matemáticas. Uma função é usada para descrever o modelo, outra função para medir o quanto o modelo está longe dos dados (função perda). Por fim, usamos a derivada da função perda para minimizar a função perda e assim encontrar uma medida resumo ótima. :::
</a><div id="derivadas-parciais" class="section level3" number="1.2.6"><a href="CDI.html#fig:plotSQmu2">
<h3 class="anchored">
<span class="header-section-number">1.2.6 Derivadas parciais
</span></h3>
<p>Vimos na subseção 1.1.1 que uma função pode ter mais do que uma variável independente, ou seja, <span class="math inline">\(y\)</span> pode por exemplo ser uma função de <span class="math inline">\(x1\)</span> e <span class="math inline">\(x2\)</span>: <span class="math inline">\(y = f(x_1, x_2)\)</span>. Nesta subseção, vamos discutir como derivar tais funções. O objetivo é medir o efeito da variação de uma particular variável independente sobre a variável dependente. A <strong>derivada parcial</strong> mede a taxa de variação instantânea da variável dependente <span class="math inline">\((y)\)</span> com relação a variável independente <span class="math inline">\(x_1\)</span>, quando a outra variável independente <span class="math inline">\(x_2\)</span> é mantida constante. A ideia se estende naturalmente para funções com mais de duas variáveis independentes. A diferenciação parcial segue as mesmas regras da diferenciação ordinária, mas trata as outras variáveis independentes como constantes. Em termos simples, a <strong>derivada parcial</strong> em relação a <span class="math inline">\(x_1\)</span> é obtida derivando <span class="math inline">\(f(x_1, x_2)\)</span> “fingindo” que <span class="math inline">\(x_2\)</span> é uma constante. Da mesma forma, a derivada parcial de <span class="math inline">\(f(x_1, x_2)\)</span> em relação a <span class="math inline">\(x_2\)</span> é obtida derivando <span class="math inline">\(f(x_1, x_2)\)</span> mantendo <span class="math inline">\(x_1\)</span> constante. Em termos de notação vamos denotar a derivada parcial de <span class="math inline">\(f(x_1, x_2)\)</span> em relação a <span class="math inline">\(x_1\)</span>, por <span class="math inline">\(\frac{\partial f(x_1, x_2)}{\partial x_1}\)</span>. De forma análoga, vamos denotar a derivada parcial de <span class="math inline">\(f(x_1, x_2)\)</span> em relação a <span class="math inline">\(x_2\)</span> por <span class="math inline">\(\frac{\partial f(x_1, x_2)}{\partial x_2}\)</span>.</p>
</a><div class="example"><a href="CDI.html#fig:plotSQmu2">
<p><span id="exm:derivparcial" class="example"><strong>Example 1.8 </strong>Obtenha as derivadas parciais em relação a <span class="math inline">\(x_1\)</span> e <span class="math inline">\(x_2\)</span> de <span class="math inline">\(y = 5 x_1^3 + 3 x_1 x_2 + 4 x_2^2\)</span>. ::: Vamos diferenciar primeiro em <span class="math inline">\(x_1\)</span>, isso significa que <span class="math inline">\(x_2\)</span> deve ser considerado uma constante. <span class="math display">\[\frac{\partial y}{\partial x_1} = 15 x_1^2 + 3 x_2.\]</span> Diferenciando agora em <span class="math inline">\(x_2\)</span> consideramos <span class="math inline">\(x_1\)</span> como constante. <span class="math display">\[\frac{\partial y}{\partial x_2} = 3x_1 + 8 x_2.\]</span> Derivadas de ordem superior também podem ser estendidas para o caso de funções com múltiplas variáveis independentes. Neste caso, as operações começam a ficar mais complicadas e a notação também. A <strong>derivada parcial de segunda ordem</strong> denotada por <span class="math inline">\(\frac{\partial^2 f(x_1,x_2)}{\partial x_1^2}\)</span> indica que a função foi diferenciada parcialmente em relação a <span class="math inline">\(x_1\)</span> duas vezes, novamente mantendo todas as outras variáveis independentes constantes. A derivada parcial de primeira ordem pode ser diferenciada tanto em relação a <span class="math inline">\(x_1\)</span> quanto em relação a <span class="math inline">\(x_2\)</span>. Quando derivamos primeiro em <span class="math inline">\(x_1\)</span> e depois em <span class="math inline">\(x_2\)</span> temos a chamada <strong>derivada parcial cruzada (ou mista)</strong> denotada por <span class="math inline">\(\frac{\partial^2 f(x_1,x_2)}{\partial x_1 \partial x_2}\)</span>. Importante enfatizar que as derivadas parciais cruzadas de uma função serão sempre iguais, ou seja, <span class="math inline">\(\frac{\partial^2 f(x_1,x_2)}{\partial x_1 \partial x_2} = \frac{\partial^2 f(x_1,x_2)}{\partial x_2 \partial x_1}\)</span>, se ambas as derivadas parciais forem contínuas.</span></p>
</a><div class="example"><a href="CDI.html#fig:plotSQmu2">
<span id="exm:derivparcial2" class="example"><strong>Example 1.9 </strong>Obtenha as derivadas parciais de até segunda ordem em relação a <span class="math inline">\(x_1\)</span> e <span class="math inline">\(x_2\)</span> de <span class="math inline">\(y = 7x_1^3 + 9 x_1 x_2 + 2 x_2^5\)</span>. :::
<ul>
1.Derivadas parciais de primeira ordem
</ul>
<span class="math display">\[\frac{\partial y}{\partial x_1} = 21 x_1^2 + 9 x_2, \quad \quad \frac{\partial y}{\partial x_2} = 9x_1 + 10x_2^4.\]</span>
<ul>
1.Derivadas parciais de segunda ordem (segunda derivadas direta)
</ul>
<span class="math display">\[\frac{\partial^2 y}{\partial x_1^2} = 42x_1, \quad \quad \frac{\partial^2 y}{\partial x_2^2} = 40x_2^3.\]</span>
<ul>
1.Derivadas parciais de segunda ordem (termos cruzados)
</ul>
<span class="math display">\[\frac{\partial^2 y}{\partial x_1 x_2} = \frac{\partial 21 x_1^2 + 9 x_2}{\partial x_2} = 9, \quad \quad \frac{\partial^2 y}{\partial x_2 x_1} = \frac{\partial 9x_1 + 10x_2^4}{\partial x_1} = 9.\]</span> Novamente, o principal interesse no uso de derivadas parciais é a otimização (maximização ou minimização) de funções de múltiplas variáveis independentes. De forma similar ao caso de uma variável independente, temos algumas condições para encontrar os pontos de máximo ou mínimo.
<ul>
1.As derivadas parciais de primeira ordem devem ser iguais a zero <strong>simultaneamente</strong>, ou seja, <span class="math inline">\(\frac{\partial y}{\partial x_1} = 0\)</span> e <span class="math inline">\(\frac{\partial y}{\partial x_2} = 0\)</span>. Essa condição assegura que a função não está crescendo nem decrescendo no ponto. Isso caracteriza o que chamamos de <strong>pontos críticos</strong>. 1.Se as derivadas parciais de segunda ordem no ponto crítico forem ambas positivas então teremos um ponto de mínimo. Por outro lado, se as derivadas parciais de segunda ordem forem negativas teremos um ponto de máximo. 1.O produto das derivadas parciais de segunda ordem no ponto crítico deve exceder o valor do quadrado das derivadas parciais cruzadas. Isto assegura que a função está em um ponto ótimo quando avaliada de todas as direções, e não apenas em relação aos eixos principais. Essa condição assegura que a matriz de derivadas de segunda ordem é <strong>positiva definida</strong>. Para funções com mais de duas variáveis independentes é mais complicado verificar essa condição. No Capítulo 2 discutiremos sobre matrizes <strong>positivas definidas</strong> o que nos ajudará a verificar essa condição para funções com um número arbitrário de variáveis independentes. 1.Se o produto das derivadas parciais de segunda ordem principal (derivada segunda direta) não exceder o quadrado da derivada cruzada a função pode estar em um <strong>ponto de inflexão</strong> ou em um <strong>ponto de sela</strong>. Se for ponto de inflexão, a função estará em um ponto de máximo quando observada ao longo de um dos eixos, ao passo que estará em um ponto de mínimo quando observada do eixo restante. No caso do ponto de sela as segundas derivadas diretas assumirão sinais diferentes e o produto destas não excederá o quadrado das derivadas cruzadas. Apesar deste tipo de caso acontecer com frequência em matemática de forma geral, em ciências de dados e, mais especificamente, em modelos estatísticos e de aprendizagem de máquina, as funções que usamos para representar o modelo e a função perda são escolhidas de forma que os pontos críticos representem mínimo/máximo ao menos relativos na maiorias do casos.
</ul>
</span></a><div class="example"><a href="CDI.html#fig:plotSQmu2">
<p><span id="exm:otimo2d" class="example"><strong>Example 1.10 </strong>Considere a função <span class="math inline">\(y = 6 x_1^2 - 9 x_1 - 3 x_1 x_2 - 7 x_2 + 5 x_2^2\)</span>. Encontre os pontos críticos e determine se são de máximo ou mínimo. ::: Para resolver este exemplo, vamos primeiro desenhar o gráfico desta função bidimensional. Assim, precisamos implementá-la em <code>R</code>.</span></p>
<span id="lem:fx1x2" class="lemma"><strong>Código 1.4 </strong>Exemplo de função bidimensional (entrada escalar). :::
</span></a><div class="sourceCode" id="cb59"><a href="CDI.html#fig:plotSQmu2">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#fig:plotSQmu2"><code class="sourceCode r"><span id="cb59-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb59-1" aria-hidden="true" tabindex="-1">fx1x2 <span class="ot">&lt;- <span class="cf">function(x1, x2) {
<span id="cb59-2"></span></span></span></a><a href="CDI.html#cb59-2" aria-hidden="true" tabindex="-1">  y <span class="ot">= <span class="dv">6<span class="sc">*x1<span class="sc">^<span class="dv">2 <span class="sc">- <span class="dv">9 <span class="sc">*x1 <span class="sc">- <span class="dv">3<span class="sc">*x1<span class="sc">*x2 <span class="sc">- <span class="dv">7<span class="sc">*x2 <span class="sc">+ <span class="dv">5<span class="sc">*x2<span class="sc">^<span class="dv">2
<span id="cb59-3"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb59-3" aria-hidden="true" tabindex="-1">  <span class="fu">return(y)
<span id="cb59-4"></span></span></a><a href="CDI.html#cb59-4" aria-hidden="true" tabindex="-1">}`</a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb59-4" aria-hidden="true" tabindex="-1">
::: Note que a função em </a><a href="CDI.html#lem:fx1x2">1.4 tem duas variáveis independentes, da mesma forma que a função em </a><a href="CDI.html#lem:fvetor">1.2. Porém, neste caso, estamos passando dois escalares <code>x1</code> e <code>x2</code>. Na função em </a><a href="CDI.html#lem:fvetor">1.2 nós optamos por passar um vetor <code>x</code> com duas posições <code>x[1]</code> e <code>x[2]</code>. De forma geral, para avaliar a função em muitos pontos, é mais simples passar um vetor de entradas. No entanto, neste exemplo passaremos dois escalares para mostrar mais de uma forma de lidar com funções bidimensionais. Com a função implementada podemos avaliá-la em alguns pontos. Por exemplo, vamos avaliar a função nos pontos <span class="math inline">\(x_1 = 2\)</span> e <span class="math inline">\(x_2 = 3\)</span>.
</a><div class="sourceCode" id="cb60"><a href="CDI.html#lem:fvetor">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#lem:fvetor"><code class="sourceCode r"><span id="cb60-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb60-1" aria-hidden="true" tabindex="-1"><span class="fu">fx1x2(<span class="at">x1 = <span class="dv">2, <span class="at">x2 = <span class="dv">3)`</span></span></span></span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb60-1" aria-hidden="true" tabindex="-1">
:::
<pre>`## [1] 12`</pre>
Para desenhar o gráfico da função precisamos avaliá-la em uma grade de pontos. Definir a grade não é uma tarefa simples, porém um pouco de tentativa e erro tende a fornecer algum entendimento da função, e em geral é suficiente para fazer um gráfico. Neste exemplo, vamos usar uma grade com <span class="math inline">\(100^2\)</span> pontos regularmente espaçados entre <span class="math inline">\(-1\)</span> e <span class="math inline">\(3\)</span> nas direções de <span class="math inline">\(x_1\)</span> e <span class="math inline">\(x_2\)</span>. A função <code>expand.grid()</code> auxilia nesta tarefa.
</a><div class="sourceCode" id="cb62"><a href="CDI.html#cb60-1" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb60-1" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb62-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb62-1" aria-hidden="true" tabindex="-1">x1 <span class="ot">&lt;- <span class="fu">seq(<span class="sc">-<span class="dv">1, <span class="dv">3, <span class="at">l = <span class="dv">100)
<span id="cb62-2"></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb62-2" aria-hidden="true" tabindex="-1">x2 <span class="ot">&lt;- <span class="fu">seq(<span class="sc">-<span class="dv">1, <span class="dv">3, <span class="at">l = <span class="dv">100)
<span id="cb62-3"></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb62-3" aria-hidden="true" tabindex="-1">grade <span class="ot">&lt;- <span class="fu">expand.grid(x1, x2)
<span id="cb62-4"></span></span></span></a><a href="CDI.html#cb62-4" aria-hidden="true" tabindex="-1"><span class="fu">head(grade)`</span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb62-4" aria-hidden="true" tabindex="-1">
:::
<pre>`##     Var1 Var2
## 1 -1.000   -1
## 2 -0.960   -1
## 3 -0.919   -1
## 4 -0.879   -1
## 5 -0.838   -1
## 6 -0.798   -1`</pre>
O próximo passo é avaliar a função nos pontos da grade. Para isso vou utilizar o comando <code>for()</code> que vai percorrer todos os valores da grade avaliando a função no respectivo ponto.
</a><div class="sourceCode" id="cb64"><a href="CDI.html#cb62-4" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb62-4" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb64-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb64-1" aria-hidden="true" tabindex="-1">y <span class="ot">&lt;- <span class="fu">c()
<span id="cb64-2"></span></span></span></a><a href="CDI.html#cb64-2" aria-hidden="true" tabindex="-1"><span class="cf">for(i <span class="cf">in <span class="dv">1<span class="sc">:<span class="dv">10000) {
<span id="cb64-3"></span></span></span></span></span></span></a><a href="CDI.html#cb64-3" aria-hidden="true" tabindex="-1">  y[i] <span class="ot">&lt;- <span class="fu">fx1x2(<span class="at">x1 = grade[i,<span class="dv">1], <span class="at">x2 = grade[i,<span class="dv">2])
<span id="cb64-4"></span></span></span></span></span></span></span></a><a href="CDI.html#cb64-4" aria-hidden="true" tabindex="-1">}`</a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb64-4" aria-hidden="true" tabindex="-1">
::: Alguns aspectos importantes do uso do <code>for()</code>.
<ul>
1.Primeiro precisamos criar um objeto vazio, neste caso chamado de <code>y</code> para armazenar o resultado da avaliação da função. 1.Acessamos os elementos da grade (uma matriz de tamanho <span class="math inline">\(10000\)</span> linhas por <span class="math inline">\(2\)</span> colunas), usando o operador <code>[linha, coluna]</code>: o primeiro número se refere a linha da grade e o segundo se refere a coluna da grade.
</ul>
Para desenhar o gráfico vamos usar as funções <code>image()</code> e <code>contour()</code> para incluir as curvas de nível.
</a><div class="figure" style="text-align: center"><a href="CDI.html#cb64-4" aria-hidden="true" tabindex="-1">
<span style="display:block;" id="fig:super2d"> <img src="MDSRbook_files/figure-html/super2d-1.png" alt="Representação bidimensional de uma função com suas curvas de nível." width="480">
<p class="caption">
</p><p>Figura 1.20: Representação bidimensional de uma função com suas curvas de nível.</p>
::: Uma outra forma de desenhar o gráfico é usando a função <code>perp()</code>.
</span></a><div class="figure" style="text-align: center"><a href="CDI.html#cb64-4" aria-hidden="true" tabindex="-1">
<span style="display:block;" id="fig:persp2d"> <img src="MDSRbook_files/figure-html/persp2d-1.png" alt="Representação bidimensional de uma função usando gráfico de perspectiva." width="672">
<p class="caption">
</p><p>Figura 1.21: Representação bidimensional de uma função usando gráfico de perspectiva.</p>
::: Os gráficos apresentados nas Figuras </span></a><a href="CDI.html#fig:super2d">1.20 e </a><a href="CDI.html#fig:persp2d">1.21 mostram que o ponto crítico é de mínimo, porém não é fácil encontrar o ponto crítico apenas visualmente. Vamos então usar o procedimento já descrito baseado nas derivadas parciais.
</a><ol style="list-style-type: decimal"><a href="CDI.html#fig:persp2d">
<p>1.Calcular as derivadas parciais de primeira ordem da função <span class="math inline">\(y = 6 x_1^2 - 9 x_1 - 3 x_1 x_2 - 7 x_2 + 5 x_2^2.\)</span></p>
Derivando em <span class="math inline">\(x_1\)</span>, temos <span class="math display" id="eq:derivparcialx1">[<span class="math display">\[\begin{equation}
  \frac{\partial y}{ \partial x_1} = 12x_1 - 9 - 3x_2.
  \tag{1.7}
\end{equation}\]</span><span class="math display">\[
De forma similar derivando em $x_2$, temos
&lt;span class="math display" id="eq:derivparcialx2"&gt;\[\begin{equation}
  \frac{\partial y}{ \partial x_2} = -3x_1 - 7 + 10 x_2.
  \tag{1.8}
\end{equation}\]</span>
</span></a><ol start="2" style="list-style-type: decimal"><a href="CDI.html#fig:persp2d">
<p>1.Resolver o sistema de equações</p>
<span class="math display">\[\begin{align}
\begin{matrix}
12x_1 - 9 - 3x_2 = 0\\
-3x_1 - 7 + 10 x_2 = 0.
\end{matrix}
\end{align}\]</span> Para resolver o sistema, primeiro note que da Equação </a><a href="CDI.html#eq:derivparcialx1">(1.7) é possível obter <span class="math inline">\(x_2\)</span> como uma função de <span class="math inline">\(x_1\)</span>, <span class="math display">\[\begin{align}
12x_1 - 2x_2 &amp;amp;=&amp;amp; 9 \\
-3x_2 &amp;amp;=&amp;amp; 9 - 12x_1 \\
x_2 &amp;amp;=&amp;amp; 4x_1 - 3.
\end{align}\]</span> Agora substituímos <span class="math inline">\(x_2 = 4x_1 - 3\)</span> na Equação </a><a href="CDI.html#eq:derivparcialx2">(1.8) e obtemos <span class="math display">\[\begin{align}
-3x_1 + 10x_2 &amp;amp;=&amp;amp; 7 \\
-3x_1 + 10(4x_1 - 3) &amp;amp;=&amp;amp; 7 \\
-3x_1 + 40x_1 -30 &amp;amp;=&amp;amp; 7 \\
37x_1 &amp;amp;=&amp;amp; 37 \\
x_1 = 1.
\end{align}\]</span> Por fim, sabemos que <span class="math inline">\(x_2 = 4x_1 - 3\)</span>, e portanto <span class="math inline">\(x_2 = 4 - 3 = 1\)</span>. Assim, chegamos que <span class="math inline">\(x_1 = 1\)</span> e <span class="math inline">\(x_2 = 1\)</span>.
</a><ol start="3" style="list-style-type: decimal"><a href="CDI.html#eq:derivparcialx2">
<p>1.Verificar se o ponto encontrado é de mínimo, calculando a segunda derivada parcial e avaliando o seu sinal.</p>
<span class="math display">\[\begin{equation*}
\frac{\partial^2 y}{\partial x_1^2} = \frac{\partial}{\partial x_1} (12x_1 - 9 - 3x_2) = 12, \quad \\
\frac{\partial^2 y}{\partial x_2^2} = \frac{\partial}{\partial x_2}(3x_1 - 7 + 10x_2) = 10.
\end{equation*}\]</span> Como ambas derivadas de segunda ordem são positivas, o ponto <span class="math inline">\(x_1 = 1\)</span> e <span class="math inline">\(x_2 = 1\)</span> é um ponto de mínimo em relação aos eixos principais.
</a><ol start="4" style="list-style-type: decimal"><a href="CDI.html#eq:derivparcialx2">
<p>1.Calcular as derivadas cruzadas e verificar se o produto das derivadas principais é maior que o produto das cruzadas.</p>
<span class="math display">\[\begin{equation*}
\frac{\partial^2 y}{\partial x_1 x_2} = \frac{\partial 12x_1 - 9 - 3x_2}{\partial x_2} = -3, \quad \quad
\frac{\partial^2 y}{\partial x_2 x_1} = \frac{\partial -3x_1 - 7 + 10x_2}{\partial x_2} = -3.
\end{equation*}\]</span> Assim, temos que <span class="math display">\[\begin{align}
\frac{\partial^2 y}{\partial x_1^2} \frac{\partial^2 y}{\partial x_2^2} &amp;amp;&amp;gt;&amp;amp; \left( \frac{\partial^2 y}{\partial x_1 x_2} \right)^2 \\
12 \cdot 10 &amp;amp;&amp;gt;&amp;amp; (-3)^2 \\
120 &amp;gt; 9.
\end{align}\]</span> Assim, concluímos que a função está em um ponto de mínimo quando examinada de todas as direções, e não apenas em relação aos eixos principais. :::
</a><div id="gradiente-e-hessiano" class="section level3" number="1.2.7"><a href="CDI.html#eq:derivparcialx2">
<h3 class="anchored">
<span class="header-section-number">1.2.7 Gradiente e Hessiano
</span></h3>
<p>As derivadas de primeira e segunda ordem de uma função de múltiplas variáveis independentes aparecem com muita frequência em matemática e por isso receberam nomes especiais.</p>
<div class="callout callout-style-simple callout-important">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><span id="def:gradiente" class="definition"><strong>Definição 1.16 </strong>O <strong>vetor gradiente</strong> de uma função <span class="math inline">\(f(x_1,x_2)\)</span> é o vetor composto pelas derivadas primeiras de <span class="math inline">\(f(x_1,x_2)\)</span> em relação a <span class="math inline">\(x_1\)</span> e <span class="math inline">\(x_2\)</span>, <span class="math display">\[
\nabla f(x_1,x_2) = \left ( \frac{\partial f(x_1,x_2)}{\partial x_1}, \frac{\partial f(x_1,x_2)}{\partial x_2} \right )^{\top}.
\]</span></span></p>
</div>
</div>
</div>
</a><p><a href="CDI.html#eq:derivparcialx2">A Definição </a><a href="CDI.html#def:gradiente">1.16 se estende naturalmente para funções com mais do que duas variáveis independentes. Neste caso a função é denotada por <span class="math inline">\(f(\boldsymbol{x})\)</span> onde <span class="math inline">\(\boldsymbol{x}\)</span> é um vetor <span class="math inline">\(p \times 1\)</span> de variáveis independentes o <strong>vetor gradiente</strong> de <span class="math inline">\(f(\boldsymbol{x})\)</span> é dado por <span class="math display">\[
\nabla f(\boldsymbol{x}) = \left ( \frac{\partial f(\boldsymbol{x})}{\partial x_1}, \ldots, \frac{\partial f(\boldsymbol{x})}{\partial x_p} \right )^{\top}.
\]</span> De forma similar as derivadas de segunda ordem de <span class="math inline">\(f(x_1, x_2)\)</span> podem ser convenientemente arranjadas em uma matriz de duas linhas e duas colunas.</a></p><a href="CDI.html#def:gradiente">
<div class="callout callout-style-simple callout-important">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><span id="def:hessiana" class="definition"><strong>Definição 1.17 </strong>A <strong>matriz hessiana</strong> de uma função <span class="math inline">\(f(x_1,x_2)\)</span> é a matriz composta pelas derivadas de segunda ordem de <span class="math inline">\(f(x_1,x_2)\)</span>, na seguinte estrutura <span class="math display">\[\begin{equation*}
\mathbf{H} = \begin{pmatrix}
\frac{\partial^2 f(x_1,x_2)}{\partial x_1^2} &amp;amp; \frac{\partial f(x_1,x_2)}{\partial x_1 \partial x_2} \\
\frac{\partial f(x_1,x_2)}{\partial x_2 \partial x_1} &amp;amp; \frac{\partial^2 f(x_1,x_2)}{\partial x_2^2}
\end{pmatrix}.
\end{equation*}\]</span></span></p>
</div>
</div>
</div>
A Definição </a><a href="CDI.html#def:hessiana">1.17 se estende naturalmente para uma função com um número arbitrário <span class="math inline">\(p\)</span> de variáveis independentes. Neste caso a matriz hessiana tem dimensão <span class="math inline">\(p \times p\)</span> com as seguintes entradas <span class="math display">\[\begin{equation*}
\mathbf{H} = \begin{pmatrix}
\frac{\partial^2 f(\boldsymbol{x})}{\partial x_1^2} &amp;amp; \cdots &amp;amp; \frac{\partial f(\boldsymbol{x})}{\partial x_1 \partial x_p} \\
\vdots &amp;amp; \ddots  &amp;amp; \vdots \\
\frac{\partial f(\boldsymbol{x})}{\partial x_p \partial x_1} &amp;amp; \cdots &amp;amp; \frac{\partial^2 f(\boldsymbol{x})}{\partial x_p^2}
\end{pmatrix}.
\end{equation*}\]</span> :::
</a><div id="séries-de-taylor" class="section level3" number="1.2.8"><a href="CDI.html#def:hessiana">
<h3 class="anchored">
<span class="header-section-number">1.2.8 Séries de Taylor
</span></h3>
<p>Em diversas situações em ciência de dados é comum nos depararmos com funções difíceis de lidar, seja matematica ou computacionalmente. Em tais situações é natural pensar em fazer algum tipo de aproximação da função de interesse por uma mais simples de lidar. O núcleo das técnicas de ciência de dados dizem respeito às ferramentas de <strong>inferência estatística</strong> e <strong>métodos numéricos</strong>. Nestes campos geralmente vamos lidar com funções bastante complicadas, mas que podem ser aproximadas por funções mais simples, em geral funções quadráticas (polinômios de segunda ordem). É neste contexto que aparece o que chamamos de <strong>expansões em Séries de Taylor</strong>. Isso nada mais é do que aproximar uma função <span class="math inline">\(f(x)\)</span> por uma função mais simples: um polinômio de grau a ser definido pela ordem da aproximação. Suponha que uma função <span class="math inline">\(f(x)\)</span> é derivável <span class="math inline">\((n+1)\)</span> vezes em um intervalo contendo um ponto <span class="math inline">\(x=x_0\)</span>. A expansão em <strong>Série de Taylor</strong> de <span class="math inline">\(f(x)\)</span> em torno do ponto <span class="math inline">\(x=x_0\)</span> consiste em reescrever <span class="math inline">\(f(x)\)</span> da seguinte forma: <span class="math display" id="eq:taylor">[<span class="math display">\[\begin{equation}
f(x) = f(x_0) + (x - x_0) \frac{d f(x)}{dx} |_{x=x_0} + \frac{(x-x_0)^2}{2!} \frac{d^2 f(x)}{dx^2}|_{x=x0} + \\
\frac{(x-x_0)^3}{3!} \frac{d^3 f(x)}{dx^3}|_{x=x_0} + \ldots + \frac{(x-x_0)^n}{n!} \frac{d^n f(x)}{dx^n}|_{x=x_0} + R_n(x)
  \tag{1.9}  
\end{equation}\]</span><span class="math display">\[
onde o termo $R_n(x)$ é chamado de resíduo ou erro, e dado por
\]</span> R_n(x) = |_{x= } $$ sendo <span class="math inline">\(\epsilon\)</span> um valor entre <span class="math inline">\(x\)</span> e <span class="math inline">\(x_0\)</span>. Em geral o valor do resíduo <span class="math inline">\(R_n(x)\)</span> não pode ser calculado na prática, uma vez que <span class="math inline">\(\epsilon\)</span> não é conhecido. Para obter a aproximação da função ao redor de um ponto <span class="math inline">\(x_0\)</span> é comum usar dois ou mais termos da série. A precisão da aproximação depende de quantos termos da Série de Taylor são usados e também da forma da função original. A ideia é que a aproximação melhore conforme se aumenta o número de termos na aproximação, porém a complexidade da aproximação também cresce. Em inferência estatística o mais comum é usar aproximação de segunda ordem. O que implica que a função original será aproximada por um polinômio quadrático. É importante enfatizar que a aproximação é feita ao redor de um ponto <span class="math inline">\(x_0\)</span> e em geral vai ser útil apenas ao redor deste ponto e não em todo o domínio da função.</span></p>
</a><div class="example"><a href="CDI.html#def:hessiana">
<span id="exm:taylor1" class="example"><strong>Example 1.11 </strong>Seja <span class="math inline">\(f(x) = \exp(x)\)</span>. Determine a expansão de Taylor de ordens <span class="math inline">\(1\)</span> e <span class="math inline">\(2\)</span>, de <span class="math inline">\(f(x)\)</span> ao redor de <span class="math inline">\(x_0 = 0\)</span>. Desenhe os gráficos de <span class="math inline">\(f(x)\)</span> e dos polinômios de Taylor. ::: Vamos chamar de <span class="math inline">\(P_1(x)\)</span> e <span class="math inline">\(P_2(x)\)</span> os polinômios de Taylor de primeira e segunda ordem, respectivamente. Usando as regras de derivação para a função exponencial sabemos que <span class="math inline">\(f^{\prime}(x) = f^{\prime \prime}(x) = \exp(x)\)</span>. Usando a Equação </span></a><a href="CDI.html#eq:taylor">(1.9) apenas com o primeiro termo, temos <span class="math display">\[\begin{eqnarray*}
P_1(x) &amp;amp;=&amp;amp; f(x = 0) + f^{\prime}(x = 0)(x - 0) \\
       &amp;amp;=&amp;amp; \exp(0) + \exp(0)(x - 0) \quad \text{lembre-se que exponencial de 0 é 1} \\
       &amp;amp;=&amp;amp; 1 + x.
\end{eqnarray*}\]</span> De forma similar, usando os dois primeiros termos, temos <span class="math display">\[\begin{eqnarray*}
P_2(x) &amp;amp;=&amp;amp; f(x = 0) + f^{\prime}(x = 0)(x - 0) + \frac{f^{\prime \prime}(x = 0)}{2}(x - 0)^2 \\
       &amp;amp;=&amp;amp; \exp(0) + \exp(0)(x - 0) + \frac{\exp(0)}{2} (x - 0)^2 \\
       &amp;amp;=&amp;amp; 1 + x + \frac{1}{2}x^2.
\end{eqnarray*}\]</span> Para traçar o gráfico da função e da aproximação, vamos implementar funções em <code>R</code>.
</a><div class="sourceCode" id="cb65"><a href="CDI.html#eq:taylor">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#eq:taylor"><code class="sourceCode r"><span id="cb65-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb65-1" aria-hidden="true" tabindex="-1">fx <span class="ot">&lt;- <span class="cf">function(x)<span class="fu">exp(x)
<span id="cb65-2"></span></span></span></span></a><a href="CDI.html#cb65-2" aria-hidden="true" tabindex="-1">p1 <span class="ot">&lt;- <span class="cf">function(x)<span class="dv">1<span class="sc">+x
<span id="cb65-3"></span></span></span></span></span></a><a href="CDI.html#cb65-3" aria-hidden="true" tabindex="-1">p2 <span class="ot">&lt;- <span class="cf">function(x)<span class="dv">1<span class="sc">+x<span class="fl">+0.5<span class="sc">*x<span class="sc">^<span class="dv">2`</span></span></span></span></span></span></span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb65-3" aria-hidden="true" tabindex="-1">
::: Vamos traçar o gráfico em duas situações. A primeira, apresentada na Figura </a><a href="CDI.html#fig:taylorex">1.22 (A), mostra o gráfico da função e dos polinômios de Taylor apenas próximo do ponto <span class="math inline">\(x = 0\)</span>. Por outro lado, a Figura </a><a href="CDI.html#fig:taylorex">1.22 (B) mostra o gráfico da função e dos polinômios de Taylor em uma maior porção do domínio de <span class="math inline">\(f(x)\)</span>.
</a><div class="sourceCode" id="cb66"><a href="CDI.html#fig:taylorex">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#fig:taylorex"><code class="sourceCode r"><span id="cb66-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb66-1" aria-hidden="true" tabindex="-1">x <span class="ot">&lt;- <span class="fu">seq(<span class="sc">-<span class="dv">1, <span class="dv">1, <span class="at">l = <span class="dv">1000)
<span id="cb66-2"></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb66-2" aria-hidden="true" tabindex="-1"><span class="fu">par(<span class="at">mfrow = <span class="fu">c(<span class="dv">1,<span class="dv">2), <span class="at">mar=<span class="fu">c(<span class="fl">2.6, <span class="fl">2.8, <span class="fl">1.2, <span class="fl">0.5), <span class="at">mgp = <span class="fu">c(<span class="fl">1.6, <span class="fl">0.6, <span class="dv">0))
<span id="cb66-3"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb66-3" aria-hidden="true" tabindex="-1"><span class="fu">plot(<span class="fu">fx(x) <span class="sc">~ x, <span class="at">type = <span class="st">"l", <span class="at">ylab = <span class="fu">expression(<span class="fu">f(x)), 
<span id="cb66-4"></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb66-4" aria-hidden="true" tabindex="-1">     <span class="at">xlab = <span class="st">"x", <span class="at">ylim = <span class="fu">c(<span class="dv">0, <span class="fl">2.8), <span class="at">main = <span class="st">"(A)")
<span id="cb66-5"></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb66-5" aria-hidden="true" tabindex="-1"><span class="fu">lines(x, <span class="fu">p1(x), <span class="at">col = <span class="st">"black", <span class="at">lty = <span class="dv">2)
<span id="cb66-6"></span></span></span></span></span></span></span></a><a href="CDI.html#cb66-6" aria-hidden="true" tabindex="-1"><span class="fu">lines(x, <span class="fu">p2(x), <span class="at">col = <span class="st">"black", <span class="at">lty = <span class="dv">3)
<span id="cb66-7"></span></span></span></span></span></span></span></a><a href="CDI.html#cb66-7" aria-hidden="true" tabindex="-1">
<span id="cb66-8"></span></a><a href="CDI.html#cb66-8" aria-hidden="true" tabindex="-1">x <span class="ot">&lt;- <span class="fu">seq(<span class="sc">-<span class="dv">3, <span class="dv">3, <span class="at">l = <span class="dv">1000)
<span id="cb66-9"></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb66-9" aria-hidden="true" tabindex="-1"><span class="fu">plot(<span class="fu">fx(x) <span class="sc">~ x, <span class="at">type = <span class="st">"l", <span class="at">ylab = <span class="fu">expression(<span class="fu">f(x)), 
<span id="cb66-10"></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb66-10" aria-hidden="true" tabindex="-1">     <span class="at">xlab = <span class="st">"x", <span class="at">main = <span class="st">"(B)", <span class="at">ylim = <span class="fu">c(<span class="sc">-<span class="dv">5,<span class="dv">20))
<span id="cb66-11"></span></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb66-11" aria-hidden="true" tabindex="-1"><span class="fu">lines(x, <span class="fu">p1(x), <span class="at">col = <span class="st">"black", <span class="at">lty = <span class="dv">2)
<span id="cb66-12"></span></span></span></span></span></span></span></a><a href="CDI.html#cb66-12" aria-hidden="true" tabindex="-1"><span class="fu">lines(x, <span class="fu">p2(x), <span class="at">col = <span class="st">"black", <span class="at">lty = <span class="dv">3)`</span></span></span></span></span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb66-12" aria-hidden="true" tabindex="-1">
:::
</a><div class="figure" style="text-align: center"><a href="CDI.html#cb66-12" aria-hidden="true" tabindex="-1">
<span style="display:block;" id="fig:taylorex"> <img src="MDSRbook_files/figure-html/taylorex-1.png" alt="Ilustração da aproximação em Séries de Taylor de primeira e segunda ordem da função exponencial ao redor de zero." width="768">
<p class="caption">
</p><p>Figura 1.22: Ilustração da aproximação em Séries de Taylor de primeira e segunda ordem da função exponencial ao redor de zero.</p>
::: Note que ao redor do ponto <span class="math inline">\(x_0\)</span> a aproximação é razoável. No entanto, conforme nos afastamos de <span class="math inline">\(x_0\)</span> a aproximação vai piorando rapidamente. Em alguns casos é possível obter um limite superior para o erro de aproximação <span class="math inline">\(R_n(x)\)</span>. Porém, a obtenção de tais fórmulas está além do objetivo deste livro. Para mais sobre o assunto, o leitor pode consultar o liro ‘Um Curso de Cálculo: Volume I.’ Outra importante extensão da aproximação via Séries de Taylor é aproximar funções com duas ou mais variáveis independentes. Porém, tal extensão também está além dos objetivos deste livro. :::
</span></a><div id="regressão-linear-simples" class="section level3" number="1.2.9"><a href="CDI.html#cb66-12" aria-hidden="true" tabindex="-1">
<h3 class="anchored">
<span class="header-section-number">1.2.9 Regressão linear simples
</span></h3>
O modelo de regressão linear é uma das técnicas mais populares em ciência de dados. É muito comum em livros de modelagem estatística e aprendizado de máquina começar apresentando este modelo para então motivar modelos mais complexos. Nesta subseção nós vamos construir o modelo de regressão linear simples usando argumentos baseados apenas nos conceitos de funções que vimos nas seções anteriores. Chamaremos essa construção de puramente matemática. No entanto, uma formulação completamente estatística leva exatamente ao mesmo modelo com algumas vantagens em termos de inferência para os parâmetros do modelo. Porém, uma discussão estatística do modelo está fora do escopo deste livro. O objetivo de um modelo de regressão linear simples é descrever o comportamento de uma variável dependente, digamos <span class="math inline">\(y\)</span> por meio do conhecimento de uma variável independente <span class="math inline">\(x\)</span>. Descrever o comportamento de <span class="math inline">\(y\)</span> pode ser útil para <strong>predizer</strong> valores de futuras observações de <span class="math inline">\(y\)</span> ou quantificar o efeito de <span class="math inline">\(x\)</span> em <span class="math inline">\(y\)</span>. Apenas baseado nesta informação já é possível notar a semelhança do objetivo deste modelo com a construção de uma função. Na literatura especializada a variável dependente é também chamada de <strong>variável resposta</strong>, <strong>variável de saída</strong>, <strong>target</strong>, entre outros. Enquanto que a variável independente é também chamada de <strong>covariável</strong>, <strong>variável explanatória</strong>, <strong>variável explicativa</strong> ou ainda <strong>variável de entrada</strong> entre outros. Para ilustrar a construção do modelo de regressão linear simples considere que o objetivo é verificar como o tamanho (em metros quadrados) de um apartamento em uma região homogênea de uma cidade está associado ao valor (em reais) deste apartamento. Suponha que um conjunto de <span class="math inline">\(20\)</span> apartamentos foi visitado, medido e avaliado por um profissional da área imobiliária. O conjunto de dados está disponível como material suplementar na página do livro. Abaixo são apresentadas apenas as seis primeiras observações, enquanto que na Figura </a><a href="CDI.html#fig:reglinear">1.23 é apresentado um diagrama de dispersão do tamanho em metros quadrados (eixo <span class="math inline">\(x\)</span>) e o valor em reais do apartamento (eixo <span class="math inline">\(y\)</span>).
<pre>`##        y  x
## 1 207318 55
## 2 250846 69
## 3 165755 46
## 4 219817 61
## 5 268582 73
## 6 229060 63`</pre>
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:reglinear">
<span style="display:block;" id="fig:reglinear"> <img src="MDSRbook_files/figure-html/reglinear-1.png" alt="Diagrama de dispersão relacionando preço do apartamento como função do tamanho do apartamento em metros quadrados." width="576">
<p class="caption">
</p><p>Figura 1.23: Diagrama de dispersão relacionando preço do apartamento como função do tamanho do apartamento em metros quadrados.</p>
::: A Figura </span></a><a href="CDI.html#fig:reglinear">1.23 sugere que o preço do apartamento deve ser alguma função do seu tamanho. Para formalizar essa situação em termos matemáticos, vamos denotar <span class="math inline">\(y_i\)</span> para <span class="math inline">\(i = 1,\ldots,n\)</span> o preço do apartamento <span class="math inline">\(i\)</span> e neste caso <span class="math inline">\(n = 20\)</span>. De forma similar, denotamos por <span class="math inline">\(x_i\)</span> o tamanho do apartamento <span class="math inline">\(i\)</span> em metros quadrados. Assim, dizer que o preço é uma função do tamanho pode ser denotado da seguinte forma <span class="math display" id="eq:fc">[<span class="math display">\[\begin{equation*}
  y_i = f^*(x_i).
  \tag{1.10}
\end{equation*}\]</span><span class="math display">\[
Obviamente o primeiro desafio que surge é qual é a função $f^*(x_i)$ que descreve o preço do apartamento por meio do seu tamanho. Em geral em termos práticos não conhecemos e nunca vamos conhecer tal função. o objetivo é de alguma forma aproximar a função $f^*(x_i)$ por uma outra função $f(x_i)$ que seja conhecida. Uma forma de fazer isso é escolher entre as inúmeras funções disponíveis na literatura e tentar de alguma forma descobrir qual é a que melhor descreve a relação em $y_i$ e $x_i$. Baseado no diagrama de dispersão apresentado na Figura &lt;a href="CDI.html#fig:reglinear"&gt;1.23 é possível ver que uma reta pode fornecer uma descrição razoável da relação entre preço e tamanho do apartamento.
Uma outra forma de pensar é usar a aproximação em séries de Taylor para aproximar a função desconhecida $f^{*}(x_i)$. Usando a aproximação de Taylor de primeira ordem (veja Equação &lt;a href="CDI.html#eq:taylor"&gt;(1.9)) em torno de um ponto $x_0$ desconhecido, temos
\]</span><span class="math display">\[\begin{equation*}
f^*(x) = f^*(x_0) + (x-x_0)f^{*\prime}(x_0) + R_n(x).
\end{equation*}\]</span><span class="math display">\[
Agora ignorando o termo residual $R_n(x)$, temos a seguinte aproximação para $f^*(x)$.
&lt;span class="math display" id="eq:aprox"&gt;\[\begin{equation*}
  f^{*}(x) \approx f^*(x_0) + (x-x_0)f^{*\prime}(x_0).
  \tag{1.11}
\end{equation*}\]</span> Podemos rearranjar os termos da Equação </span></a><a href="CDI.html#eq:aprox">(1.11) para obter <span class="math display" id="eq:aprox2">[<span class="math display">\[\begin{align}
f^{*}(x) &amp;amp;\approx&amp;amp; \underset{\beta_0}{\underbrace{\left \{f^*(x_0) - f^{*\prime}(x_0)x_0 \right \}}} + \underset{\beta_1}{\underbrace{f^{*\prime}(x_0)}}x \\
f^{*}(x) &amp;amp;\approx&amp;amp; \beta_0 + \beta_1 x.
  \tag{1.12}
\end{align}\]</span><span class="math display">\[
Assim, concluímos que a função desconhecida $f^*(x)$ pode ser aproximada usando uma expansão de Taylor de primeira ordem. Essa aproximação resulta em uma função linear (reta) parametrizada pelos parâmetros desconhecidos $\beta_0$ e $\beta_1$. Substituindo a aproximação em &lt;a href="CDI.html#eq:aprox2"&gt;(1.12) no modelo original em &lt;a href="CDI.html#eq:fc"&gt;(1.10) temos
\]</span><span class="math display">\[\begin{equation}
  y_i = \beta_0 + \beta_1 x_i + R_n(x_i),
\end{equation}\]</span><span class="math display">\[
em que o termo $R_n(x_i)$ é o erro cometido em aproximar $y_i$ por $\beta_0 + \beta_1 x_i$. É comum na literatura de modelos de regressão denotar o termo $R_n(x_i)$ por $\epsilon_i$ para simplificar a notação. Assim, o objetivo é encontrar $\beta_0$ e $\beta_1$ que tornem o nosso modelo, neste caso uma reta, o mais próximo possível de $y_i$. Em outras palavras queremos minimizar o erro $\epsilon_i = y_i - (\beta_0 + \beta_1 x_i).$
Por outro lado, note que o erro é também uma função, mas agora dos parâmetros desconhecidos $\epsilon(\beta_0, \beta_1)_i$. Para medir o quanto a nossa aproximação está próxima das observações podemos usar a função **perda quadrática** de forma análoga a subseção 1.2.5. Portanto, nosso objetivo passa a ser minimizar a soma de quadrados dos erros ou resíduos,
&lt;span class="math display" id="eq:SQreglinear"&gt;\[\begin{align}
SQ(\beta_0, \beta_1) &amp;amp;=&amp;amp; \sum_{i=1}^n \epsilon^2(\beta_0, \beta_1)_i \\
SQ(\beta_0, \beta_1) &amp;amp;=&amp;amp; \sum_{i=1}^n (y_i - (\beta_0 + \beta_1 x_i))^2.
  \tag{1.13}
\end{align}\]</span> Note que temos uma função com duas variáveis independentes <span class="math inline">\(\beta_0\)</span> e <span class="math inline">\(\beta_1\)</span>. Importante ainda enfatizar que tanto <span class="math inline">\(y_i\)</span> como <span class="math inline">\(x_i\)</span> são números (constantes) dentro da soma de quadrados dos resíduos. Para encontrar, digamos, <span class="math inline">\(\hat{\beta_0}\)</span> e <span class="math inline">\(\hat{\beta_1}\)</span> que minimizam </span></a><a href="CDI.html#eq:SQreglinear">(1.13) podemos usar o método baseado em derivadas parciais apresentado na subseção 1.2.6. O procedimento consiste dos seguintes passos:
<ul>
1.Obter o vetor gradiente <span class="math display">\[\nabla SQ(\beta_0,\beta_1) = \left ( \frac{\partial SQ(\beta_0,\beta_1)}{\partial \beta_0}, \frac{\partial SQ(\beta_0, \beta_1)}{\partial \beta_1} \right ).\]</span> 1.Encontrar <span class="math inline">\(\hat{\beta}_0\)</span> e <span class="math inline">\(\hat{\beta}_1\)</span> tal que <span class="math display">\[\nabla SQ(\hat{\beta}_0,\hat{\beta}_1) = \mathbf{0}.\]</span> 1.Verificar se o ponto critico encontrado é de mínimo avaliando o sinal das segundas derivadas parciais diretas e cruzadas.
</ul>
Para obter o vetor gradiente vamos usar a regra da cadeia, veja o passo-a-passo.
</a><ol style="list-style-type: decimal"><a href="CDI.html#eq:SQreglinear">
<p>1.Chame <span class="math inline">\(y_i - (\beta_0 + \beta_1 x_i) = \epsilon_i\)</span>. 1.Chame <span class="math inline">\(\beta_0 + \beta_1 x_i = \mu_i\)</span>. 1.Assim, <span class="math display">\[\nabla SQ(\beta_0,\beta_1) = \left ( \frac{\partial SQ(\beta_0,\beta_1)}{\partial \epsilon_i} \frac{\partial \epsilon_i}{\mu_i} \frac{\partial \mu_i}{\partial \beta_0}, \frac{\partial SQ(\beta_0,\beta_1)}{\partial \epsilon_i} \frac{\partial \epsilon_i}{\mu_i} \frac{\partial \mu_i}{\partial \beta_1} \right ),\]</span> em que <span class="math display">\[\frac{\partial SQ(\beta_0,\beta_1)}{\partial \epsilon_i} = \frac{\partial}{\partial \epsilon_i}\sum_{i=1}^n \epsilon_i^2 = 2\sum_{i=1}^2 \epsilon_i.\]</span></p>
<span class="math display">\[ \frac{\partial \epsilon_i}{\partial \mu_i} = \frac{\partial}{\partial \mu_i} (y_i - \mu_i) = -1.\]</span> <span class="math display">\[ \frac{\partial \mu_i}{\partial \beta_0} = \frac{\partial}{\partial \beta_0} \beta_0 + \beta_1 x_i = 1.\]</span> <span class="math display">\[ \frac{\partial \mu_i}{\partial \beta_1} = \frac{\partial}{\partial \beta_1} \beta_0 + \beta_1 x_i = x_i.\]</span> Portanto, <span class="math display">\[\begin{eqnarray*}
\nabla SQ(\beta_0,\beta_1) &amp;amp;=&amp;amp; \left ( -2\sum_{i=1}^n \epsilon_i (1); -2\sum_{i=1}^n \epsilon_i x_i \right ) \\
&amp;amp;=&amp;amp; \left ( -2\sum_{i=1}^n (y_i - \beta_0 - \beta_1 x_i); -2\sum_{i=1}^n (y_i - \beta_0 - \beta_1 x_i) x_i \right ).
\end{eqnarray*}\]</span> Precisamos agora resolver o seguinte conjunto de equações simultâneas <span class="math display" id="eq:EQ2">[<span class="math display">\[\begin{align}
-2\sum_{i=1}^n (y_i - \hat{\beta}_0 - \hat{\beta}_1 x_i) &amp;amp;=&amp;amp; 0 \tag{1.14}\\
-2\sum_{i=1}^n (y_i - \hat{\beta}_0 - \hat{\beta}_1 x_i) x_i &amp;amp;=&amp;amp; 0. \tag{1.15}
\end{align}\]</span><span class="math display">\[
Para resolver o sistema de equações, primeiro note que da Equação &lt;a href="CDI.html#eq:EQ1"&gt;(1.14) podemos obter $\hat{\beta_0}$ como uma função de $\hat{\beta_1}$,
&lt;span class="math display" id="eq:EQ3"&gt;\[\begin{equation}
\hat{\beta}_0 = \bar{y} - \hat{\beta}_1 \bar{x}.
\tag{1.16}
\end{equation}\]</span> Agora, substituindo Equação </span></a><a href="CDI.html#eq:EQ3">(1.16) na Equação </a><a href="CDI.html#eq:EQ2">(1.15) e resolvendo em <span class="math inline">\(\hat{\beta}_1\)</span>, temos <span class="math display" id="eq:beta1">[<span class="math display">\[\begin{equation}
  \hat{\beta}_1 = \frac{\sum_{i=1}^n y_i x_i - \bar{y}\sum_{i=1}^n x_i}{\sum_{i=1}^n x^2_i - \bar{x}\sum_{i=1}^n x_i}.
  \tag{1.17}
\end{equation}\]</span><span class="math display">\[
Por fim, podemos obter as entradas da matriz Hessiana.
As segundas derivadas principais são dadas por
\]</span><span class="math display">\[\begin{equation}
\frac{\partial^2 SQ(\beta_0, \beta_1)}{\partial \beta^2_0} = \frac{\partial}{\partial \beta_0} -2 \sum_{i=1}^n(y_i - \beta_0 - \beta_1 x_i) = 2 n \quad \text{e} \quad
\end{equation}\]</span><span class="math display">\[
\]</span><span class="math display">\[\begin{equation}
\frac{\partial^2 SQ(\beta_0, \beta_1)}{\partial \beta^2_1} = \frac{\partial}{\partial \beta_1} -2 \sum_{i=1}^n(y_i - \beta_0 - \beta_1 x_i) x_i = 2 \sum_{i=1}^n x_i^2.
\end{equation}\]</span><span class="math display">\[
A segunda derivada cruzada é dada por
\]</span><span class="math display">\[\begin{equation}
\frac{\partial^2 SQ(\beta_0, \beta_1)}{\partial \beta_0 \beta_1} = \frac{\partial}{\partial \beta_1} -2 \sum_{i=1}^n(y_i - \beta_0 - \beta_1 x_i) = 2 \sum_{i=1}^n x_i.
\end{equation}\]</span><span class="math display">\[
Assim, a matriz Hessiana é dada por
\]</span><span class="math display">\[\begin{equation*}
\mathbf{H} = \begin{pmatrix}
2n                &amp;amp;  2\sum_{i=1}^n x_i \\
2\sum_{i=1}^n x_i &amp;amp; 2\sum_{i=1}^n x^2_i
\end{pmatrix}.
\end{equation*}\]</span>$$ Temos que as derivadas parciais principais são sempre positivas o que indica que o ponto crítico é de mínimo. Além disso, temos que o produto das segundas derivadas principais é <span class="math inline">\(n 4\sum_{i=1}^n x_i^2\)</span>, e portanto é sempre maior que o quadrado da segunda derivada cruzada <span class="math inline">\(4\sum_{i=1}^n x^2_i\)</span>. Assim, o ponto é de mínimo quando a função é avaliada de todas as direções. Com estes resultados, podemos obter a reta ótima e visualizar o ajuste do modelo em comparação com os dados. Para isso, vamos ler a base de dados em <code>R</code> e obter os valores de <span class="math inline">\(\hat{\beta_0}\)</span> e <span class="math inline">\(\hat{\beta_1}\)</span>, conforme as Equações </span></a><a href="CDI.html#eq:EQ3">(1.16) e </a><a href="CDI.html#eq:beta1">(1.17).
</a><div class="sourceCode" id="cb68"><a href="CDI.html#eq:beta1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#eq:beta1"><code class="sourceCode r"><span id="cb68-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb68-1" aria-hidden="true" tabindex="-1"><span class="do">## Carregando a base de dados
<span id="cb68-2"></span></span></a><a href="CDI.html#cb68-2" aria-hidden="true" tabindex="-1">dados <span class="ot">&lt;- <span class="fu">read.table(<span class="st">"data/reglinear.csv", <span class="at">header = <span class="cn">TRUE)
<span id="cb68-3"></span></span></span></span></span></span></a><a href="CDI.html#cb68-3" aria-hidden="true" tabindex="-1">
<span id="cb68-4"></span></a><a href="CDI.html#cb68-4" aria-hidden="true" tabindex="-1"><span class="do">## Obtendo beta1
<span id="cb68-5"></span></span></a><a href="CDI.html#cb68-5" aria-hidden="true" tabindex="-1">beta1 <span class="ot">&lt;- (<span class="fu">sum(dados<span class="sc">$y<span class="sc">*dados<span class="sc">$x) <span class="sc">- <span class="fu">mean(dados<span class="sc">$y)<span class="sc">*<span class="fu">sum(dados<span class="sc">$x))<span class="sc">/
<span id="cb68-6"></span></span></span></span></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb68-6" aria-hidden="true" tabindex="-1">  (<span class="fu">sum(dados<span class="sc">$x<span class="sc">^<span class="dv">2) <span class="sc">- <span class="fu">mean(dados<span class="sc">$x)<span class="sc">*<span class="fu">sum(dados<span class="sc">$x))
<span id="cb68-7"></span></span></span></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb68-7" aria-hidden="true" tabindex="-1">
<span id="cb68-8"></span></a><a href="CDI.html#cb68-8" aria-hidden="true" tabindex="-1"><span class="co"># Obtendo beta0
<span id="cb68-9"></span></span></a><a href="CDI.html#cb68-9" aria-hidden="true" tabindex="-1">beta0 <span class="ot">&lt;- <span class="fu">mean(dados<span class="sc">$y) <span class="sc">- beta1<span class="sc">*<span class="fu">mean(dados<span class="sc">$x)
<span id="cb68-10"></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb68-10" aria-hidden="true" tabindex="-1"><span class="fu">c(beta0, beta1)`</span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb68-10" aria-hidden="true" tabindex="-1">
:::
<pre>`## [1] 2623 3608`</pre>
Com o intercepto e a inclinação da reta ajustada, podemos sobrepor o modelo aos dados.
</a><div class="figure" style="text-align: center"><a href="CDI.html#cb68-10" aria-hidden="true" tabindex="-1">
<span style="display:block;" id="fig:reglinear2"> <img src="MDSRbook_files/figure-html/reglinear2-1.png" alt="Diagrama de dispersão relacionando preço do apartamento como função do tamanho do apartamento em metros quadrados e reta de regressão ajustada." width="576">
<p class="caption">
</p><p>Figura 1.24: Diagrama de dispersão relacionando preço do apartamento como função do tamanho do apartamento em metros quadrados e reta de regressão ajustada.</p>
::: Por fim, podemos conferir o nosso resultado usando a função <code>lm()</code> do <code>R</code> que implementa o ajuste de modelos lineares.
</span></a><div class="sourceCode" id="cb70"><a href="CDI.html#cb68-10" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb68-10" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb70-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb70-1" aria-hidden="true" tabindex="-1">fit <span class="ot">&lt;- <span class="fu">lm(y <span class="sc">~ x, <span class="at">data = dados)
<span id="cb70-2"></span></span></span></span></span></a><a href="CDI.html#cb70-2" aria-hidden="true" tabindex="-1"><span class="fu">coef(fit)`</span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb70-2" aria-hidden="true" tabindex="-1">
:::
<pre>`## (Intercept)           x 
##        2623        3608`</pre>
Dada a simplicidade do modelo é também fácil interpretar os parâmetros estimados. O intercepto representa o preço de um apartamento de tamanho zero. O que óbviamente não tem sentido prático. No entanto, a inclinação (<span class="math inline">\(\beta_1\)</span>) representa o quanto é acrescido no preço do apartamento quando o seu tamanho aumenta em um metro quadrado. Também podemos usar o modelo para predizer o preço aproximado de um imóvel. Por exemplo, em nossa base de dados não temos nenhum apartamento com <span class="math inline">\(80\)</span> metros quadrados. Um potencial interesse pode ser em predizer o valor aproximado de um apartamento desse tamanho. Assim, podemos facilmente usar o nosso modelo que diz que o preço aproximado <span class="math inline">\(\hat{y}\)</span> de um apartamento é dado por <span class="math inline">\(\hat{y} = 2623 + 3608 \cdot x\)</span>. Substituindo <span class="math inline">\(x = 80\)</span> temos que o preço aproximado é de R<span class="math inline">\(\$ 291.263\)</span>. É claro que o modelo não irá predizer o valor exato do apartamento. Isso acontece porque temos apenas uma aproximação de primeira ordem da verdadeira função <span class="math inline">\(f^*(x)\)</span> que relaciona o tamanho com o preço. Uma opção é incluir mais termos na aproximação para obter uma forma de relacionamento mais flexível. Acontece que em termos práticos, tal abordagem não é muito útil por pelo menos dois motivos:
</a><ol style="list-style-type: decimal"><a href="CDI.html#cb70-2" aria-hidden="true" tabindex="-1">
<p>1.O erro cometido pode ser pelo fato de existir outras características importantes para determinar o preço do apartamento que não foram levadas em consideração em nosso modelo. Neste caso, o efeito de tais características será absorvido pelo termo de erro. E mesmo aumentando a ordem de aproximação o erro do modelo não apresentará um grande decréscimo. 1.Podem existir erros de mensuração pelo profissional da imobiliária que também serão absorvidos pelo termo de erro. Neste caso, se aumentarmos a ordem da aproximação estaremos capturando os erros de mensuração, o que claramente não é nosso objetivo. Lembre-se o objetivo de um modelo é representar a realidade de forma simplificada e não reproduzir os dados observados (potencialmente com erros).</p>
O modelo de regressão linear simples é facilmente estendido para o modelo de regressão linear múltipla. Neste modelo o valor da variável independente <span class="math inline">\(y\)</span> será uma função não de apenas uma variável explicativa, mas de várias. Neste modelo os cálculos necessários para obter as estimativas para os parâmetros <span class="math inline">\(\beta\)</span>’s cresce rapidamente em complexidade e usar a estratégia de resolver um sistema de linear de equações torna-se muito trabalhoso. Consequentemente precisamos de ferramentas mais gerais que nos permitam lidar com vetores e matrizes. Tais ferramentas serão apresentadas no Capítulo 2. Mas antes disso vamos apresentar o último tópico do Capítulo de Cálculo Diferencial e Integral: Integrais. ::: :::
</a><div id="integrais" class="section level2" number="1.3"><a href="CDI.html#cb70-2" aria-hidden="true" tabindex="-1">
##1.3 Integrais Sendo <span class="math inline">\(f(x)\)</span> uma função de uma variável independente, existem dois tipos de integrais: a <strong>integral indefinida</strong> e a <strong>integral definida</strong>. Nesta seção, vamos apresentar algumas regras básicas de integração e sua ideia fundamental como ferramenta matemática para calcular a área abaixo de curvas.
</a><div id="integral-indefinida" class="section level3" number="1.3.1"><a href="CDI.html#cb70-2" aria-hidden="true" tabindex="-1">
<h3 class="anchored">
<span class="header-section-number">1.3.1 Integral indefinida
</span></h3>
<p>Chamamos de <strong>integral indefinida</strong> o oposto ou o inverso da derivada, também chamada de antiderivada.</p>
<div class="callout callout-style-simple callout-important">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><span id="def:intindefinida" class="definition"><strong>Definição 1.18 </strong>A integral indefinida da função <span class="math inline">\(f(x)\)</span> é expressa por <span class="math display">\[\int f(x) dx = F(x) + c.\]</span></span></p>
</div>
</div>
</div>
Esta notação é lida como sendo “a integral de <span class="math inline">\(f\)</span> de <span class="math inline">\(x\)</span> em relação a <span class="math inline">\(x\)</span>.” O símbolo <span class="math inline">\(\int\)</span> é o <strong>sinal de integral</strong>, <span class="math inline">\(f(x)\)</span> é chamado de <strong>integrando</strong> e <span class="math inline">\(c\)</span> é uma constante de integração. <span class="math inline">\(F(x) + c\)</span> é chamada de <strong>integral indefinida</strong> porque <span class="math inline">\(x\)</span> não é especificado e portanto pode assumir vários valores. Para calcular uma integral indefinida tente pensar em qual função você deveria derivar para encontrar <span class="math inline">\(f(x)\)</span>. Por exemplo, <span class="math display">\[ \int x dx = \frac{x^2}{2} + c,\]</span> uma vez que se derivarmos <span class="math inline">\(\frac{x^2}{2}\)</span> encontramos <span class="math inline">\(x\)</span>. Da mesma forma que no caso de derivadas, contamos com uma extensa lista de regras de integração. Tais regras são obtidas pela inversão das regras correspondentes de diferenciação. Sendo <span class="math inline">\(k\)</span> uma constante qualquer, temos
</a><ol style="list-style-type: decimal"><a href="CDI.html#cb70-2" aria-hidden="true" tabindex="-1">
<p>1.Integral de uma constante <span class="math inline">\(k\)</span> <span class="math display">\[\int k dx = kx + c.\]</span> 1.Integral de <span class="math inline">\(1\)</span> <span class="math display">\[\int 1 dx = x + c.\]</span> 1.Integral da função potência <span class="math inline">\(x^n\)</span>, onde <span class="math inline">\(n \neq -1\)</span> <span class="math display">\[ \int x^n dx = \frac{1}{n+1} x^{n+1} + c \quad n \neq 1.\]</span> 1.Integral de <span class="math inline">\(x^{-1}\)</span> <span class="math display">\[\int \frac{1}{x} dx = \ln |x| + c \quad \text{se} \quad x \neq 0.\]</span> 1.Integral da função exponencial <span class="math display">\[\int a^{kx} dx = \frac{a^{kx}}{k \ln a} + c.\]</span> 1.Integral da função exponencial natural <span class="math display">\[\int \exp^{kx}dx = \frac{\exp^{kx}}{k} + c.\]</span> 1.A integral de uma constante multiplicado por uma função é igual à constante multiplicada pela integral da função. <span class="math display">\[\int k f(x) dx = k \int f(x) dx.\]</span> 1.A integral da soma é igual a soma das integrais. <span class="math display">\[\int \left[ f(x) + g(x)\right]dx = \int f(x)dx + \int g(x) dx.\]</span></p>
O leitor atento deve estar se perguntando: o que é a constante de integração <span class="math inline">\(c\)</span>? E por que ela aparece em todas as regras de integração? O que explica a necessidade da constante de integração <span class="math inline">\(c\)</span> é o fato de que funções que diferem apenas por uma constante têm a mesma derivada. Por exemplo, a função <span class="math inline">\(F(x) = 2x + k\)</span> tem a mesma derivada, <span class="math inline">\(f(x) = 2\)</span>, para um número infinito de valores possíveis para <span class="math inline">\(k\)</span>. Se o processo é invertido, fica claro que <span class="math inline">\(\int 2 dx\)</span> tem que ser a antiderivada para um número infinito de funções que diferem umas das outras apenas por uma constante. Portanto, a constante de integração <span class="math inline">\(c\)</span> serve para representar o valor de qualquer constante que fazia parte da função primitiva que foi excluída da derivada pelas regras de diferenciação. Existem diversas outras técnicas ou regras de integração como: integral por partes, integração por substituição, e diversas outras que não serão tratadas neste material. O uso de integrais em ciência de dados é mais restrito do que o de derivadas. Integrais serão úteis no estudo da teoria das probabilidades e aparecem em técnicas avançadas de modelagem estatística como nos modelos hierárquicos ou, de forma mais geral, na classe dos modelos com variáveis latentes. Novamente, tais técnicas estão fora do escopo deste livro. :::
</a><div id="integral-definida" class="section level3" number="1.3.2"><a href="CDI.html#cb70-2" aria-hidden="true" tabindex="-1">
<h3 class="anchored">
<span class="header-section-number">1.3.2 Integral definida
</span></h3>
Suponha que <span class="math inline">\(f(x)\)</span> defina uma curva entre os pontos <span class="math inline">\(a\)</span> e <span class="math inline">\(b\)</span> conforme ilustrado na Figura </a><a href="CDI.html#fig:integralilus">1.25 (A). O interesse é calcular a área sob a curva <span class="math inline">\(f(x)\)</span> entre os pontos <span class="math inline">\(a=0\)</span> e <span class="math inline">\(b=1\)</span>. Não há fórmula geométrica para obter tal área. O desafio que surge é como calcular a área abaixo desta curva. Para resolver este desafio é que usamos a <strong>integral definida</strong>. De forma geral, a ideia é bastante intuitiva e consiste em dividir o intervalo <span class="math inline">\([a,b]\)</span> em <span class="math inline">\(n\)</span> subintervalos, digamos <span class="math inline">\([a_1,b_1], \ldots, [a_n, b_n]\)</span>. Para cada um destes subintervalos podemos construir retângulos de tal modo que a altura seja igual ao menor valor da função no subintervalo, conforme ilustrado na Figura </a><a href="CDI.html#fig:integralilus">1.25 (B). A soma das áreas dos retângulos <span class="math inline">\(\sum_{i=1}^n f(x_i) \Delta x_i\)</span> será aproximadamente a área sob a curva. Nesta notação, <span class="math inline">\(\Delta x_i = x_{i+1} - x_i\)</span>, é o comprimento da base do retângulo. Quanto menor for o subintervalo, mais retângulos serão criados e melhor será a aproximação.
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:integralilus">
<span style="display:block;" id="fig:integralilus"> <img src="MDSRbook_files/figure-html/integralilus-1.png" alt="Ilustração de função para o cálculo de área abaixo de uma curva." width="576">
<p class="caption">
</p><p>Figura 1.25: Ilustração de função para o cálculo de área abaixo de uma curva.</p>
::: Baseado nesta intuição e com o uso de limites, podemos tornar o número de retângulos tão grande quanto necessário. Assim, a área abaixo da curva <span class="math inline">\(f(x)\)</span> pode ser matematicamente expressa por <span class="math display" id="eq:Riemann">[<span class="math display">\[\begin{equation}
  \lim_{n \to \infty} \sum_{i=1}^n f(x_i) \delta x_i = \int_{a}^b f(x) dx.
  \tag{1.18}
\end{equation}\]</span>$$ A ideia é simples: vamos diminuindo a amplitude de cada intervalo até que cada intervalo se torne infinitesimal. De forma equivalente, podemos pensar que estamos incluindo cada vez mais retângulos, o que vai fazer com que a soma de Riemann (Equação </span></span></a><a href="CDI.html#eq:Riemann">(1.18)) fique cada vez mais próxima da área abaixo de <span class="math inline">\(f(x)\)</span>. Essa ideia é ilustrada na Figura </a><a href="CDI.html#fig:integralilus2">1.26 para um número crescente de retângulos.
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:integralilus2">
<span style="display:block;" id="fig:integralilus2"> <img src="MDSRbook_files/figure-html/integralilus2-1.png" alt="Ilustração da soma de Riemann." width="864">
<p class="caption">
</p><p>Figura 1.26: Ilustração da soma de Riemann.</p>
</span></a><p><a href="CDI.html#fig:integralilus2">::: Na Figura </a><a href="CDI.html#fig:integralilus2">1.26 (A) foram utilizados <span class="math inline">\(9\)</span> retângulos, ao passo que em </a><a href="CDI.html#fig:integralilus2">1.26 (B) e </a><a href="CDI.html#fig:integralilus2">1.26 (C) foram utilizados <span class="math inline">\(24\)</span> e <span class="math inline">\(49\)</span> retângulos, respectivamente. Claramente conforme o número de retângulos cresce a área abaixo de <span class="math inline">\(f(x)\)</span> é melhor aproximada. A integral definida de uma função contínua <span class="math inline">\(f(x)\)</span> sobre o intervalo <span class="math inline">\(a\)</span> e <span class="math inline">\(b\)</span>, sendo <span class="math inline">\(a &amp;lt; b\)</span> é denotada por <span class="math display">\[\int_{a}^b f(x) dx.\]</span> Essa notação é lida como “a integral de <span class="math inline">\(a\)</span> até <span class="math inline">\(b\)</span> de <span class="math inline">\(f\)</span> de <span class="math inline">\(x\)</span> <span class="math inline">\(dx\)</span>.” <span class="math inline">\(a\)</span> é chamado <strong>limite inferior</strong> de integração e <span class="math inline">\(b\)</span> é chamado <strong>limite superior</strong> de integração. Para o cálculo da integral definida usamos o <strong>Teorema fundamental do cálculo</strong> que diz que o valor numérico da integral definida de uma função contínua <span class="math inline">\(f(x)\)</span> no intervalo de <span class="math inline">\(a\)</span> até <span class="math inline">\(b\)</span> é dada pela integral indefinida <span class="math inline">\(F(x) + c\)</span> calculada no limite superior de integração <span class="math inline">\(b\)</span>, menos a mesma integral indefinida calculada no limite inferior de integração <span class="math inline">\(a\)</span>. Assim, como <span class="math inline">\(c\)</span> é comum aos dois, a constante de integração é eliminada por subtração.</a></p><a href="CDI.html#fig:integralilus2">
</a><div class="theorem"><a href="CDI.html#fig:integralilus2">
<p><span id="thm:fundamental" class="theorem"><strong>Teorema 1.3 </strong>Se uma função <span class="math inline">\(f(x)\)</span> é contínua ao longo do intervalo <span class="math inline">\([a,b]\)</span> e <span class="math inline">\(F(x)\)</span> é a antiderivada de <span class="math inline">\(f(x)\)</span> ao longo desse mesmo intervalo, então <span class="math display">\[ \int_{a}^b f(x) dx = F(b) - F(a).\]</span> :::</span></p>
</a><div class="example"><a href="CDI.html#fig:integralilus2">
</a><p><a href="CDI.html#fig:integralilus2"><span id="exm:integral" class="example"><strong>Example 1.12 </strong>Calcule <span class="math display">\[ \int_{1}^{2} x^2 dx.\]</span> ::: A solução é bastante simples usando a antiderivada e o Teorema </span></a><a href="CDI.html#thm:fundamental">1.3. <span class="math display">\[F(2) - F(1) = \frac{x^3}{3}|_{x=2} - \frac{x^3}{3}|_{x=1} = \frac{8}{3} - \frac{1}{3} = \frac{7}{3} = 2.33\ldots.\]</span> Uma outra forma de obter apenas o valor da integral é usar diretamente a soma de Riemann. Computacionalmente, a soma de Riemann pode ser facilmente implementada em <code>R</code> conforme ilustrado no Código </a><a href="CDI.html#lem:Riemann">1.5.</a></p><a href="CDI.html#lem:Riemann">
<span id="lem:Riemann" class="lemma"><strong>Código 1.5 </strong>Soma de Riemann. :::
</span></a><div class="sourceCode" id="cb72"><a href="CDI.html#lem:Riemann">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#lem:Riemann"><code class="sourceCode r"><span id="cb72-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb72-1" aria-hidden="true" tabindex="-1">soma_riemann <span class="ot">&lt;- <span class="cf">function(n, a, b, fx, ...) {
<span id="cb72-2"></span></span></span></a><a href="CDI.html#cb72-2" aria-hidden="true" tabindex="-1">  intervalos <span class="ot">&lt;- <span class="fu">seq(a, b, <span class="at">length = n)
<span id="cb72-3"></span></span></span></span></a><a href="CDI.html#cb72-3" aria-hidden="true" tabindex="-1">  ci <span class="ot">&lt;- <span class="fu">c()
<span id="cb72-4"></span></span></span></a><a href="CDI.html#cb72-4" aria-hidden="true" tabindex="-1">  soma <span class="ot">&lt;- <span class="fu">c()
<span id="cb72-5"></span></span></span></a><a href="CDI.html#cb72-5" aria-hidden="true" tabindex="-1">  <span class="cf">for(i <span class="cf">in <span class="dv">1<span class="sc">:<span class="fu">c(n<span class="dv">-1)) {
<span id="cb72-6"></span></span></span></span></span></span></span></a><a href="CDI.html#cb72-6" aria-hidden="true" tabindex="-1">    Deltai <span class="ot">&lt;- (intervalos[i<span class="sc">+<span class="dv">1] <span class="sc">- intervalos[i]) <span class="co"># Tamanho do intervalo
<span id="cb72-7"></span></span></span></span></span></span></a><a href="CDI.html#cb72-7" aria-hidden="true" tabindex="-1">    ci[i] <span class="ot">&lt;- (intervalos[i<span class="sc">+<span class="dv">1] <span class="sc">+ intervalos[i])<span class="sc">/<span class="dv">2 <span class="co"># Ponto central do intervalo
<span id="cb72-8"></span></span></span></span></span></span></span></span></a><a href="CDI.html#cb72-8" aria-hidden="true" tabindex="-1">    soma[i] <span class="ot">&lt;- <span class="fu">fx(ci[i])<span class="sc">*Deltai <span class="co"># Cada elemento da soma
<span id="cb72-9"></span></span></span></span></span></a><a href="CDI.html#cb72-9" aria-hidden="true" tabindex="-1">  }
<span id="cb72-10"></span></a><a href="CDI.html#cb72-10" aria-hidden="true" tabindex="-1">  <span class="fu">return(<span class="fu">sum(soma))
<span id="cb72-11"></span></span></span></a><a href="CDI.html#cb72-11" aria-hidden="true" tabindex="-1">}
<span id="cb72-12"></span></a><a href="CDI.html#cb72-12" aria-hidden="true" tabindex="-1">soma_riemann <span class="ot">&lt;- <span class="fu">Vectorize(soma_riemann, <span class="st">"n")`</span></span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb72-12" aria-hidden="true" tabindex="-1">
::: Agora vamos avaliar o valor da integral para um número crescente de retângulos dentro do intervalo <span class="math inline">\([1,2]\)</span>. A Figura </a><a href="CDI.html#fig:Riemann2">1.27 (A) apresenta o gráfico da função <span class="math inline">\(f(x) = x^2\)</span> no intervalo <span class="math inline">\([1,2]\)</span>. A Figura </a><a href="CDI.html#fig:Riemann2">1.27 (B) apresenta no eixo <span class="math inline">\(y\)</span> o valor aproximado da integral como uma função do número de intervalos (eixo <span class="math inline">\(x\)</span>).
</a><div class="figure" style="text-align: center"><a href="CDI.html#fig:Riemann2">
<span style="display:block;" id="fig:Riemann2"> <img src="MDSRbook_files/figure-html/Riemann2-1.png" alt="Ilustração da soma de Riemann." width="576">
<p class="caption">
</p><p>Figura 1.27: Ilustração da soma de Riemann.</p>
</span></a><p><a href="CDI.html#fig:Riemann2">::: Claramente, conforme aumentamos o número de intervalos o valor aproximado da integral se estabiliza em torno do valor <span class="math inline">\(\frac{7}{3}\)</span>. O mesmo valor que obtemos usando a antiderivada e o Teorema </a><a href="CDI.html#thm:fundamental">1.3. No caso de integrais definidas pode acontecer que um ou ambos limites de integração sejam infinito ou menos infinito, neste caso dizemos que temos uma integral imprópria.</a></p><a href="CDI.html#thm:fundamental">
</a><div class="example"><a href="CDI.html#thm:fundamental">
<span id="exm:impropria" class="example"><strong>Example 1.13 </strong>São exemplos de integrais impróprias <span class="math display">\[\int_{a}^{\infty} f(x) dx, \quad \int_{-\infty}^{b} f(x) dx \quad \text{e} \quad \int_{-\infty}^{\infty} f(x) dx.\]</span> ::: Neste caso infinito não é um número e não pode ser substituído por <span class="math inline">\(x\)</span> em <span class="math inline">\(F(x)\)</span>. Assim, precisamos novamente recorrer a limites para obter o valor de tais integrais. <span class="math display">\[\int_{a}^{\infty} f(x)dx = \lim_{b \to \infty} \int_{a}^b f(x) dx.\]</span> Se o limite existir dizemos que a integral imprópria <strong>converge</strong> e a integral terá um valor. Caso contrário, a integral imprópria <strong>diverge</strong> e não terá significado prático. Em termos computacionais o <code>R</code> não dispõe de uma função semelhante a função <code>D()</code> para a obtenção de integrais de forma simbólica. Porém, é possível usar outros softwares de matemática simbólica como o </span></a><a href="https://www.wolframalpha.com/">Wolfram alpha e o </a><a href="https://wxmaxima-developers.github.io/wxmaxima/">wxMaxima. Em <code>R</code> a função <code>integrate()</code> pode ser utilizada para o cálculo de integrais de uma variável, porém usando algoritmos numéricos. A ideia é similar a soma de Riemann. Vamos obter o valor da integral do Exemplo </a><a href="CDI.html#exm:integral">1.12 usando a função <code>integrate()</code>.
</a><div class="sourceCode" id="cb73"><a href="CDI.html#exm:integral">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#exm:integral"><code class="sourceCode r"><span id="cb73-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb73-1" aria-hidden="true" tabindex="-1">fx <span class="ot">&lt;- <span class="cf">function(x) x<span class="sc">^<span class="dv">2
<span id="cb73-2"></span></span></span></span></span></a><a href="CDI.html#cb73-2" aria-hidden="true" tabindex="-1"><span class="fu">integrate(fx, <span class="at">lower = <span class="dv">1, <span class="at">upper = <span class="dv">2)`</span></span></span></span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb73-2" aria-hidden="true" tabindex="-1">
:::
<pre>`## 2.33 with absolute error &lt; 2.6e-14`</pre>
Apenas como comparação, o valor da integral usando a soma de Riemann com <span class="math inline">\(n = 100\)</span>.
</a><div class="sourceCode" id="cb75"><a href="CDI.html#cb73-2" aria-hidden="true" tabindex="-1">
</a><pre class="sourceCode r code-with-copy"><a href="CDI.html#cb73-2" aria-hidden="true" tabindex="-1"><code class="sourceCode r"><span id="cb75-1"></span></code></a><code class="sourceCode r"><a href="CDI.html#cb75-1" aria-hidden="true" tabindex="-1"><span class="fu">soma_riemann(<span class="at">n = <span class="dv">100, <span class="at">a = <span class="dv">1, <span class="at">b = <span class="dv">2, <span class="at">fx = fx)`</span></span></span></span></span></span></span></span></a></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><code class="sourceCode r"><a href="CDI.html#cb75-1" aria-hidden="true" tabindex="-1">
:::
<pre>`## [1] 2.33`</pre>
Ambas abordagens retornam o mesmo valor para a integral. Por fim, é importante mencionar que o cálculo de integrais pode ser estendido para funções com mais de uma variável independente de forma análoga ao que foi feito para derivadas, ou seja, integramos uma variável independente assumindo que todas as outras são constantes. Porém, uma discussão mais completa sobre integrais multidimensionais está fora do escopo deste material. ::: :::
</a><div id="referências-bibliográficas" class="section level2" number="1.4"><a href="CDI.html#cb75-1" aria-hidden="true" tabindex="-1">
##1.4 Referências bibliográficas Para escolher o conteúdo deste capítulo nós pensamos quais eram os principais conteúdos da disciplina de cálculo diferencial e integral essenciais para que o leitor pudesse acompanhar livros como <span class="citation">Goodfellow, Bengio, and Courville (2016) e <span class="citation">Deisenroth, Faisal, and Ong (2020). Como inspiração para estruturar o capítulo foram usados livros básicos de cálculo aplicado à economia e administração tais como <span class="citation">Dowling (1984) e <span class="citation">Leithold (1988). Além dos capítulos iniciais de <span class="citation">Gilat and Subramaniam (2009). Por fim, para uma base mais sólida do cálculo diferencial e integral foi consultado <span class="citation">Guidorizzi (2013). :::
</span></span></span></span></span></span></a><div id="exercícios" class="section level2" number="1.5"><a href="CDI.html#cb75-1" aria-hidden="true" tabindex="-1">
</a><p><a href="CDI.html#cb75-1" aria-hidden="true" tabindex="-1">##1.5 Exercícios Os exercícios deste livro são na forma de tutoriais interativos. Acesse </a><a href="http://shiny.leg.ufpr.br/wagner/Aula1_CDI/">Exercícios Cálculo Diferencial Integral.</a></p><a href="http://shiny.leg.ufpr.br/wagner/Aula1_CDI/">
</a>

</div></div></code></div></code></div></div></div></code></div></div></div></div></div></div></ol></div></div></ol></code></div></div></code></div></ol></div></div></div></code></div></code></div></div></div></div></ol></ol></ol></ol></div></div></code></div></code></div></code></div></code></div></div></div></div></div></ol></ol></ol></ol></div></div></code></div></code></div></code></div></code></div></ol></div></div></div></div></div></code></div></ol></code></div></code></div></ol></ol></code></div></ol></code></div></ol></div></div></div></div></div></div></div></code></div></div></code></div></div></ol></ol></ol></div></div></div></div></div></div></div></div></div></code></div></code></div></code></div></ol></ol></div></div></div></div></code></div></code></div></code></div></code></div></code></div></code></div></div></div></div></div></code></div></code></div></div></code></div></section><a href="CDI.html#fig:plotSQmu2"><code class="sourceCode r"><code class="sourceCode r"><code class="sourceCode r">

</code></code></code></a></main><a href="CDI.html#fig:plotSQmu2"><code class="sourceCode r"><code class="sourceCode r"><code class="sourceCode r"> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</code></code></code></a><code class="sourceCode r"><code class="sourceCode r"><code class="sourceCode r"><nav class="page-navigation"><a href="CDI.html#fig:plotSQmu2">
  </a><div class="nav-page nav-page-previous"><a href="CDI.html#fig:plotSQmu2">
      </a><a href="../../content/index.html" class="pagination-link  aria-label=" prefácio"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Prefácio</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../content/Modulo02/index.html" class="pagination-link" aria-label="<span class='chapter-number'>2</span>&nbsp; <span class='chapter-title'>Estatísticas de Ordem</span>">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Estatísticas de Ordem</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</code></code></code></div><code class="sourceCode r"><code class="sourceCode r"><code class="sourceCode r"> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Estatística 2023-2026</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://raymz1990.github.io/CE313/edit/main/book/content/Modulo01/index.qmd" class="toc-action"><i class="bi bi-git"></i>Edit this page</a></li><li><a href="https://raymz1990.github.io/CE313/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right"><a href="http://shiny.leg.ufpr.br/wagner/Aula1_CDI/">
</a><p><a href="http://shiny.leg.ufpr.br/wagner/Aula1_CDI/">This book was built with </a><a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</code></code></code></body></html>